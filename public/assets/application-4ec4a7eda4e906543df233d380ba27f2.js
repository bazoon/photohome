function add_to_string(t,e){return 0==t.length?e.toString():t+","+e}function remove_from_string(t,e){var i=t.split(","),n=i.indexOf(e.toString());return n>-1&&i.splice(n,1),i.join(",")}function id_in_string(t,e){var i=t.split(","),n=e.toString(),s=i.indexOf(n);return s>-1?!0:!1}function photo_ids(){return $("#competition_photo_photo_ids").val()}function add_photo(t){if(!id_in_string(photo_ids(),t)){var e="#ph"+t,i=$(e).clone();i.attr("id","phc"+t),i.attr("num",t),i.attr("height",80),i.appendTo("#next"),$("#competition_photo_photo_ids").val(add_to_string(photo_ids(),t)),$("#phc"+t).on("click","",function(){var t=$("#competition_photo_photo_ids").val();t=remove_from_string(photo_ids(),$(this).attr("num")),$("#competition_photo_photo_ids").val(t),$(this).remove()})}}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=se.type(t);return"function"===i||se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(se.isFunction(e))return se.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return se.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ue.test(e))return se.filter(e,t,i);e=se.filter(e,t)}return se.grep(t,function(t){return se.inArray(t,e)>=0!==i})}function s(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=we[t]={};return se.each(t.match(ye)||[],function(t,i){e[i]=!0}),e}function a(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1)):(fe.detachEvent("onreadystatechange",r),t.detachEvent("onload",r))}function r(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(a(),se.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Te,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ce.test(i)?se.parseJSON(i):i}catch(s){}se.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!se.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(se.acceptData(t)){var s,o,a=se.expando,r=t.nodeType,l=r?se.cache:t,c=r?t[a]:t[a]&&a;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=r?t[a]=K.pop()||se.guid++:a),l[c]||(l[c]=r?{}:{toJSON:se.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[c]=se.extend(l[c],e):l[c].data=se.extend(l[c].data,e)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[se.camelCase(e)]=i),"string"==typeof e?(s=o[e],null==s&&(s=o[se.camelCase(e)])):s=o,s}}function d(t,e,i){if(se.acceptData(t)){var n,s,o=t.nodeType,a=o?se.cache:t,r=o?t[se.expando]:se.expando;if(a[r]){if(e&&(n=i?a[r]:a[r].data)){se.isArray(e)?e=e.concat(se.map(e,se.camelCase)):e in n?e=[e]:(e=se.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!c(n):!se.isEmptyObject(n))return}(i||(delete a[r].data,c(a[r])))&&(o?se.cleanData([t],!0):ie.deleteExpando||a!=a.window?delete a[r]:a[r]=null)}}}function u(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function m(t){var e=Fe.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==_e?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==_e?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||se.nodeName(n,e)?o.push(n):se.merge(o,g(n,e));return void 0===e||e&&se.nodeName(t,e)?se.merge([t],o):o}function v(t){Ne.test(t.type)&&(t.defaultChecked=t.checked)}function b(t,e){return se.nodeName(t,"table")&&se.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==se.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Ve.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var i,n=0;null!=(i=t[n]);n++)se._data(i,"globalEval",!e||se._data(e[n],"globalEval"))}function k(t,e){if(1===e.nodeType&&se.hasData(t)){var i,n,s,o=se._data(t),a=se._data(e,o),r=o.events;if(r){delete a.handle,a.events={};for(i in r)for(n=0,s=r[i].length;s>n;n++)se.event.add(e,i,r[i][n])}a.data&&(a.data=se.extend({},a.data))}}function _(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[se.expando]){s=se._data(e);for(n in s.events)se.removeEvent(e,n,s.handle);e.removeAttribute(se.expando)}"script"===i&&e.text!==t.text?(y(e).text=t.text,w(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!se.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ne.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function C(e,i){var n,s=se(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:se.css(s[0],"display");return s.detach(),o}function T(t){var e=fe,i=Ze[t];return i||(i=C(t,e),"none"!==i&&i||(Je=(Je||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Je[0].contentWindow||Je[0].contentDocument).document,e.write(),e.close(),i=C(t,e),Je.detach()),Ze[t]=i),i}function D(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=ui.length;s--;)if(e=ui[s]+i,e in t)return e;return n}function S(t,e){for(var i,n,s,o=[],a=0,r=t.length;r>a;a++)n=t[a],n.style&&(o[a]=se._data(n,"olddisplay"),i=n.style.display,e?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&Se(n)&&(o[a]=se._data(n,"olddisplay",T(n.nodeName)))):(s=Se(n),(i&&"none"!==i||!s)&&se._data(n,"olddisplay",s?i:se.css(n,"display"))));for(a=0;r>a;a++)n=t[a],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[a]||"":"none"));return t}function E(t,e,i){var n=li.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function N(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=se.css(t,i+$e[o],!0,s)),n?("content"===i&&(a-=se.css(t,"padding"+$e[o],!0,s)),"margin"!==i&&(a-=se.css(t,"border"+$e[o]+"Width",!0,s))):(a+=se.css(t,"padding"+$e[o],!0,s),"padding"!==i&&(a+=se.css(t,"border"+$e[o]+"Width",!0,s)));return a}function A(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=ti(t),a=ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=ei(t,e,o),(0>s||null==s)&&(s=t.style[e]),ni.test(s))return s;n=a&&(ie.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+N(t,e,i||(a?"border":"content"),n,o)+"px"}function M(t,e,i,n,s){return new M.prototype.init(t,e,i,n,s)}function O(){return setTimeout(function(){pi=void 0}),pi=se.now()}function P(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=$e[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function I(t,e,i){for(var n,s=(yi[e]||[]).concat(yi["*"]),o=0,a=s.length;a>o;o++)if(n=s[o].call(i,e,t))return n}function F(t,e,i){var n,s,o,a,r,l,c,h,d=this,u={},p=t.style,f=t.nodeType&&Se(t),m=se._data(t,"fxshow");i.queue||(r=se._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,se.queue(t,"fx").length||r.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=se.css(t,"display"),h="none"===c?se._data(t,"olddisplay")||T(t.nodeName):c,"inline"===h&&"none"===se.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==T(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],mi.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}u[n]=m&&m[n]||se.style(t,n)}else c=void 0;if(se.isEmptyObject(u))"inline"===("none"===c?T(t.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=se._data(t,"fxshow",{}),o&&(m.hidden=!f),f?se(t).show():d.done(function(){se(t).hide()}),d.done(function(){var e;se._removeData(t,"fxshow");for(e in u)se.style(t,e,u[e])});for(n in u)a=I(f?m[n]:0,n,d),n in m||(m[n]=a.start,f&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function R(t,e){var i,n,s,o,a;for(i in t)if(n=se.camelCase(i),s=e[n],o=t[i],se.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),a=se.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function L(t,e,i){var n,s,o=0,a=bi.length,r=se.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=pi||O(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(o);return r.notifyWith(t,[c,o,i]),1>o&&l?i:(r.resolveWith(t,[c]),!1)},c=r.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pi||O(),duration:i.duration,tweens:[],createTween:function(e,i){var n=se.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return e?r.resolveWith(t,[c,e]):r.rejectWith(t,[c,e]),this}}),h=c.props;for(R(h,c.opts.specialEasing);a>o;o++)if(n=bi[o].call(c,t,h,c.opts))return n;return se.map(h,I,c),se.isFunction(c.opts.start)&&c.opts.start.call(t,c),se.fx.timer(se.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(ye)||[];if(se.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function j(t,e,i,n){function s(r){var l;return o[r]=!0,se.each(t[r]||[],function(t,r){var c=r(e,i,n);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var o={},a=t===Bi;return s(e.dataTypes[0])||!o["*"]&&s("*")}function z(t,e){var i,n,s=se.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&se.extend(!0,t,i),t}function W(t,e,i){for(var n,s,o,a,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(a in r)if(r[a]&&r[a].test(s)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function B(t,e,i,n){var s,o,a,r,l,c={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(s in c)if(r=s.split(" "),r[1]===o&&(a=c[l+" "+r[0]]||c["* "+r[0]])){a===!0?a=c[s]:c[s]!==!0&&(o=r[0],h.unshift(r[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function U(t,e,i,n){var s;if(se.isArray(e))se.each(e,function(e,s){i||Vi.test(t)?n(t,s):U(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==se.type(e))n(t,e);else for(s in e)U(t+"["+s+"]",e[s],i,n)}function q(){try{return new t.XMLHttpRequest}catch(e){}}function Y(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(t){return se.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var K=[],Q=K.slice,X=K.concat,G=K.push,J=K.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ie={},ne="1.11.1",se=function(t,e){return new se.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,re=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};se.fn=se.prototype={jquery:ne,constructor:se,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Q.call(this)},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},map:function(t){return this.pushStack(se.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:K.sort,splice:K.splice},se.extend=se.fn.extend=function(){var t,e,i,n,s,o,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||se.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(s=arguments[r]))for(n in s)t=a[n],i=s[n],a!==i&&(c&&i&&(se.isPlainObject(i)||(e=se.isArray(i)))?(e?(e=!1,o=t&&se.isArray(t)?t:[]):o=t&&se.isPlainObject(t)?t:{},a[n]=se.extend(c,o,i)):void 0!==i&&(a[n]=i));return a},se.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray||function(t){return"array"===se.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!se.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&se.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(re,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,a=t.length,r=i(t);if(n){if(r)for(;a>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(r)for(;a>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?se.merge(n,"string"==typeof t?[t]:t):G.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(J)return J.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,a=t.length,r=!i;a>o;o++)n=!e(t[o],o),n!==r&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,a=t.length,r=i(t),l=[];if(r)for(;a>o;o++)s=e(t[o],o,n),null!=s&&l.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&l.push(s);return X.apply([],l)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),se.isFunction(t)?(i=Q.call(arguments,2),n=function(){return t.apply(e||this,i.concat(Q.call(arguments)))},n.guid=t.guid=t.guid||se.guid++,n):void 0},now:function(){return+new Date},support:ie}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ce=function(t){function e(t,e,i,n){var s,o,a,r,l,c,d,p,f,m;if((e?e.ownerDocument||e:j)!==M&&A(e),e=e||M,i=i||[],!t||"string"!=typeof t)return i;if(1!==(r=e.nodeType)&&9!==r)return[];if(P&&!n){if(s=be.exec(t))if(a=s[1]){if(9===r){if(o=e.getElementById(a),!o||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&L(e,o)&&o.id===a)return i.push(o),i}else{if(s[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((a=s[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(a)),i}if(x.qsa&&(!I||!I.test(t))){if(p=d=H,f=e,m=9===r&&t,1===r&&"object"!==e.nodeName.toLowerCase()){for(c=T(t),(d=e.getAttribute("id"))?p=d.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=ye.test(t)&&h(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{d||e.removeAttribute("id")}}}return $(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>k.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[H]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)k.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function r(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),a=o.length;a--;)i[s=o[a]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&typeof t.getElementsByTagName!==V&&t}function d(){}function u(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=W++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,a){var r,l,c=[z,o];if(a){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,a))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[H]||(e[H]={}),(r=l[n])&&r[0]===z&&r[1]===o)return c[2]=r[2];if(l[n]=c,c[2]=t(e,i,a))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function g(t,e,i,n,s){for(var o,a=[],r=0,l=t.length,c=null!=e;l>r;r++)(o=t[r])&&(!i||i(o,n,s))&&(a.push(o),c&&e.push(r));return a}function v(t,e,i,s,o,a){return s&&!s[H]&&(s=v(s)),o&&!o[H]&&(o=v(o,a)),n(function(n,a,r,l){var c,h,d,u=[],p=[],f=a.length,v=n||m(e||"*",r.nodeType?[r]:r,[]),b=!t||!n&&e?v:g(v,u,t,r,l),y=i?o||(n?t:f||s)?[]:a:b;if(i&&i(b,y,r,l),s)for(c=g(y,p),s(c,[],r,l),h=c.length;h--;)(d=c[h])&&(y[p[h]]=!(b[p[h]]=d));if(n){if(o||t){if(o){for(c=[],h=y.length;h--;)(d=y[h])&&c.push(b[h]=d);o(null,y=[],c,l)}for(h=y.length;h--;)(d=y[h])&&(c=o?ee.call(n,d):u[h])>-1&&(n[c]=!(a[c]=d))}}else y=g(y===a?y.splice(f,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function b(t){for(var e,i,n,s=t.length,o=k.relative[t[0].type],a=o||k.relative[" "],r=o?1:0,l=p(function(t){return t===e},a,!0),c=p(function(t){return ee.call(e,t)>-1},a,!0),h=[function(t,i,n){return!o&&(n||i!==S)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];s>r;r++)if(i=k.relative[t[r].type])h=[p(f(h),i)];else{if(i=k.filter[t[r].type].apply(null,t[r].matches),i[H]){for(n=++r;s>n&&!k.relative[t[n].type];n++);return v(r>1&&f(h),r>1&&u(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(le,"$1"),i,n>r&&b(t.slice(r,n)),s>n&&b(t=t.slice(n)),s>n&&u(t))}h.push(i)}return f(h)}function y(t,i){var s=i.length>0,o=t.length>0,a=function(n,a,r,l,c){var h,d,u,p=0,f="0",m=n&&[],v=[],b=S,y=n||o&&k.find.TAG("*",c),w=z+=null==b?1:Math.random()||.1,x=y.length;for(c&&(S=a!==M&&a);f!==x&&null!=(h=y[f]);f++){if(o&&h){for(d=0;u=t[d++];)if(u(h,a,r)){l.push(h);break}c&&(z=w)}s&&((h=!u&&h)&&p--,n&&m.push(h))}if(p+=f,s&&f!==p){for(d=0;u=i[d++];)u(m,v,a,r);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(z=w,S=b),m};return s?n(a):a}var w,x,k,_,C,T,D,$,S,E,N,A,M,O,P,I,F,R,L,H="sizzle"+-new Date,j=t.document,z=0,W=0,B=i(),U=i(),q=i(),Y=function(t,e){return t===e&&(N=!0),0},V="undefined",K=1<<31,Q={}.hasOwnProperty,X=[],G=X.pop,J=X.push,Z=X.push,te=X.slice,ee=X.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=se.replace("w","w#"),ae="\\["+ne+"*("+se+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",re=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(re),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ke=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(X=te.call(j.childNodes),j.childNodes),X[j.childNodes.length].nodeType}catch(_e){Z={apply:X.length?function(t,e){J.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:j,n=i.defaultView;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,O=i.documentElement,P=!C(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){A()},!1):n.attachEvent&&n.attachEvent("onunload",function(){A()})),x.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=s(function(t){return O.appendChild(t).id=H,!i.getElementsByName||!i.getElementsByName(H).length}),x.getById?(k.find.ID=function(t,e){if(typeof e.getElementById!==V&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(t){var e=t.replace(xe,ke);return function(t){return t.getAttribute("id")===e}}):(delete k.find.ID,k.filter.ID=function(t){var e=t.replace(xe,ke);return function(t){var i=typeof t.getAttributeNode!==V&&t.getAttributeNode("id");return i&&i.value===e}}),k.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==V?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},k.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==V&&P?e.getElementsByClassName(t):void 0},F=[],I=[],(x.qsa=ve.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||I.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=ve.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&s(function(t){x.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),F.push("!=",re)}),I=I.length&&new RegExp(I.join("|")),F=F.length&&new RegExp(F.join("|")),e=ve.test(O.compareDocumentPosition),L=e||ve.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===j&&L(j,t)?-1:e===i||e.ownerDocument===j&&L(j,e)?1:E?ee.call(E,t)-ee.call(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,s=0,o=t.parentNode,r=e.parentNode,l=[t],c=[e];if(!o||!r)return t===i?-1:e===i?1:o?-1:r?1:E?ee.call(E,t)-ee.call(E,e):0;if(o===r)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===j?-1:c[s]===j?1:0},i):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&A(t),i=i.replace(de,"='$1']"),!(!x.matchesSelector||!P||F&&F.test(i)||I&&I.test(i)))try{var n=R.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&A(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&A(t);var i=k.attrHandle[e.toLowerCase()],n=i&&Q.call(k.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:x.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(N=!x.detectDuplicates,E=!x.sortStable&&t.slice(0),t.sort(Y),N){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return E=null,t},_=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=_(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=_(e);return i},k=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,ke),t[3]=(t[3]||t[4]||t[5]||"").replace(xe,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ue.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,ke).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==V&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var c,h,d,u,p,f,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=r&&e.nodeName.toLowerCase(),b=!l&&!r;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(r?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&b){for(h=g[H]||(g[H]={}),c=h[t]||[],p=c[0]===z&&c[1],u=c[0]===z&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(u=p=0)||f.pop();)if(1===d.nodeType&&++u&&d===e){h[t]=[z,p,u];break}}else if(b&&(c=(e[H]||(e[H]={}))[t])&&c[0]===z)u=c[1];else for(;(d=++p&&d&&d[m]||(u=p=0)||f.pop())&&((r?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++u||(b&&((d[H]||(d[H]={}))[t]=[z,u]),d!==e)););return u-=s,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(t,i){var s,o=k.pseudos[t]||k.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[H]?o(i):o.length>1?(s=[t,t,"",i],k.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),a=s.length;a--;)n=ee.call(t,s[a]),t[n]=!(e[n]=s[a])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=D(t.replace(le,"$1"));return s[H]?n(function(t,e,i,n){for(var o,a=s(t,null,n,[]),r=t.length;r--;)(o=a[r])&&(t[r]=!(e[r]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,ke).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=r(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=l(w);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,T=e.tokenize=function(t,i){var n,s,o,a,r,l,c,h=U[t+" "];if(h)return i?0:h.slice(0);for(r=t,l=[],c=k.preFilter;r;){(!n||(s=ce.exec(r)))&&(s&&(r=r.slice(s[0].length)||r),l.push(o=[])),n=!1,(s=he.exec(r))&&(n=s.shift(),o.push({value:n,type:s[0].replace(le," ")}),r=r.slice(n.length));for(a in k.filter)!(s=fe[a].exec(r))||c[a]&&!(s=c[a](s))||(n=s.shift(),o.push({value:n,type:a,matches:s}),r=r.slice(n.length));
if(!n)break}return i?r.length:r?e.error(t):U(t,l).slice(0)},D=e.compile=function(t,e){var i,n=[],s=[],o=q[t+" "];if(!o){for(e||(e=T(t)),i=e.length;i--;)o=b(e[i]),o[H]?n.push(o):s.push(o);o=q(t,y(s,n)),o.selector=t}return o},$=e.select=function(t,e,i,n){var s,o,a,r,l,c="function"==typeof t&&t,d=!n&&T(t=c.selector||t);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&P&&k.relative[o[1].type]){if(e=(k.find.ID(a.matches[0].replace(xe,ke),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=fe.needsContext.test(t)?0:o.length;s--&&(a=o[s],!k.relative[r=a.type]);)if((l=k.find[r])&&(n=l(a.matches[0].replace(xe,ke),ye.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&u(o),!t)return Z.apply(i,n),i;break}}return(c||D(t,d))(n,e,!P,i,ye.test(t)&&h(e.parentNode)||e),i},x.sortStable=H.split("").sort(Y).join("")===H,x.detectDuplicates=!!N,A(),x.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var he=se.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^.[^:#\[\.,]*$/;se.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?se.find.matchesSelector(n,t)?[n]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},se.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;s>e;e++)if(se.contains(n[e],this))return!0}));for(e=0;s>e;e++)se.find(t,n[e],i);return i=this.pushStack(s>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&he.test(t)?se(t):t||[],!1).length}});var pe,fe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=se.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof se?e[0]:e,se.merge(this,se.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),de.test(i[1])&&se.isPlainObject(e))for(i in e)se.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=fe.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(t);this.length=1,this[0]=n}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(se):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))};ge.prototype=se.fn,pe=se(fe);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!se(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),se.fn.extend({has:function(t){var e,i=se(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(se.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],a=he.test(t)||"string"!=typeof t?se(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?se.unique(o):o)},index:function(t){return t?"string"==typeof t?se.inArray(this[0],se(t)):se.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(se.unique(se.merge(this.get(),se(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,i){return se.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,i){return se.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return se.dir(t,"previousSibling",i)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return se.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(i,n){var s=se.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=se.filter(n,s)),this.length>1&&(be[t]||(s=se.unique(s)),ve.test(t)&&(s=s.reverse())),this.pushStack(s)}});var ye=/\S+/g,we={};se.Callbacks=function(t){t="string"==typeof t?we[t]||o(t):se.extend({},t);var e,i,n,s,a,r,l=[],c=!t.once&&[],h=function(o){for(i=t.memory&&o,n=!0,a=r||0,r=0,s=l.length,e=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&h(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(e){se.each(e,function(e,i){var n=se.type(i);"function"===n?t.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?s=l.length:i&&(r=n,h(i))}return this},remove:function(){return l&&se.each(arguments,function(t,i){for(var n;(n=se.inArray(i,l,n))>-1;)l.splice(n,1),e&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?se.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||d.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(i){se.each(e,function(e,o){var a=se.isFunction(t[e])&&t[e];s[o[1]](function(){var t=a&&a.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,n):n}},s={};return n.pipe=n.then,se.each(e,function(t,o){var a=o[2],r=o[3];n[o[1]]=a.add,r&&a.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=a.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=Q.call(arguments),a=o.length,r=1!==a||t&&se.isFunction(t.promise)?a:0,l=1===r?t:se.Deferred(),c=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?Q.call(arguments):s,n===e?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(a>1)for(e=new Array(a),i=new Array(a),n=new Array(a);a>s;s++)o[s]&&se.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,e)):--r;return r||l.resolveWith(n,o),l.promise()}});var xe;se.fn.ready=function(t){return se.ready.promise().done(t),this},se.extend({isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){if(t===!0?!--se.readyWait:!se.isReady){if(!fe.body)return setTimeout(se.ready);se.isReady=!0,t!==!0&&--se.readyWait>0||(xe.resolveWith(fe,[se]),se.fn.triggerHandler&&(se(fe).triggerHandler("ready"),se(fe).off("ready")))}}}),se.ready.promise=function(e){if(!xe)if(xe=se.Deferred(),"complete"===fe.readyState)setTimeout(se.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1);else{fe.attachEvent("onreadystatechange",r),t.attachEvent("onload",r);var i=!1;try{i=null==t.frameElement&&fe.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!se.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}a(),se.ready()}}()}return xe.promise(e)};var ke,_e="undefined";for(ke in se(ie))break;ie.ownLast="0"!==ke,ie.inlineBlockNeedsLayout=!1,se(function(){var t,e,i,n;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==_e&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),se.acceptData=function(t){var e=se.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?se.cache[t[se.expando]]:t[se.expando],!!t&&!c(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return d(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return d(t,e,!0)}}),se.fn.extend({data:function(t,e){var i,n,s,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(s=se.data(o),1===o.nodeType&&!se._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),l(o,n,s[n])));se._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){se.data(this,t)}):arguments.length>1?this.each(function(){se.data(this,t,e)}):o?l(o,t,se.data(o,t)):void 0},removeData:function(t){return this.each(function(){se.removeData(this,t)})}}),se.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=se._data(t,e),i&&(!n||se.isArray(i)?n=se._data(t,e,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=se.queue(t,e),n=i.length,s=i.shift(),o=se._queueHooks(t,e),a=function(){se.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return se._data(t,i)||se._data(t,i,{empty:se.Callbacks("once memory").add(function(){se._removeData(t,e+"queue"),se._removeData(t,i)})})}}),se.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?se.queue(this[0],t):void 0===e?this:this.each(function(){var i=se.queue(this,t,e);se._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=se.Deferred(),o=this,a=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)i=se._data(o[a],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(e)}});var De=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=["Top","Right","Bottom","Left"],Se=function(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)},Ee=se.access=function(t,e,i,n,s,o,a){var r=0,l=t.length,c=null==i;if("object"===se.type(i)){s=!0;for(r in i)se.access(t,e,r,i[r],!0,o,a)}else if(void 0!==n&&(s=!0,se.isFunction(n)||(a=!0),c&&(a?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(se(t),i)})),e))for(;l>r;r++)e(t[r],i,a?n:n.call(t[r],r,e(t[r],i)));return s?t:c?e.call(t):l?e(t[0],i):o},Ne=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),i=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),ie.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(n){ie.deleteExpando=!1}}}(),function(){var e,i,n=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ie[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ie[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Ae=/^(?:input|select|textarea)$/i,Me=/^key/,Oe=/^(?:mouse|pointer|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Ie=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,e,i,n,s){var o,a,r,l,c,h,d,u,p,f,m,g=se._data(t);if(g){for(i.handler&&(l=i,i=l.handler,s=l.selector),i.guid||(i.guid=se.guid++),(a=g.events)||(a=g.events={}),(h=g.handle)||(h=g.handle=function(t){return typeof se===_e||t&&se.event.triggered===t.type?void 0:se.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(ye)||[""],r=e.length;r--;)o=Ie.exec(e[r])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(c=se.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=se.event.special[p]||{},d=se.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:f.join(".")},l),(u=a[p])||(u=a[p]=[],u.delegateCount=0,c.setup&&c.setup.call(t,n,f,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,d):u.push(d),se.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var o,a,r,l,c,h,d,u,p,f,m,g=se.hasData(t)&&se._data(t);if(g&&(h=g.events)){for(e=(e||"").match(ye)||[""],c=e.length;c--;)if(r=Ie.exec(e[c])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p){for(d=se.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=h[p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=u.length;o--;)a=u[o],!s&&m!==a.origType||i&&i.guid!==a.guid||r&&!r.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(u.splice(o,1),a.selector&&u.delegateCount--,d.remove&&d.remove.call(t,a));l&&!u.length&&(d.teardown&&d.teardown.call(t,f,g.handle)!==!1||se.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)se.event.remove(t,p+e[c],i,n,!0);se.isEmptyObject(h)&&(delete g.handle,se._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,a,r,l,c,h,d,u=[n||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(r=h=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Pe.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,e=e[se.expando]?e:new se.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:se.makeArray(i,[e]),c=se.event.special[p]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!se.isWindow(n)){for(l=c.delegateType||p,Pe.test(l+p)||(r=r.parentNode);r;r=r.parentNode)u.push(r),h=r;h===(n.ownerDocument||fe)&&u.push(h.defaultView||h.parentWindow||t)}for(d=0;(r=u[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||p,o=(se._data(r,"events")||{})[e.type]&&se._data(r,"handle"),o&&o.apply(r,i),o=a&&r[a],o&&o.apply&&se.acceptData(r)&&(e.result=o.apply(r,i),e.result===!1&&e.preventDefault());if(e.type=p,!s&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(u.pop(),i)===!1)&&se.acceptData(n)&&a&&n[p]&&!se.isWindow(n)){h=n[a],h&&(n[a]=null),se.event.triggered=p;try{n[p]()}catch(m){}se.event.triggered=void 0,h&&(n[a]=h)}return e.result}},dispatch:function(t){t=se.event.fix(t);var e,i,n,s,o,a=[],r=Q.call(arguments),l=(se._data(this,"events")||{})[t.type]||[],c=se.event.special[t.type]||{};if(r[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=se.event.handlers.call(this,t,l),e=0;(s=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((se.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,r),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,a=[],r=e.delegateCount,l=t.target;if(r&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(s=[],o=0;r>o;o++)n=e[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?se(i,this).index(l)>=0:se.find(i,this,null,[l]).length),s[i]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return r<e.length&&a.push({elem:this,handlers:e.slice(r)}),a},fix:function(t){if(t[se.expando])return t;var e,i,n,s=t.type,o=t,a=this.fixHooks[s];for(a||(this.fixHooks[s]=a=Oe.test(s)?this.mouseHooks:Me.test(s)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new se.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||fe,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=se.extend(new se.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?se.event.trigger(s,null,e):se.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},se.removeEvent=fe.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===_e&&(t[n]=null),t.detachEvent(n,i))},se.Event=function(t,e){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:p):this.type=t,e&&se.extend(this,e),this.timeStamp=t&&t.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(t,e)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!se.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ie.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:void se.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=se.nodeName(e,"input")||se.nodeName(e,"button")?e.form:void 0;i&&!se._data(i,"submitBubbles")&&(se.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),se._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&se.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return se.nodeName(this,"form")?!1:void se.event.remove(this,"._submit")}}),ie.changeBubbles||(se.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,t,!0)})),!1):void se.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ae.test(e.nodeName)&&!se._data(e,"changeBubbles")&&(se.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||se.event.simulate("change",this.parentNode,t,!0)}),se._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ie.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=se._data(n,e);s||n.addEventListener(t,i,!0),se._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=se._data(n,e)-1;s?se._data(n,e,s):(n.removeEventListener(t,i,!0),se._removeData(n,e))}}}),se.fn.extend({on:function(t,e,i,n,s){var o,a;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(a=n,n=function(t){return se().off(t),a.apply(this,arguments)},n.guid=a.guid||(a.guid=se.guid++)),this.each(function(){se.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,se(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){se.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?se.event.trigger(t,e,i,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Le=new RegExp("<(?:"+Fe+")[\\s/>]","i"),He=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,We=/<tbody/i,Be=/<|&#?\w+;/,Ue=/<(?:script|style|link)/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xe=m(fe),Ge=Xe.appendChild(fe.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,se.extend({clone:function(t,e,i){var n,s,o,a,r,l=se.contains(t.ownerDocument,t);if(ie.html5Clone||se.isXMLDoc(t)||!Le.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Ge.innerHTML=t.outerHTML,Ge.removeChild(o=Ge.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(n=g(o),r=g(t),a=0;null!=(s=r[a]);++a)n[a]&&_(s,n[a]);if(e)if(i)for(r=r||g(t),n=n||g(o),a=0;null!=(s=r[a]);a++)k(s,n[a]);else k(t,o);return n=g(o,"script"),n.length>0&&x(n,!l&&g(t,"script")),n=r=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,a,r,l,c,h,d=t.length,u=m(e),p=[],f=0;d>f;f++)if(o=t[f],o||0===o)if("object"===se.type(o))se.merge(p,o.nodeType?[o]:o);else if(Be.test(o)){for(r=r||u.appendChild(e.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),h=Qe[l]||Qe._default,r.innerHTML=h[1]+o.replace(je,"<$1></$2>")+h[2],s=h[0];s--;)r=r.lastChild;if(!ie.leadingWhitespace&&He.test(o)&&p.push(e.createTextNode(He.exec(o)[0])),!ie.tbody)for(o="table"!==l||We.test(o)?"<table>"!==h[1]||We.test(o)?0:r:r.firstChild,s=o&&o.childNodes.length;s--;)se.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(se.merge(p,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=u.lastChild}else p.push(e.createTextNode(o));for(r&&u.removeChild(r),ie.appendChecked||se.grep(g(p,"input"),v),f=0;o=p[f++];)if((!n||-1===se.inArray(o,n))&&(a=se.contains(o.ownerDocument,o),r=g(u.appendChild(o),"script"),a&&x(r),i))for(s=0;o=r[s++];)Ye.test(o.type||"")&&i.push(o);return r=null,u},cleanData:function(t,e){for(var i,n,s,o,a=0,r=se.expando,l=se.cache,c=ie.deleteExpando,h=se.event.special;null!=(i=t[a]);a++)if((e||se.acceptData(i))&&(s=i[r],o=s&&l[s])){if(o.events)for(n in o.events)h[n]?se.event.remove(i,n):se.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[r]:typeof i.removeAttribute!==_e?i.removeAttribute(r):i[r]=null,K.push(s))}}}),se.fn.extend({text:function(t){return Ee(this,function(t){return void 0===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?se.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||se.cleanData(g(i)),i.parentNode&&(e&&se.contains(i.ownerDocument,i)&&x(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&se.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&se.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return Ee(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Re,""):void 0;if(!("string"!=typeof t||Ue.test(t)||!ie.htmlSerialize&&Le.test(t)||!ie.leadingWhitespace&&He.test(t)||Qe[(ze.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(se.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,se.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=X.apply([],t);var i,n,s,o,a,r,l=0,c=this.length,h=this,d=c-1,u=t[0],p=se.isFunction(u);if(p||c>1&&"string"==typeof u&&!ie.checkClone&&qe.test(u))return this.each(function(i){var n=h.eq(i);p&&(t[0]=u.call(this,i,n.html())),n.domManip(t,e)});if(c&&(r=se.buildFragment(t,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=se.map(g(r,"script"),y),s=o.length;c>l;l++)n=r,l!==d&&(n=se.clone(n,!0,!0),s&&se.merge(o,g(n,"script"))),e.call(this[l],n,l);if(s)for(a=o[o.length-1].ownerDocument,se.map(o,w),l=0;s>l;l++)n=o[l],Ye.test(n.type||"")&&!se._data(n,"globalEval")&&se.contains(a,n)&&(n.src?se._evalUrl&&se._evalUrl(n.src):se.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ke,"")));r=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var i,n=0,s=[],o=se(t),a=o.length-1;a>=n;n++)i=n===a?this:this.clone(!0),se(o[n])[e](i),G.apply(s,i.get());return this.pushStack(s)}});var Je,Ze={};!function(){var t;ie.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=fe.getElementsByTagName("body")[0],i&&i.style?(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==_e&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var ti,ei,ii=/^margin/,ni=new RegExp("^("+De+")(?!px)[a-z%]+$","i"),si=/^(top|right|bottom|left)$/;t.getComputedStyle?(ti=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ei=function(t,e,i){var n,s,o,a,r=t.style;return i=i||ti(t),a=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==a||se.contains(t.ownerDocument,t)||(a=se.style(t,e)),ni.test(a)&&ii.test(e)&&(n=r.width,s=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0===a?a:a+""}):fe.documentElement.currentStyle&&(ti=function(t){return t.currentStyle},ei=function(t,e,i){var n,s,o,a,r=t.style;return i=i||ti(t),a=i?i[e]:void 0,null==a&&r&&r[e]&&(a=r[e]),ni.test(a)&&!si.test(e)&&(n=r.left,s=t.runtimeStyle,o=s&&s.left,o&&(s.left=t.currentStyle.left),r.left="fontSize"===e?"1em":a,a=r.pixelLeft+"px",r.left=n,o&&(s.left=o)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,i,n,s;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,s=e.appendChild(fe.createElement("div")),s.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=e.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===s[0].offsetHeight,r&&(s[0].style.display="",s[1].style.display="none",r=0===s[0].offsetHeight),i.removeChild(n))
}var i,n,s,o,a,r,l;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=i.getElementsByTagName("a")[0],n=s&&s.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,se.extend(ie,{reliableHiddenOffsets:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),se.swap=function(t,e,i,n){var s,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=a[o];return s};var oi=/alpha\([^)]*\)/i,ai=/opacity\s*=\s*([^)]*)/,ri=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+De+")(.*)$","i"),ci=new RegExp("^([+-])=("+De+")","i"),hi={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:"0",fontWeight:"400"},ui=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ei(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,a,r=se.camelCase(e),l=t.style;if(e=se.cssProps[r]||(se.cssProps[r]=$(l,r)),a=se.cssHooks[e]||se.cssHooks[r],void 0===i)return a&&"get"in a&&void 0!==(s=a.get(t,!1,n))?s:l[e];if(o=typeof i,"string"===o&&(s=ci.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(se.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||se.cssNumber[r]||(i+="px"),ie.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(i=a.set(t,i,n)))))try{l[e]=i}catch(c){}}},css:function(t,e,i,n){var s,o,a,r=se.camelCase(e);return e=se.cssProps[r]||(se.cssProps[r]=$(t.style,r)),a=se.cssHooks[e]||se.cssHooks[r],a&&"get"in a&&(o=a.get(t,!0,i)),void 0===o&&(o=ei(t,e,n)),"normal"===o&&e in di&&(o=di[e]),""===i||i?(s=parseFloat(o),i===!0||se.isNumeric(s)?s||0:o):o}}),se.each(["height","width"],function(t,e){se.cssHooks[e]={get:function(t,i,n){return i?ri.test(se.css(t,"display"))&&0===t.offsetWidth?se.swap(t,hi,function(){return A(t,e,n)}):A(t,e,n):void 0},set:function(t,i,n){var s=n&&ti(t);return E(t,i,n?N(t,e,n,ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,s),s):0)}}}),ie.opacity||(se.cssHooks.opacity={get:function(t,e){return ai.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=se.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===se.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,s):o+" "+s)}}),se.cssHooks.marginRight=D(ie.reliableMarginRight,function(t,e){return e?se.swap(t,{display:"inline-block"},ei,[t,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+$e[n]+e]=o[n]||o[n-2]||o[0];return s}},ii.test(t)||(se.cssHooks[t+e].set=E)}),se.fn.extend({css:function(t,e){return Ee(this,function(t,e,i){var n,s,o={},a=0;if(se.isArray(e)){for(n=ti(t),s=e.length;s>a;a++)o[e[a]]=se.css(t,e[a],!1,n);return o}return void 0!==i?se.style(t,e,i):se.css(t,e)},t,e,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Se(this)?se(this).show():se(this).hide()})}}),se.Tween=M,M.prototype={constructor:M,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(se.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.fx=M.prototype.init,se.fx.step={};var pi,fi,mi=/^(?:toggle|show|hide)$/,gi=new RegExp("^(?:([+-])=|)("+De+")([a-z%]*)$","i"),vi=/queueHooks$/,bi=[F],yi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=gi.exec(e),o=s&&s[3]||(se.cssNumber[t]?"":"px"),a=(se.cssNumber[t]||"px"!==o&&+n)&&gi.exec(se.css(i.elem,t)),r=1,l=20;if(a&&a[3]!==o){o=o||a[3],s=s||[],a=+n||1;do r=r||".5",a/=r,se.style(i.elem,t,a+o);while(r!==(r=i.cur()/n)&&1!==r&&--l)}return s&&(a=i.start=+a||+n||0,i.unit=o,i.end=s[1]?a+(s[1]+1)*s[2]:+s[2]),i}]};se.Animation=se.extend(L,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],yi[i]=yi[i]||[],yi[i].unshift(e)},prefilter:function(t,e){e?bi.unshift(t):bi.push(t)}}),se.speed=function(t,e,i){var n=t&&"object"==typeof t?se.extend({},t):{complete:i||!i&&e||se.isFunction(t)&&t,duration:t,easing:i&&e||e&&!se.isFunction(e)&&e};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Se).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=se.isEmptyObject(t),o=se.speed(e,i,n),a=function(){var e=L(this,se.extend({},t),o);(s||se._data(this,"finish"))&&e.stop(!0)};return a.finish=a,s||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=se.timers,a=se._data(this);if(s)a[s]&&a[s].stop&&n(a[s]);else for(s in a)a[s]&&a[s].stop&&vi.test(s)&&n(a[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=se._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=se.timers,a=n?n.length:0;for(i.finish=!0,se.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(t,e){var i=se.fn[e];se.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,s)}}),se.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),se.timers=[],se.fx.tick=function(){var t,e=se.timers,i=0;for(pi=se.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||se.fx.stop(),pi=void 0},se.fx.timer=function(t){se.timers.push(t),t()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){fi||(fi=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(fi),fi=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=fe.createElement("select"),s=i.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==e.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=s.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!s.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value}();var wi=/\r/g;se.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=se.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,se(this).val()):t,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(t){return null==t?"":t+""})),e=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(wi,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(t){var e=se.find.attr(t,"value");return null!=e?e:se.trim(se.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,a=o?null:[],r=o?s+1:n.length,l=0>s?r:o?s:0;r>l;l++)if(i=n[l],!(!i.selected&&l!==s||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&se.nodeName(i.parentNode,"optgroup"))){if(e=se(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,o=se.makeArray(e),a=s.length;a--;)if(n=s[a],se.inArray(se.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(r){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,e){return se.isArray(e)?t.checked=se.inArray(se(t).val(),e)>=0:void 0}},ie.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xi,ki,_i=se.expr.attrHandle,Ci=/^(?:checked|selected)$/i,Ti=ie.getSetAttribute,Di=ie.input;se.fn.extend({attr:function(t,e){return Ee(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})}}),se.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===_e?se.prop(t,e,i):(1===o&&se.isXMLDoc(t)||(e=e.toLowerCase(),n=se.attrHooks[e]||(se.expr.match.bool.test(e)?ki:xi)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=se.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void se.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(ye);if(o&&1===t.nodeType)for(;i=o[s++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)?Di&&Ti||!Ci.test(i)?t[n]=!1:t[se.camelCase("default-"+i)]=t[n]=!1:se.attr(t,i,""),t.removeAttribute(Ti?i:n)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&se.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),ki={set:function(t,e,i){return e===!1?se.removeAttr(t,i):Di&&Ti||!Ci.test(i)?t.setAttribute(!Ti&&se.propFix[i]||i,i):t[se.camelCase("default-"+i)]=t[i]=!0,i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,e){var i=_i[e]||se.find.attr;_i[e]=Di&&Ti||!Ci.test(e)?function(t,e,n){var s,o;return n||(o=_i[e],_i[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,_i[e]=o),s}:function(t,e,i){return i?void 0:t[se.camelCase("default-"+e)]?e.toLowerCase():null}}),Di&&Ti||(se.attrHooks.value={set:function(t,e,i){return se.nodeName(t,"input")?void(t.defaultValue=e):xi&&xi.set(t,e,i)}}),Ti||(xi={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},_i.id=_i.name=_i.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},se.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:xi.set},se.attrHooks.contenteditable={set:function(t,e,i){xi.set(t,""===e?!1:e,i)}},se.each(["width","height"],function(t,e){se.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ie.style||(se.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var $i=/^(?:input|select|textarea|button|object)$/i,Si=/^(?:a|area)$/i;se.fn.extend({prop:function(t,e){return Ee(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return t=se.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!se.isXMLDoc(t),o&&(e=se.propFix[e]||e,s=se.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=se.find.attr(t,"tabindex");return e?parseInt(e,10):$i.test(t.nodeName)||Si.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||se.each(["href","src"],function(t,e){se.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ie.enctype||(se.propFix.enctype="encoding");var Ei=/[\t\r\n\f]/g;se.fn.extend({addClass:function(t){var e,i,n,s,o,a,r=0,l=this.length,c="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(ye)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ei," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=se.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(t){var e,i,n,s,o,a,r=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(ye)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ei," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");a=t?se.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(se.isFunction(t)?function(i){se(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=se(this),o=t.match(ye)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===_e||"boolean"===i)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||t===!1?"":se._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ei," ").indexOf(e)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Ni=se.now(),Ai=/\?/,Mi=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=se.trim(e+"");return s&&!se.trim(s.replace(Mi,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),i};var Oi,Pi,Ii=/#.*$/,Fi=/([?&])_=[^&]*/,Ri=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Li=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hi=/^(?:GET|HEAD)$/,ji=/^\/\//,zi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wi={},Bi={},Ui="*/".concat("*");try{Pi=location.href}catch(qi){Pi=fe.createElement("a"),Pi.href="",Pi=Pi.href}Oi=zi.exec(Pi.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pi,type:"GET",isLocal:Li.test(Oi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?z(z(t,se.ajaxSettings),e):z(se.ajaxSettings,t)},ajaxPrefilter:H(Wi),ajaxTransport:H(Bi),ajax:function(t,e){function i(t,e,i,n){var s,h,v,b,w,k=e;2!==y&&(y=2,r&&clearTimeout(r),c=void 0,a=n||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(b=W(d,x,i)),b=B(d,b,x,s),s?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(se.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(se.etag[o]=w)),204===t||"HEAD"===d.type?k="nocontent":304===t?k="notmodified":(k=b.state,h=b.data,v=b.error,s=!v)):(v=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(e||k)+"",s?f.resolveWith(u,[h,k,x]):f.rejectWith(u,[x,k,v]),x.statusCode(g),g=void 0,l&&p.trigger(s?"ajaxSuccess":"ajaxError",[x,d,s?h:v]),m.fireWith(u,[x,k]),l&&(p.trigger("ajaxComplete",[x,d]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,a,r,l,c,h,d=se.ajaxSetup({},e),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?se(u):se.event,f=se.Deferred(),m=se.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!h)for(h={};e=Ri.exec(a);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,v[t]=e),this},overrideMimeType:function(t){return y||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),i(0,e),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||Pi)+"").replace(Ii,"").replace(ji,Oi[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=se.trim(d.dataType||"*").toLowerCase().match(ye)||[""],null==d.crossDomain&&(n=zi.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Oi[1]&&n[2]===Oi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Oi[3]||("http:"===Oi[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=se.param(d.data,d.traditional)),j(Wi,d,e,x),2===y)return x;l=d.global,l&&0===se.active++&&se.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Hi.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Ai.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Fi.test(o)?o.replace(Fi,"$1_="+Ni++):o+(Ai.test(o)?"&":"?")+"_="+Ni++)),d.ifModified&&(se.lastModified[o]&&x.setRequestHeader("If-Modified-Since",se.lastModified[o]),se.etag[o]&&x.setRequestHeader("If-None-Match",se.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ui+"; q=0.01":""):d.accepts["*"]);for(s in d.headers)x.setRequestHeader(s,d.headers[s]);if(d.beforeSend&&(d.beforeSend.call(u,x,d)===!1||2===y))return x.abort();w="abort";for(s in{success:1,error:1,complete:1})x[s](d[s]);if(c=j(Bi,d,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,c.send(v,i)}catch(k){if(!(2>y))throw k;i(-1,k)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return se.get(t,e,i,"json")},getScript:function(t,e){return se.get(t,void 0,e,"script")}}),se.each(["get","post"],function(t,e){se[e]=function(t,i,n,s){return se.isFunction(i)&&(s=s||n,n=i,i=void 0),se.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se._evalUrl=function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(t){if(se.isFunction(t))return this.each(function(e){se(this).wrapAll(t.call(this,e))});if(this[0]){var e=se(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(se.isFunction(t)?function(e){se(this).wrapInner(t.call(this,e))}:function(){var e=se(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(i){se(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||se.css(t,"display"))},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)};var Yi=/%20/g,Vi=/\[\]$/,Ki=/\r?\n/g,Qi=/^(?:submit|button|image|reset|file)$/i,Xi=/^(?:input|select|textarea|keygen)/i;se.param=function(t,e){var i,n=[],s=function(t,e){e=se.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){s(this.name,this.value)});else for(i in t)U(i,t[i],e,s);return n.join("&").replace(Yi,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&Xi.test(this.nodeName)&&!Qi.test(t)&&(this.checked||!Ne.test(t))}).map(function(t,e){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(t){return{name:e.name,value:t.replace(Ki,"\r\n")}}):{name:e.name,value:i.replace(Ki,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||Y()}:q;var Gi=0,Ji={},Zi=se.ajaxSettings.xhr();t.ActiveXObject&&se(t).on("unload",function(){for(var t in Ji)Ji[t](void 0,!0)}),ie.cors=!!Zi&&"withCredentials"in Zi,Zi=ie.ajax=!!Zi,Zi&&se.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(i,n){var s,o=t.xhr(),a=++Gi;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var r,l,c;if(e&&(s||4===o.readyState))if(delete Ji[a],e=void 0,o.onreadystatechange=se.noop,s)4!==o.readyState&&o.abort();else{c={},r=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(h){l=""}r||!t.isLocal||t.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&n(r,l,c,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Ji[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=fe.head||se("head")[0]||fe.documentElement;return{send:function(n,s){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||se.expando+"_"+Ni++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,a,r=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return r||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(en,"$1"+s):e.jsonp!==!1&&(e.url+=(Ai.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return a||se.error(s+" was not called"),a[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){a=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,tn.push(s)),a&&se.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),se.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||fe;var n=de.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=se.buildFragment([t],e,s),s&&s.length&&se(s).remove(),se.merge([],n.childNodes))};var nn=se.fn.load;se.fn.load=function(t,e,i){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var n,s,o,a=this,r=t.indexOf(" ");return r>=0&&(n=se.trim(t.slice(r,t.length)),t=t.slice(0,r)),se.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&se.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,a.html(n?se("<div>").append(se.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length};var sn=t.document.documentElement;se.offset={setOffset:function(t,e,i){var n,s,o,a,r,l,c,h=se.css(t,"position"),d=se(t),u={};"static"===h&&(t.style.position="relative"),r=d.offset(),o=se.css(t,"top"),l=se.css(t,"left"),c=("absolute"===h||"fixed"===h)&&se.inArray("auto",[o,l])>-1,c?(n=d.position(),a=n.top,s=n.left):(a=parseFloat(o)||0,s=parseFloat(l)||0),se.isFunction(e)&&(e=e.call(t,i,r)),null!=e.top&&(u.top=e.top-r.top+a),null!=e.left&&(u.left=e.left-r.left+s),"using"in e?e.using.call(t,u):d.css(u)}},se.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){se.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return e=o.documentElement,se.contains(e,s)?(typeof s.getBoundingClientRect!==_e&&(n=s.getBoundingClientRect()),i=V(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===se.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(i=t.offset()),i.top+=se.css(t[0],"borderTopWidth",!0),i.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-se.css(n,"marginTop",!0),left:e.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||sn;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||sn})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);se.fn[t]=function(n){return Ee(this,function(t,n,s){var o=V(t);return void 0===s?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?se(o).scrollLeft():s,i?s:se(o).scrollTop()):t[n]=s)},t,n,arguments.length,null)}}),se.each(["top","left"],function(t,e){se.cssHooks[e]=D(ie.pixelPosition,function(t,i){return i?(i=ei(t,e),ni.test(i)?se(t).position()[e]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(t,e){se.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){se.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||s===!0?"margin":"border");return Ee(this,function(e,i,n){var s;return se.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?se.css(e,i,a):se.style(e,i,n,a)},e,o?n:void 0,o,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var on=t.jQuery,an=t.$;return se.noConflict=function(e){return t.$===se&&(t.$=an),e&&t.jQuery===se&&(t.jQuery=on),se},typeof e===_e&&(t.jQuery=t.$=se),se}),function(){var t,e;t=window.jQuery||("function"==typeof require?require("jquery"):void 0),e=t(document),t.turbo={version:"2.0.2",isReady:!1,use:function(t,i){return e.off(".turbo").on(""+t+".turbo",this.onLoad).on(""+i+".turbo",this.onFetch)},addCallback:function(i){return t.turbo.isReady?i(t):e.on("turbo:ready",function(){return i(t)})},onLoad:function(){return t.turbo.isReady=!0,e.trigger("turbo:ready")},onFetch:function(){return t.turbo.isReady=!1},register:function(){return t(this.onLoad),t.fn.ready=this.addCallback}},t.turbo.register(),t.turbo.use("page:load","page:fetch")}.call(this),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote], button[data-confirm]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");
i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var s,o,a,r,l,c,h,d;if(i.fire(n,"ajax:before")){if(r=n.data("cross-domain"),l=r===e?null:r,c=n.data("with-credentials")||null,h=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),o=n.attr("action"),a=n.serializeArray();var u=n.data("ujs:submit-button");u&&(a.push(u),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(s=n.data("method"),o=i.href(n),a=n.data("params")||null);return d={type:s||"GET",data:a,dataType:h,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),o&&(d.url=o),i.ajax(d)}return!1},handleMethod:function(n){var s=i.href(n),o=n.data("method"),a=n.attr("target"),r=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+s+'"></form>'),h='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&r!==e&&(h+='<input name="'+l+'" value="'+r+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(h).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),s=!1;return n?(i.fire(t,"confirm")&&(s=i.confirm(n),e=i.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,o,a=t(),r=i||"input,textarea",l=e.find(r);return l.each(function(){if(s=t(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!o==!n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;a=a.add(s)}}),a.length?a:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=t(this),o=s.data("method"),a=s.data("params"),r=n.metaKey||n.ctrlKey;if(!i.allowAction(s))return i.stopEverything(n);if(!r&&s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==e){if(r&&(!o||"GET"===o)&&!a)return!0;var l=i.handleRemote(s);return l===!1?i.enableElement(s):l.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var s=i.handleRemote(n);return s===!1?i.enableFormElement(n):s.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s,o,a=t(this),r=a.data("remote")!==e;if(!i.allowAction(a))return i.stopEverything(n);if(a.attr("novalidate")==e&&(s=i.blankInputs(a,i.requiredInputSelector),s&&i.fire(a,"ajax:aborted:required",[s])))return i.stopEverything(n);if(r){if(o=i.nonBlankInputs(a,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(a)},13);var l=i.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){i.enableFormElements(a)},13),l}return i.handleRemote(a),!1}setTimeout(function(){i.disableFormElements(a)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),o=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),function(t){var e={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:!0,tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",prePopulate:null,processPrePopulate:!1,idPrefix:"token-input-",resultsFormatter:function(t){return"<li>"+t[this.propertyToSearch]+"</li>"},tokenFormatter:function(t){return"<li><p>"+t[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null},i={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"},n={BEFORE:0,AFTER:1,END:2},s={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188},o={init:function(i,n){var s=t.extend({},e,n||{});return this.each(function(){t(this).data("tokenInputObject",new t.TokenList(this,i,s))})},clear:function(){return this.data("tokenInputObject").clear(),this},add:function(t){return this.data("tokenInputObject").add(t),this},remove:function(t){return this.data("tokenInputObject").remove(t),this},get:function(){return this.data("tokenInputObject").getTokens()}};t.fn.tokenInput=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):o.init.apply(this,arguments)},t.TokenList=function(e,o,a){function r(){return null!==a.tokenLimit&&M>=a.tokenLimit?(P.hide(),void g()):void 0}function l(){if(N!==(N=P.val())){var t=N.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");W.html(t),P.width(W.width()+30)}}function c(e){var i=a.tokenFormatter(e);i=t(i).addClass(a.classes.token).insertBefore(j),t("<span>"+a.deleteText+"</span>").addClass(a.classes.tokenDelete).appendTo(i).click(function(){return f(t(this).parent()),I.change(),!1});var n={id:e.id};return n[a.propertyToSearch]=e[a.propertyToSearch],t.data(i.get(0),"tokeninput",e),A=A.slice(0,R).concat([n]).concat(A.slice(R)),R++,m(A,I),M+=1,null!==a.tokenLimit&&M>=a.tokenLimit&&(P.hide(),g()),i}function h(e){var i=a.onAdd;if(M>0&&a.preventDuplicates){var n=null;if(H.children().each(function(){var i=t(this),s=t.data(i.get(0),"tokeninput");return s&&s.id===e.id?(n=i,!1):void 0}),n)return d(n),j.insertAfter(n),void P.focus()}(null==a.tokenLimit||M<a.tokenLimit)&&(c(e),r()),P.val(""),g(),t.isFunction(i)&&i.call(I,e)}function d(t){t.addClass(a.classes.selectedToken),F=t.get(0),P.val(""),g()}function u(t,e){t.removeClass(a.classes.selectedToken),F=null,e===n.BEFORE?(j.insertBefore(t),R--):e===n.AFTER?(j.insertAfter(t),R++):(j.appendTo(H),R=M),P.focus()}function p(e){var i=F;F&&u(t(F),n.END),i===e.get(0)?u(e,n.END):d(e)}function f(e){var i=t.data(e.get(0),"tokeninput"),n=a.onDelete,s=e.prevAll().length;s>R&&s--,e.remove(),F=null,P.focus(),A=A.slice(0,s).concat(A.slice(s+1)),R>s&&R--,m(A,I),M-=1,null!==a.tokenLimit&&P.show().val("").focus(),t.isFunction(n)&&n.call(I,i)}function m(e,i){var n=t.map(e,function(t){return t[a.tokenValue]});i.val(n.join(a.tokenDelimiter))}function g(){z.hide().empty(),L=null}function v(){z.css({position:"absolute",top:t(H).offset().top+t(H).outerHeight(),left:t(H).offset().left,zindex:999}).show()}function b(){a.searchingText&&(z.html("<p>"+a.searchingText+"</p>"),v())}function y(){a.hintText&&(z.html("<p>"+a.hintText+"</p>"),v())}function w(t,e){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")}function x(t,e,i){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e+")(?![^<>]*>)(?![^&;]+;)","g"),w(e,i))}function k(e,i){if(i&&i.length){z.empty();var n=t("<ul>").appendTo(z).mouseover(function(e){_(t(e.target).closest("li"))}).mousedown(function(e){return h(t(e.target).closest("li").data("tokeninput")),I.change(),!1}).hide();t.each(i,function(i,s){var o=a.resultsFormatter(s);o=x(o,s[a.propertyToSearch],e),o=t(o).appendTo(n),o.addClass(i%2?a.classes.dropdownItem:a.classes.dropdownItem2),0===i&&_(o),t.data(o.get(0),"tokeninput",s)}),v(),a.animateDropdown?n.slideDown("fast"):n.show()}else a.noResultsText&&(z.html("<p>"+a.noResultsText+"</p>"),v())}function _(e){e&&(L&&C(t(L)),e.addClass(a.classes.selectedDropdownItem),L=e.get(0))}function C(t){t.removeClass(a.classes.selectedDropdownItem),L=null}function T(){var e=P.val().toLowerCase();e&&e.length&&(F&&u(t(F),n.AFTER),e.length>=a.minChars?(b(),clearTimeout(E),E=setTimeout(function(){D(e)},a.searchDelay)):g())}function D(e){var i=e+$(),n=O.get(i);if(n)k(e,n);else if(a.url){var s=$(),o={};if(o.data={},s.indexOf("?")>-1){var r=s.split("?");o.url=r[0];var l=r[1].split("&");t.each(l,function(t,e){var i=e.split("=");o.data[i[0]]=i[1]})}else o.url=s;o.data[a.queryParam]=e,o.type=a.method,o.dataType=a.contentType,a.crossDomain&&(o.dataType="jsonp"),o.success=function(n){t.isFunction(a.onResult)&&(n=a.onResult.call(I,n)),O.add(i,a.jsonContainer?n[a.jsonContainer]:n),P.val().toLowerCase()===e&&k(e,a.jsonContainer?n[a.jsonContainer]:n)},t.ajax(o)}else if(a.local_data){var c=t.grep(a.local_data,function(t){return t[a.propertyToSearch].toLowerCase().indexOf(e.toLowerCase())>-1});t.isFunction(a.onResult)&&(c=a.onResult.call(I,c)),O.add(i,c),k(e,c)}}function $(){var t=a.url;return"function"==typeof a.url&&(t=a.url.call()),t}if("string"===t.type(o)||"function"===t.type(o)){a.url=o;var S=$();void 0===a.crossDomain&&(a.crossDomain=-1===S.indexOf("://")?!1:location.href.split(/\/+/g)[1]!==S.split(/\/+/g)[1])}else"object"==typeof o&&(a.local_data=o);a.classes?a.classes=t.extend({},i,a.classes):a.theme?(a.classes={},t.each(i,function(t,e){a.classes[t]=e+"-"+a.theme})):a.classes=i;var E,N,A=[],M=0,O=new t.TokenList.Cache,P=t('<input type="text"  autocomplete="off">').css({outline:"none"}).attr("id",a.idPrefix+e.id).focus(function(){(null===a.tokenLimit||a.tokenLimit!==M)&&y()}).blur(function(){g(),t(this).val("")}).bind("keyup keydown blur update",l).keydown(function(e){var i,o;switch(e.keyCode){case s.LEFT:case s.RIGHT:case s.UP:case s.DOWN:if(t(this).val()){var a=null;return a=e.keyCode===s.DOWN||e.keyCode===s.RIGHT?t(L).next():t(L).prev(),a.length&&_(a),!1}i=j.prev(),o=j.next(),i.length&&i.get(0)===F||o.length&&o.get(0)===F?e.keyCode===s.LEFT||e.keyCode===s.UP?u(t(F),n.BEFORE):u(t(F),n.AFTER):e.keyCode!==s.LEFT&&e.keyCode!==s.UP||!i.length?e.keyCode!==s.RIGHT&&e.keyCode!==s.DOWN||!o.length||d(t(o.get(0))):d(t(i.get(0)));break;case s.BACKSPACE:if(i=j.prev(),!t(this).val().length)return F?(f(t(F)),I.change()):i.length&&d(t(i.get(0))),!1;1===t(this).val().length?g():setTimeout(function(){T()},5);break;case s.TAB:case s.ENTER:case s.NUMPAD_ENTER:case s.COMMA:if(L)return h(t(L).data("tokeninput")),I.change(),!1;break;case s.ESCAPE:return g(),!0;default:String.fromCharCode(e.which)&&setTimeout(function(){T()},5)}}),I=t(e).hide().val("").focus(function(){P.focus()}).blur(function(){P.blur()}),F=null,R=0,L=null,H=t("<ul />").addClass(a.classes.tokenList).click(function(e){var i=t(e.target).closest("li");i&&i.get(0)&&t.data(i.get(0),"tokeninput")?p(i):(F&&u(t(F),n.END),P.focus())}).mouseover(function(e){var i=t(e.target).closest("li");i&&F!==this&&i.addClass(a.classes.highlightedToken)}).mouseout(function(e){var i=t(e.target).closest("li");i&&F!==this&&i.removeClass(a.classes.highlightedToken)}).insertBefore(I),j=t("<li />").addClass(a.classes.inputToken).appendTo(H).append(P),z=t("<div>").addClass(a.classes.dropdown).appendTo("body").hide(),W=t("<tester/>").insertAfter(P).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:P.css("fontSize"),fontFamily:P.css("fontFamily"),fontWeight:P.css("fontWeight"),letterSpacing:P.css("letterSpacing"),whiteSpace:"nowrap"});I.val("");var B=a.prePopulate||I.data("pre");a.processPrePopulate&&t.isFunction(a.onResult)&&(B=a.onResult.call(I,B)),B&&B.length&&t.each(B,function(t,e){c(e),r()}),t.isFunction(a.onReady)&&a.onReady.call(),this.clear=function(){H.children("li").each(function(){0===t(this).children("input").length&&f(t(this))})},this.add=function(t){h(t)},this.remove=function(e){H.children("li").each(function(){if(0===t(this).children("input").length){var i=t(this).data("tokeninput"),n=!0;for(var s in e)if(e[s]!==i[s]){n=!1;break}n&&f(t(this))}})},this.getTokens=function(){return A}},t.TokenList.Cache=function(e){var i=t.extend({max_size:500},e),n={},s=0,o=function(){n={},s=0};this.add=function(t,e){s>i.max_size&&o(),n[t]||(s+=1),n[t]=e},this.get=function(t){return n[t]}}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var s,o,a,r=e.nodeName.toLowerCase();return"area"===r?(s=e.parentNode,o=s.name,e.href&&o&&"map"===s.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(){var e=this.css("position"),i="absolute"===e,n=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&n.length?n:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&e(i,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=0,i=Array.prototype.slice;return t.cleanData=function(e){return function(i){for(var n,s=0;null!=(n=i[s]);s++)try{t(n).triggerHandler("remove")}catch(o){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,a,r,l={},c=e.split(".")[0];return e=e.split(".")[1],s=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[c]=t[c]||{},o=t[c][e],a=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},l,{constructor:a,namespace:c,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,s,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(n in o[a])s=o[a][n],o[a].hasOwnProperty(n)&&void 0!==s&&(e[n]=t.isPlainObject(s)?t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return o=!a&&r.length?t.widget.extend.apply(null,[o].concat(r)):o,this.each(a?function(){var i,n=t.data(this,s);return"instance"===o?(l=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new n(o,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},n=e.split("."),e=n.shift(),n.length){for(s=a[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,h=l[2];h?s.delegate(h,c,r):i.bind(c,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}}),t.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(t){var e,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",s=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},o=function(e){var i=e.name,n=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?t(n).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),s};return t.widget("ui.button",{version:"1.11.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,s),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,a=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(l)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled)return!1;t(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var e=n.element[0];o(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,void n.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?o(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(n),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,o=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(o?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.11.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),t.ui.button}),function(t){"function"==typeof define&&define.amd?define(["jquery","./widget"],t):t(jQuery)}(function(t){var e=!1;return t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)
},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):e.which?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),e=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.11.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.document[0],n=this.options;try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(s){}return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this._removeHandleClassName(),t(this.options.handle||this.element).addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.element.find(".ui-draggable-handle").addBack().removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,o=this.document[0];return this.relative_container=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),n=i[0],void(n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i,n){var s=this;t.each(n.sortables,function(){var o=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParent[0]!==i.document[0]&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(e,i,n){var s=n.options,o=!1,a=n.document[0];n.scrollParent[0]!==a&&"HTML"!==n.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,o,a,r,l,c,h,d,u,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,y=b+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left,c=l+n.snapElements[u].width,h=n.snapElements[u].top,d=h+n.snapElements[u].height,l-m>v||g>c+m||h-m>y||b>d+m||!t.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(h-y)<=m,o=Math.abs(d-b)<=m,a=Math.abs(l-v)<=m,r=Math.abs(c-g)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top-n.margins.top),o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top-n.margins.top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left-n.margins.left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left-n.margins.left)),p=s||o||a||r,"outer"!==f.snapMode&&(s=Math.abs(h-b)<=m,o=Math.abs(d-y)<=m,a=Math.abs(l-g)<=m,r=Math.abs(c-v)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top-n.margins.top),o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top-n.margins.top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left-n.margins.left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[u].snapping&&(s||o||a||r||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=s||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,o=n.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(s=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){return function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,o,a=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),e=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),s=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(s){if(!s||!s.of)return f.apply(this,arguments);s=t.extend({},s);var p,m,g,v,b,y,w=t(s.of),x=t.position.getWithinInfo(s.within),k=t.position.getScrollInfo(x),_=(s.collision||"flip").split(" "),C={};return y=n(w),w[0].preventDefault&&(s.at="left top"),m=y.width,g=y.height,v=y.offset,b=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(s[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=d.exec(i[0]),e=d.exec(i[1]),C[this]=[t?t[0]:0,e?e[0]:0],s[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===s.at[0]?b.left+=m:"center"===s.at[0]&&(b.left+=m/2),"bottom"===s.at[1]?b.top+=g:"center"===s.at[1]&&(b.top+=g/2),p=e(C.at,m,g),b.left+=p[0],b.top+=p[1],this.each(function(){var n,c,h=t(this),d=h.outerWidth(),u=h.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),T=d+f+i(this,"marginRight")+k.width,D=u+y+i(this,"marginBottom")+k.height,$=t.extend({},b),S=e(C.my,h.outerWidth(),h.outerHeight());"right"===s.my[0]?$.left-=d:"center"===s.my[0]&&($.left-=d/2),"bottom"===s.my[1]?$.top-=u:"center"===s.my[1]&&($.top-=u/2),$.left+=S[0],$.top+=S[1],o||($.left=l($.left),$.top=l($.top)),n={marginLeft:f,marginTop:y},t.each(["left","top"],function(e,i){t.ui.position[_[e]]&&t.ui.position[_[e]][i]($,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:u,collisionPosition:n,collisionWidth:T,collisionHeight:D,offset:[p[0]+S[0],p[1]+S[1]],my:s.my,at:s.at,within:x,elem:h})}),s.using&&(c=function(t){var e=v.left-$.left,i=e+m-d,n=v.top-$.top,o=n+g-u,l={target:{element:w,left:v.left,top:v.top,width:m,height:g},element:{element:h,left:$.left,top:$.top,width:d,height:u},horizontal:0>i?"left":e>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};d>m&&r(e+i)<m&&(l.horizontal="center"),u>g&&r(n+o)<g&&(l.vertical="middle"),l.important=a(r(e),r(i))>a(r(n),r(o))?"horizontal":"vertical",s.using.call(this,t,l)}),h.offset(t.extend($,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=t.left-e.collisionPosition.marginLeft,l=s-r,c=r+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&0>=c?(i=t.left+l+e.collisionWidth-o-s,t.left+=l-i):t.left=c>0&&0>=l?s:l>c?s+o-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=a(t.left-r,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,l=s-r,c=r+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&0>=c?(i=t.top+l+e.collisionHeight-o-s,t.top+=l-i):t.top=c>0&&0>=l?s:l>c?s+o-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=t.left-e.collisionPosition.marginLeft,h=c-l,d=c+e.collisionWidth-a-l,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(i=t.left+u+p+f+e.collisionWidth-a-o,(0>i||i<r(h))&&(t.left+=u+p+f)):d>0&&(n=t.left-e.collisionPosition.marginLeft+u+p+f-l,(n>0||r(n)<d)&&(t.left+=u+p+f))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=t.top-e.collisionPosition.marginTop,h=c-l,d=c+e.collisionHeight-a-l,u="top"===e.my[1],p=u?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>h?(n=t.top+p+f+m+e.collisionHeight-a-o,t.top+p+f+m>h&&(0>n||n<r(h))&&(t.top+=p+f+m)):d>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>d&&(i>0||r(i)<d)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,a,r=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in n)e.style[a]=n[a];e.appendChild(l),i=r||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",s=t(l).offset().left,o=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(),t.ui.position}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.11.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i,n,s,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),o="ui-resizable-"+n,s=t("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:r.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:i,top:n},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n=this.helper,s={},o=this.originalMousePosition,a=this.axis,r=e.pageX-o.left||0,l=e.pageY-o.top||0,c=this._change[a];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},c?(i=c.apply(this,[e,r,l]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==this.prevPosition.top&&(s.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(s.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(s.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1):!1
},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,a,r,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:h.sizeDiff.height,o=n?0:h.sizeDiff.width,a={width:h.helper.width()-o,height:h.helper.height()-s},r=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(t.extend(a,{top:l,left:r})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,n,s,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),i<o.maxWidth&&(o.maxWidth=i),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&c&&(t.left=r-e.minWidth),n&&c&&(t.left=r-e.maxWidth),a&&h&&(t.top=l-e.minHeight),s&&h&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,s,o=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,o,a,r,l=t(this).resizable("instance"),c=l.options,h=l.element,d=c.containment,u=d instanceof t?d.get(0):/parent/.test(d)?h.parent().get(0):d;u&&(l.containerElement=t(u),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(u),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(u,"left")?u.scrollWidth:o,r=l._hasScroll(u)?u.scrollHeight:s,l.parentData={element:u,left:n.left,top:n.top,width:a,height:r}))},resize:function(e,i){var n,s,o,a,r=t(this).resizable("instance"),l=r.options,c=r.containerOffset,h=r.position,d=r._aspectRatio||e.shiftKey,u={top:0,left:0},p=r.containerElement,f=!0;p[0]!==document&&/static/.test(p.css("position"))&&(u=c),h.left<(r._helper?c.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-c.left:r.position.left-u.left),d&&(r.size.height=r.size.width/r.aspectRatio,f=!1),r.position.left=l.helper?c.left:0),h.top<(r._helper?c.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-c.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio,f=!1),r.position.top=r._helper?c.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,n=Math.abs((r._helper?r.offset.left-u.left:r.offset.left-c.left)+r.sizeDiff.width),s=Math.abs((r._helper?r.offset.top-u.top:r.offset.top-c.top)+r.sizeDiff.height),o=r.containerElement.get(0)===r.element.parent().get(0),a=/relative|absolute/.test(r.containerElement.css("position")),o&&a&&(n-=Math.abs(r.parentData.left)),n+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-n,d&&(r.size.height=r.size.width/r.aspectRatio,f=!1)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,d&&(r.size.width=r.size.height*r.aspectRatio,f=!1)),f||(r.position.left=i.prevPosition.left,r.position.top=i.prevPosition.top,r.size.width=i.prevSize.width,r.size.height=i.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,c=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,o=n.originalSize,a=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0},l=function(e,n){t(e).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},a=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):t.each(s.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size,s=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,h=Math.round((n.width-s.width)/l)*l,d=Math.round((n.height-s.height)/c)*c,u=s.width+h,p=s.height+d,f=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(u+=l),v&&(p+=c),f&&(u-=l),m&&(p-=c),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=p,e.position.top=o.top-d):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=p,e.position.left=o.left-h):(p-c>0?(e.size.height=p,e.position.top=o.top-d):(e.size.height=c,e.position.top=o.top+s.height-c),u-l>0?(e.size.width=u,e.position.left=o.left-h):(e.size.width=l,e.position.left=o.left+s.width-l))}}),t.ui.resizable}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],t):t(jQuery)}(function(t){return t.widget("ui.dialog",{version:"1.11.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",e)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&t(i).blur()}catch(s){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,s);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){s.focus()}),e.preventDefault()):(this._delay(function(){n.focus()}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var s,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(e.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(r>=0?"+":"")+r,of:i.window},t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),a="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:a,start:function(n,s){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(s))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(s,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),l=a.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(l>=0?"+":"")+l,of:i.window},t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._untrackInstance(),this._trackingInstances().unshift(this),this._focusedElement=t(e.target)}})},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,s={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(s[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var i,n,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=s.is(":data(ui-draggable)"),i&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(n=s.is(":data(ui-resizable)"),n&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(t){function e(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function s(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.11.0"}});var o;return t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;n=e.nodeName.toLowerCase(),s="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),s),o.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,a){var r,l,c,h,d,u=this._dialogInst;return u||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),u=this._dialogInst=this._newInst(this._dialogInput,!1),u.settings={},t.data(this._dialogInput[0],"datepicker",u)),s(u.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(u,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+h,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var o,a,r,l,c=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):c?"all"===i?t.extend({},c.settings):this._get(c,i):null:(o=i||{},"string"==typeof i&&(o={},o[i]=n),void(c&&(this._curInst===c&&this._hideDatepicker(),a=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,o),null!==r&&void 0!==o.dateFormat&&void 0===o.minDate&&(c.settings.minDate=this._formatDate(c,r)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),c),this._autoSize(c),this._setDate(c,a),this._updateAlternate(c),this._updateDatepicker(c))))
},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),s[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),i=t.datepicker._get(o,"onSelect"),i?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);return t.datepicker._get(s,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(i){if(i=i.target||i,"input"!==i.nodeName.toLowerCase()&&(i=t("input",i.parentNode)[0]),!t.datepicker._isDisabledDatepicker(i)&&t.datepicker._lastInput!==i){var n,o,a,r,l,c,h;n=t.datepicker._getInst(i),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),o=t.datepicker._get(n,"beforeShow"),a=o?o.apply(i,[i,n]):{},a!==!1&&(s(n.settings,a),n.lastVal=null,t.datepicker._lastInput=i,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(i.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(i),t.datepicker._pos[1]+=i.offsetHeight),r=!1,t(i).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),l=t.datepicker._checkOffset(n,l,r),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(c=t.datepicker._get(n,"showAnim"),h=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",e(t(i))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[c]?n.dpDiv.show(c,t.datepicker._get(n,"showOptions"),h):n.dpDiv[c||"show"](c?h:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a");var i,n=this._getNumberOfMonths(e),s=n[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",a*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-a:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,a=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var s,o,a,r,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,y=!1,w=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},x=function(t){var e=w(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=i.substring(l).match(s);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(e,n,s){var o=-1,a=t.map(w(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=e[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},_=function(){if(i.charAt(l)!==e.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<e.length;s++)if(y)"'"!==e.charAt(s)||w("'")?_():y=!1;else switch(e.charAt(s)){case"d":v=x("d");break;case"D":k("D",d,u);break;case"o":b=x("o");break;case"m":g=x("m");break;case"M":g=k("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":w("'")?_():y=!0;break;default:_()}if(l<i.length&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h>=m?0:-100)),b>-1)for(g=1,v=b;;){if(o=this._getDaysInMonth(m,g-1),o>=v)break;g++,v-=o}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},h=function(t,e,i,n){return l(t)?n[e]:i[e]},d="",u=!1;if(e)for(n=0;n<t.length;n++)if(u)"'"!==t.charAt(n)||l("'")?d+=t.charAt(n):u=!1;else switch(t.charAt(n)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=h("D",e.getDay(),s,o);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=h("M",e.getMonth(),a,r);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":u=!0;break;default:d+=t.charAt(n)}return d},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,a=this._getFormatConfig(t);try{o=this.parseDate(i,n,a)||s}catch(r){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=s.getFullYear(),a=s.getMonth(),r=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":r+=parseInt(c[1],10);break;case"w":case"W":r+=7*parseInt(c[1],10);break;case"m":case"M":a+=parseInt(c[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(c[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}c=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"===a.toString()?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),s===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,a,r,l,c,h,d,u,p,f,m,g,v,b,y,w,x,k,_,C,T,D,$,S,E,N,A,M,O,P,I,F,R,L,H,j=new Date,z=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),W=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),U=this._get(t,"hideIfNoPrevNext"),q=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),Q=1!==Y[0]||1!==Y[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-K,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=q?this.formatDate(s,this._daylightSavingAdjust(new Date(te,Z+K,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?X:z,a=q?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(W?"":l)+"</div>":"",h=parseInt(this._get(t,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(t,"showWeek"),u=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),w="",k=0;k<Y[0];k++){for(_="",this.maxRows=4,C=0;C<Y[1];C++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),D=" ui-corner-all",$="",Q){if($+="<div class='ui-datepicker-group",Y[1]>1)switch(C){case 0:$+=" ui-datepicker-group-first",D=" ui-corner-"+(W?"right":"left");break;case Y[1]-1:$+=" ui-datepicker-group-last",D=" ui-corner-"+(W?"left":"right");break;default:$+=" ui-datepicker-group-middle",D=""}$+="'>"}for($+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===k?W?o:n:"")+(/all|right/.test(D)&&0===k?W?n:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;7>x;x++)E=(x+h)%7,S+="<th scope='col'"+((x+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[E]+"'>"+p[E]+"</span></th>";for($+=S+"</tr></thead><tbody>",N=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,N)),A=(this._getFirstDayOfMonth(te,Z)-h+7)%7,M=Math.ceil((A+N)/7),O=Q&&this.maxRows>M?this.maxRows:M,this.maxRows=O,P=this._daylightSavingAdjust(new Date(te,Z,1-A)),I=0;O>I;I++){for($+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(P)+"</td>":"",x=0;7>x;x++)R=g?g.apply(t.input?t.input[0]:null,[P]):[!0,""],L=P.getMonth()!==Z,H=L&&!b||!R[0]||G&&G>P||J&&P>J,F+="<td class='"+((x+h+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(P.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||y.getTime()===P.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+R[1]+(P.getTime()===X.getTime()?" "+this._currentClass:"")+(P.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===z.getTime()?" ui-state-highlight":"")+(P.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);$+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),$+="</tbody></table>"+(Q?"</div>"+(Y[0]>0&&C===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),_+=$}w+=_}return w+=c,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,i,n,s,o,a,r){var l,c,h,d,u,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=s&&s.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!l||h>=n.getMonth())&&(!c||h<=s.getMonth())&&(w+="<option value='"+h+"'"+(h===e?" selected='selected'":"")+">"+r[h]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=s?Math.min(m,s.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&i>e?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(0>e?e:s[0]*s[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.0",t.datepicker}),jQuery(function(t){t.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0431\u0442"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,changeMonth:!0,changeYear:!0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ru)}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),o="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),s=this.$element.offset(),o=this.options.offset,a=o.top,r=o.bottom;"object"!=typeof o&&(r=a=o),"function"==typeof a&&(a=o.top(this.$element)),"function"==typeof r&&(r=o.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=r&&s.top+this.$element.height()>=e-r?"bottom":null!=a&&a>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),h=t.Event(c+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-r}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=t(s);e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),o="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,o)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[s]()),n[s](null==o[e]?this.options[e]:o[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;s||n.data("bs.carousel",s=new i(this,o)),"number"==typeof e?s.to(e):a?s[a]():o.interval&&s.pause().cycle()
})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),s=i||n[e](),o=this.interval,a="next"==e?"left":"right",r="next"==e?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[r]()}if(s.hasClass("active"))return this.sliding=!1;var c=s[0],h=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(a),s.addClass(a),n.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),n.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(u)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,s=t(this),o=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(o,a),r&&o.data("bs.carousel").to(r),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!s&&o.toggle&&"show"==e&&(e=!e),s||n.data("bs.collapse",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;e.call(n,"hide"),s||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var r=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(350)[o](this.$element[0][r])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=t(this),o=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(o),r=a.data("bs.collapse"),l=r?"toggle":s.data(),c=s.attr("data-parent"),h=c&&t(c);r&&r.transitioning||(h&&h.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(s).addClass("collapsed"),s[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(a,l)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(o).each(function(){var n=i(t(this)),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.2.0",a.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var o=i(s),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;s.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),a=s.hasClass("open");if(!a||a&&27==e.keyCode)return 27==e.which&&s.find(o).trigger("focus"),n.trigger("click");var r=" li:not(.divider):visible a",l=s.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:s});if(e.trigger(o),!o.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(e,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),a=n&&t.support.transition&&o.hasClass("fade");a?o.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(i,n){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),o="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,o)),"string"==typeof i&&s[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),s=n.data("target")||n.attr("href"),o=/^#./.test(s)&&t(s);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<=s[0])return a!=(t=o[0])&&this.activate(t);for(t=s.length;t--;)a!=o[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),o=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data("bs.modal",o=new i(this,a)),"string"==typeof e?o[e](n):a.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),o="object"==typeof e&&e;(s||"destroy"!=e)&&(s||n.data("bs.tooltip",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var a=s[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,l=r.test(a);l&&(a=a.replace(r,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var u=a,p=this.$element.parent(),f=this.getPosition(p);a="bottom"==a&&c.top+c.height+d-f.scroll>f.height?"top":"top"==a&&c.top-f.scroll-d<0?"bottom":"right"==a&&c.right+h>f.width?"left":"left"==a&&c.left-h<f.left?"right":a,s.removeClass(u).addClass(a)}var m=this.getCalculatedOffset(a,c,h,d);this.applyPlacement(m,a);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var d=h.left?2*h.left-s+l:2*h.top-o+c,u=h.left?"left":"top",p=h.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-o-a.scroll,l=e.top+o-a.scroll+n;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var c=e.left-o,h=e.left+o+i;c<a.left?s.left=a.left-c:h>a.width&&(s.left=a.left+a.width-h)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),o="object"==typeof e&&e;(s||"destroy"!=e)&&(s||n.data("bs.popover",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,n=this.$form.find(".control-group"),s=this.$form.find(".editable-error-block");if(e===!1)n.removeClass(t.fn.editableform.errorGroupClass),s.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=(""+e).split("\n");for(var o=0;o<i.length;o++)i[o]=t("<div>").text(i[o]).html();e=i.join("<br>")}n.addClass(t.fn.editableform.errorGroupClass),s.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i=this.input.input2value(),n=this.validate(i);if("object"===t.type(n)&&void 0!==n.newValue){if(i=n.newValue,this.input.value2input(i),"string"==typeof n.msg)return this.error(n.msg),void this.showForm()}else if(n)return this.error(n),void this.showForm();if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var s=this.input.value2submit(i);this.isSaving=!0,t.when(this.save(s)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,void this.$div.triggerHandler("save",{newValue:i,submitValue:s,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,i):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,s=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n));return s?(this.showLoading(),i={name:this.options.name||"",value:e,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var n=arguments;return this.each(function(){var s=t(this),o=s.data("editableform"),a="object"==typeof i&&i;o||s.data("editableform",o=new e(this,a)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(n,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"
}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,n){var s,o,a={};if(!t.isArray(i)||!i.length)return a;for(var r=0;r<i.length;r++)s=i[r],e.hasOwnProperty(s)&&(a[s]=e[s]),n!==!0&&(o=s.toLowerCase(),e.hasOwnProperty(o)&&(a[s]=e[o]));return a},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,n){if(!i||null===e)return[];if("function"!=typeof n){var s=n||"value";n=function(t){return t[s]}}var o=t.isArray(e),a=[],r=this;return t.each(i,function(i,s){if(s.children)a=a.concat(r.itemsByValue(e,s.children,n));else if(o)t.grep(e,function(t){return t==(s&&"object"==typeof s?n(s):s)}).length&&a.push(s);else{var l=s&&"object"==typeof s?n(s):s;e==l&&a.push(s)}}),a},createInput:function(e){var i,n,s,o=e.type;return"date"===o&&("inline"===e.mode?t.fn.editabletypes.datefield?o="datefield":t.fn.editabletypes.dateuifield&&(o="dateuifield"):t.fn.editabletypes.date?o="date":t.fn.editabletypes.dateui&&(o="dateui"),"date"!==o||t.fn.editabletypes.date||(o="combodate")),"datetime"===o&&"inline"===e.mode&&(o="datetimefield"),"wysihtml5"!==o||t.fn.editabletypes[o]||(o="textarea"),"function"==typeof t.fn.editabletypes[o]?(i=t.fn.editabletypes[o],n=this.sliceObj(e,this.objectKeys(i.defaults)),s=new i(n)):(t.error("Unknown type: "+o),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<n.length;s++)if("string"==typeof e[n[s]+i])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var n,s=t(i.target),o=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,i.target)&&!s.is(document)){for(n=0;n<o.length;n++)if(s.is(o[n])||s.parents(o[n]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,n){if(n!==e&&!t(n).find(e).length){var s=t(n),o=s.data("editableContainer");o&&("cancel"===o.options.onblur?s.data("editableContainer").hide("onblur"):"submit"===o.options.onblur&&s.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(n){var s=arguments;return this.each(function(){var o=t(this),a="editableContainer",r=o.data(a),l="object"==typeof n&&n,c="inline"===l.mode?i:e;r||o.data(a,r=new c(this,l)),"string"==typeof n&&r[n].apply(r,Array.prototype.slice.call(s,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:e=!1}t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this)):(this.options[e]=i,"disabled"===e?i?this.disable():this.enable():("value"===e&&this.setValue(i),this.container&&this.container.option(e,i),void(this.input.option&&this.input.option(e,i))))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||this.options.display===!1,i=i||void 0!==e.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,s=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===s&&(s=""),n.css("background-color",s),n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,i,n){this.value=i?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(n)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var n={},s=arguments,o="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this),s=i.data(o);s&&(e=s.validate())&&(n[s.options.name]=e)}),n;case"getValue":return 2===arguments.length&&arguments[1]===!0?n=this.eq(0).data(o).value:this.each(function(){var e=t(this),i=e.data(o);i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var a=arguments[1]||{},r=this,l=this.editable("validate");if(t.isEmptyObject(l)){var c={};if(1===r.length){var h=r.data("editable"),d={name:h.options.name||"",value:h.input.value2submit(h.value),pk:"function"==typeof h.options.pk?h.options.pk.call(h.options.scope):h.options.pk};"function"==typeof h.options.params?d=h.options.params.call(h.options.scope,d):(h.options.params=t.fn.editableutils.tryParseJson(h.options.params,!0),t.extend(d,h.options.params)),c={url:h.options.url,data:d,type:"POST"},a.success=a.success||h.options.success,a.error=a.error||h.options.error}else{var u=this.editable("getValue");c={url:a.url,data:u,type:"POST"}}c.success="function"==typeof a.success?function(t){a.success.call(r,t,a)}:t.noop,c.error="function"==typeof a.error?function(){a.error.apply(r,arguments)}:t.noop,a.ajaxOptions&&t.extend(c,a.ajaxOptions),a.data&&t.extend(c.data,a.data),t.ajax(c)}else"function"==typeof a.error&&a.error.call(r,l);return this}return this.each(function(){var n=t(this),a=n.data(o),r="object"==typeof i&&i;return r&&r.selector?void(a=new e(this,r)):(a||n.data(o,a=new e(this,r)),void("string"==typeof i&&a[i].apply(a,Array.prototype.slice.call(s,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,n){this.type=e,this.options=t.extend({},n,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,i,n,s){var o=t.Deferred(),a=function(){"function"==typeof n?n.call(i,e,this.sourceData,s):this.value2htmlFinal(e,i),o.resolve()};return null===e?a.call(this):this.onSourceReady(a,function(){o.resolve()}),o.promise()},onSourceReady:function(e,i){var n;if(t.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{n=t.fn.editableutils.tryParseJson(n,!1)}catch(s){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var o,a=n;if(t(document).data(a)||t(document).data(a,{}),o=t(document).data(a),o.loading===!1&&o.sourceData)return this.sourceData=o.sourceData,this.doPrepend(),void e.call(this);if(o.loading===!0)return o.callbacks.push(t.proxy(function(){this.sourceData=o.sourceData,this.doPrepend(),e.call(this)},this)),void o.err_callbacks.push(t.proxy(i,this));o.loading=!0,o.callbacks=[],o.err_callbacks=[]}var r=t.extend({url:n,type:"get",cache:!1,dataType:"json",success:t.proxy(function(n){o&&(o.loading=!1),this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(o&&(o.sourceData=this.sourceData,t.each(o.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),o&&t.each(o.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),o&&(o.loading=!1,t.each(o.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(r)}else this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var i,n,s,o,a=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){o=function(t,e){return n={value:t,text:e},i++>=2?!1:void 0};for(var r=0;r<e.length;r++)s=e[r],"object"==typeof s?(i=0,t.each(s,o),1===i?a.push(n):i>1&&(s.children&&(s.children=this.makeArray(s.children)),a.push(s))):a.push({value:s,text:s})}else t.each(e,function(t,e){a.push({value:t,text:e})});return a},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,e=this.$clear.is(":visible");t&&!e&&this.$clear.show(),!t&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(i,n){var s;if(t.isArray(n))for(var o=0;o<n.length;o++)s={},n[o].children?(s.label=n[o].text,i.append(e(t("<optgroup>",s),n[o].children))):(s.value=n[o].value,n[o].disabled&&(s.disabled=!0),i.append(t("<option>",s).text(n[o].text)));return i};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var n="",s=t.fn.editableutils.itemsByValue(e,this.sourceData);s.length&&(n=s[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(t("<span>").text(" "+this.sourceData[i].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,n=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),n=e.split(i)):n=t.isArray(e)?e:[e],n},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,n){var s=t(n);t.each(e,function(t,e){s.val()==e&&s.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,n){e.push(t(n).val())}),e},value2htmlFinal:function(e,i){var n=[],s=t.fn.editableutils.itemsByValue(e,this.sourceData),o=this.options.escape;s.length?(t.each(s,function(e,i){var s=o?t.fn.editableutils.escape(i.text):i.text;n.push(s)}),t(i).html(n.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;t.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.results||(i.select2.ajax.results=function(t){return{results:t}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var s=this.idFunc||"id";this.idFunc=function(t){return t[s]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var s,o="",a=this;this.options.select2.tags?s=i:this.sourceData&&(s=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(s)?(o=[],t.each(s,function(t,e){o.push(e&&"object"==typeof e?a.formatSelection(e):e)})):s&&(o=a.formatSelection(s)),o=t.isArray(o)?o.join(this.options.viewseparator):o,e.superclass.value2html.call(this,o,n)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(t.isArray(e)&&(e=e.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var s=t(this.options.scope);if(!s.data("editable").isEmpty){var o={id:e,text:s.text()};this.$input.select2("data",o)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;i=i||this.getSeparator();var n,s,o;if(null===e||e.length<1)return null;for(n=e.split(i),s=0,o=n.length;o>s;s+=1)n[s]=t.trim(n[s]);return n},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||t.fn.select2.defaults.separator},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var i=0;i<e.length;i++)void 0!==e[i].value&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,i){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(e){this.$element.val(this.getValue()).change(),this.options.smartDays&&(t(e.target).is(".month")||t(e.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var n=new RegExp(i+"+"),s=i.length>1?i.substring(1,2):i;e=e.replace(n,"{"+s+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){i=i[0];var n=i.length>1?i.substring(1,2):i;e=e.replace("{"+n+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){for(var t in this.map){var e=this.$widget.find("."+t);this["$"+t]=e.length?e:null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var i="fill"+t.charAt(0).toUpperCase()+t.slice(1),n=this[i](),s=e.val();e.empty();for(var o=0;o<n.length;o++)e.append('<option value="'+n[o][0]+'">'+n[o][1]+"</option>");e.val(s)}},fillCommon:function(t){var e,i=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},fillDay:function(){var t,e,i=this.fillCommon("d"),n=-1!==this.options.template.indexOf("DD"),s=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),a=parseInt(this.$year.val(),10);isNaN(o)||isNaN(a)||(s=moment([a,o]).daysInMonth())}for(e=1;s>=e;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.fillCommon("M"),n=-1!==this.options.template.indexOf("MMMM"),s=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=n?moment().date(1).month(e).format("MMMM"):s?moment().date(1).month(e).format("MMM"):o?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],n=-1!==this.options.template.indexOf("YYYY");
for(e=this.options.maxYear;e>=this.options.minYear;e--)t=n?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.fillCommon("y").concat(i)},fillHour:function(){var t,e,i=this.fillCommon("h"),n=-1!==this.options.template.indexOf("h"),s=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=n?1:0,a=n?12:23;for(e=o;a>=e;e++)t=s?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.fillCommon("m"),n=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.fillCommon("s"),n=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var i,n={},s=this,o=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return n[t]=s["$"+t]?parseInt(s["$"+t].val(),10):e,isNaN(n[t])?(o=!0,!1):void 0}}),o?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),e=void 0===e?this.options.format:e,null===e?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var n={};return e.children("option").each(function(e,s){var o,a=t(s).attr("value");""!==a&&(o=Math.abs(a-i),("undefined"==typeof n.distance||o<n.distance)&&(n={value:a,distance:o}))}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),s=this,o={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(o[t]=n[e[1]]())}),this.$ampm&&(o.hour>=12?(o.ampm="pm",o.hour>12&&(o.hour-=12)):(o.ampm="am",0===o.hour&&(o.hour=12))),t.each(o,function(t,e){s["$"+t]&&("minute"===t&&s.options.minuteStep>1&&s.options.roundTime&&(e=i(s["$"+t],e)),"second"===t&&s.options.secondStep>1&&s.options.roundTime&&(e=i(s["$"+t],e)),s["$"+t].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var n,s=Array.apply(null,arguments);return s.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,s):this.each(function(){var n=t(this),o=n.data("combodate"),a="object"==typeof i&&i;o||n.data("combodate",o=new e(this,a)),"string"==typeof i&&"function"==typeof o[i]&&o[i].apply(o,s)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var n=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||this.input.options.inputclass===!1,n="input-sm",s="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,s)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var o=this.$form.find(".editable-buttons"),a=i?[n]:this.input.options.inputclass.split(" "),r=0;r<a.length;r++)"input-lg"===a[r].toLowerCase()&&o.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,n=i.test(e);n&&(e=e.replace(i,"")||"top");var s=this.getPosition(),o=t[0].offsetWidth,a=t[0].offsetHeight;if(n){var r=this.$element.parent(),l=e,c=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:r.outerWidth(),d="body"==this.options.container?window.innerHeight:r.outerHeight(),u="body"==this.options.container?0:r.offset().left;e="bottom"==e&&s.top+s.height+a-c>d?"top":"top"==e&&s.top-c-a<0?"bottom":"right"==e&&s.right+o>h?"left":"left"==e&&s.left-o<u?"right":e,t.removeClass(l).addClass(e)}var p=this.getCalculatedOffset(e,s,o,a);this.applyPlacement(p,e)}).call(this.container())}})}(window.jQuery),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n,s=t(e).data(),o={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var r in s)i.test(r)&&(n=r.replace(a,function(t,e){return e.toLowerCase()}),o[n]=s[r]);return o}function n(e){var i={};if(h[e]||(e=e.split("-")[0],h[e])){var n=h[e];return t.each(c,function(t,e){e in n&&(i[e]=n[e])}),i}}var s=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(h[n]||(n=n.split("-")[0],h[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=d.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=d.parseDate(i.startDate,s,i.language)),1/0!==i.endDate&&(i.endDate=d.parseDate(i.endDate,s,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,s=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:e,date:s,format:t.proxy(function(t){var e=t||this.o.format;return d.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),d.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.viewDate=new Date(this.date<this.o.startDate?this.o.startDate:this.date>this.o.endDate?this.o.endDate:this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+h[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+h[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=this.date.valueOf(),a=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<s?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>s)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==a.getFullYear()&&e.getUTCMonth()==a.getMonth()&&e.getUTCDate()==a.getDate()&&i.push("today"),o&&e.valueOf()==o&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){{var i,n=new Date(this.viewDate),s=n.getUTCFullYear(),o=n.getUTCMonth(),a=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,r=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf()}this.picker.find(".datepicker-days thead th.datepicker-switch").text(h[this.o.language].months[o]+" "+s),this.picker.find("tfoot th.today").text(h[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(h[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=e(s,o-1,28,0,0,0,0),p=d.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(p),u.setUTCDate(p-(u.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(u);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];u.valueOf()<f;){if(u.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=e(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(u),m.push("day");var x=this.o.beforeShowDay(u);void 0===x?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),x.enabled===!1&&m.push("disabled"),x.classes&&(m=m.concat(x.classes.split(/\s+/))),x.tooltip&&(i=x.tooltip),m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+u.getUTCDate()+"</td>"),u.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var k=this.date&&this.date.getUTCFullYear(),_=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");k&&k==s&&_.eq(this.date.getUTCMonth()).addClass("active"),(a>s||s>l)&&_.addClass("disabled"),s==a&&_.slice(0,r).addClass("disabled"),s==l&&_.slice(c+1).addClass("disabled"),g="",s=10*parseInt(s/10,10);var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var T=-1;11>T;T++)g+='<span class="year'+(-1==T?" old":10==T?" new":"")+(k==s?" active":"")+(a>s||s>l?" disabled":"")+'">'+s+"</span>",s+=1;C.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=d.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s)}this.fill();break;case"today":var o=new Date;o=e(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var a="linked"==this.o.todayBtn?null:"view";this._setDate(o,a);break;case"clear":var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),h=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(h,c,l,0,0,0,0))}else{var h=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(h),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(h,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,h=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,h-=1):c-=1:n.is(".new")&&(11==c?(c=0,h+=1):c+=1),this._setDate(e(h,c,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,n,s=new Date(t.valueOf()),o=s.getUTCDate(),a=s.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)n=-1==e?function(){return s.getUTCMonth()==a}:function(){return s.getUTCMonth()!=i},i=a+e,s.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;r>l;l++)s=this.moveMonth(s,e);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,s=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(s){this._trigger("changeDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),n=i.getUTCDate(),s=t.inArray(e.target,this.inputs),o=this.inputs.length;if(-1!=s){if(n<this.dates[s])for(;s>=0&&n<this.dates[s];)this.pickers[s--].setUTCDate(n);else if(n>this.dates[s])for(;o>s&&n>this.dates[s];)this.pickers[s++].setUTCDate(n);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var a=t.fn.datepicker,r=t.fn.datepicker=function(e){var a=Array.apply(null,arguments);a.shift();var r;return this.each(function(){var c=t(this),h=c.data("datepicker"),d="object"==typeof e&&e;if(!h){var u=i(this,"date"),p=t.extend({},l,u,d),f=n(p.language),m=t.extend({},l,f,u,d);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",h=new o(this,t.extend(m,g)))}else c.data("datepicker",h=new s(this,m))}return"string"==typeof e&&"function"==typeof h[e]&&(r=h[e].apply(h,a),void 0!==r)?!1:void 0}),void 0!==r?r:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=s;var h=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,d.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=d.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var a,r,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var u=0;u<c.length;u++)switch(a=l.exec(c[u]),r=parseInt(a[1]),a[2]){case"d":i.setUTCDate(i.getUTCDate()+r);break;case"m":i=s.prototype.moveMonth.call(s.prototype,i,r);break;case"w":i.setUTCDate(i.getUTCDate()+7*r);break;case"y":i=s.prototype.moveYear.call(s.prototype,i,r)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,a,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=t(b).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),c.length==b.length){for(var u=0,y=b.length;y>u;u++){if(p=parseInt(c[u],10),a=b[u],isNaN(p))switch(a){case"MM":f=t(h[o].months).filter(function(){var t=this.slice(0,c[u].length),e=c[u].slice(0,t.length);return t==e}),p=t.inArray(f[0],h[o].months)+1;break;case"M":f=t(h[o].monthsShort).filter(function(){var t=this.slice(0,c[u].length),e=c[u].slice(0,t.length);return t==e}),p=t.inArray(f[0],h[o].monthsShort)+1}m[a]=p}for(var w,u=0;u<g.length;u++)w=g[u],w in m&&!isNaN(m[w])&&v[w](i,m[w])}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=d.parseFormat(i));var s={d:e.getUTCDate(),D:h[n].daysShort[e.getUTCDay()],DD:h[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:h[n].monthsShort[e.getUTCMonth()],MM:h[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;for(var e=[],o=t.extend([],i.separators),a=0,r=i.parts.length;r>=a;a++)o.length&&e.push(o.shift()),e.push(s[i.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=d,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=a,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),r.call(i,"show"))}),t(function(){r.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datepicker.language),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)
},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var e=t(this).closest("form").parent();setTimeout(function(){e.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void e.superclass.value2html.call(this,n,i):n},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datetimepicker.language,this.options.formatType),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),function(){jQuery(function(t){var e;return e=t.fn.editableform.Constructor,null==e.prototype.saveWithUrlHook?(e.prototype.saveWithUrlHook=function(e){var i,n;return i=this.options.url,n=this.options.resource,this.options.url=function(e){return function(s){var o;return"function"==typeof i?i.call(e.options.scope,s):null!=i&&"never"!==e.options.send?(o={},o[s.name]=s.value,n?s[n]=o:s=o,delete s.name,delete s.value,delete s.pk,t.ajax(t.extend({url:i,data:s,type:"PUT",dataType:"json"},e.options.ajaxOptions))):void 0}}(this),this.saveWithoutUrlHook(e)},e.prototype.saveWithoutUrlHook=e.prototype.save,e.prototype.save=e.prototype.saveWithUrlHook):void 0})}.call(this),function(){var t,e,i,n,s,o,a,r,l,c,h,d,u,p,f,m,g,v,b,y,w,x,k,_,C,T,D,$,S,E,N,A,M,O,P,I,F,R,L,H,j,z,W,B,U,q,Y,V,K,Q,X,G=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},J={}.hasOwnProperty,Z=function(t,e){function i(){this.constructor=t}for(var n in e)J.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},te=[].slice;E={},d=10,q=!1,m=null,$=null,I=null,f=null,Q=null,y=function(t){var e;return t=new i(t),j(),h(),q&&(e=Y(t.absolute))?(w(e),x(t)):x(t,B)},Y=function(t){var e;return e=E[t],e&&!e.transitionCacheDisabled?e:void 0},g=function(t){return null==t&&(t=!0),q=t},x=function(t,e){return null==e&&(e=function(){return function(){}}(this)),V("page:fetch",{url:t.absolute}),null!=Q&&Q.abort(),Q=new XMLHttpRequest,Q.open("GET",t.withoutHashForIE10compatibility(),!0),Q.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),Q.setRequestHeader("X-XHR-Referer",I),Q.onload=function(){var i;return V("page:receive",{url:t.absolute}),(i=O())?(F(t),u.apply(null,b(i)),S(),R(),e(),V("page:load")):document.location.href=t.absolute},Q.onloadend=function(){return Q=null},Q.onerror=function(){return document.location.href=t.absolute},Q.send()},w=function(t){return null!=Q&&Q.abort(),u(t.title,t.body),P(t),V("page:restore")},h=function(){var t;return t=new i(m.url),E[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},p(d)},A=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},p=function(t){var e,i,n,s,o,a;for(n=Object.keys(E),e=n.map(function(t){return E[t].cachedAt}).sort(function(t,e){return e-t}),a=[],s=0,o=n.length;o>s;s++)i=n[s],E[i].cachedAt<=e[t]&&(V("page:expire",E[i]),a.push(delete E[i]));return a},u=function(e,i,n,s){return document.title=e,document.documentElement.replaceChild(i,document.body),null!=n&&t.update(n),U(),s&&v(),m=window.history.state,V("page:change"),V("page:update")},v=function(){var t,e,i,n,s,o,a,r,l,c,h,d;for(o=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),a=0,l=o.length;l>a;a++)if(s=o[a],""===(h=s.type)||"text/javascript"===h){for(e=document.createElement("script"),d=s.attributes,r=0,c=d.length;c>r;r++)t=d[r],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(s.innerHTML)),n=s.parentNode,i=s.nextSibling,n.removeChild(s),n.insertBefore(e,i)}},z=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},U=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},F=function(t){return(t=new i(t)).absolute!==I?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},R=function(){var t,e;return(t=Q.getResponseHeader("X-XHR-Redirected-To"))?(t=new i(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(m,"",t.href+e)):void 0},j=function(){return I=document.location.href},H=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},L=function(){return m=window.history.state},S=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new i).hasNoHash()?(window.history.replaceState(m,"",t.withoutHash()),document.location.hash=t.hash):void 0},P=function(t){return window.scrollTo(t.positionX,t.positionY)},B=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},M=function(t){var e,i;return e=(null!=(i=document.cookie.match(new RegExp(t+"=(\\w+)")))?i[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",e},V=function(t,e){var i;return i=document.createEvent("Events"),e&&(i.data=e),i.initEvent(t,!0,!0),document.dispatchEvent(i)},N=function(){return!V("page:before-change")},O=function(){var t,e,i,n,s,o;return e=function(){var t;return 400<=(t=Q.status)&&600>t},o=function(){return Q.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},n=function(t){var e,i,n,s,o;for(s=t.head.childNodes,o=[],i=0,n=s.length;n>i;i++)e=s[i],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&o.push(e.getAttribute("src")||e.getAttribute("href"));return o},t=function(t){var e;return $||($=n(document)),e=n(t),e.length!==$.length||s(e,$).length!==$.length},s=function(t,e){var i,n,s,o,a;for(t.length>e.length&&(o=[e,t],t=o[0],e=o[1]),a=[],n=0,s=t.length;s>n;n++)i=t[n],G.call(e,i)>=0&&a.push(i);return a},!e()&&o()&&(i=f(Q.responseText),i&&!t(i))?i:void 0},b=function(e){var i;return i=e.querySelector("title"),[null!=i?i.textContent:void 0,z(e.body),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},s=function(){var t,e,i,n,s,o;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},i=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return s=e("<html><body><p>test"),e}catch(a){return n=a,s=t("<html><body><p>test"),t}finally{if(1!==(null!=s&&null!=(o=s.body)?o.childNodes.length:void 0))return i}},i=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),n=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,void e.__super__.constructor.apply(this,arguments))}return Z(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,i,n,s;for(i=1<=arguments.length?te.call(arguments,0):[],n=0,s=i.length;s>n;n++)t=i[n],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._crossOrigin=function(){return this.origin!==(new i).origin},e.prototype._anchored=function(){var t;return(this.hash&&this.withoutHash())===(t=new i).withoutHash()||this.href===t.href+"#"},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.link;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(i),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(N()||K(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new n(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),c=function(t){return setTimeout(t,500)},C=function(){return document.addEventListener("DOMContentLoaded",function(){return V("page:change"),V("page:update")},!0)},D=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?V("page:update"):void 0}):void 0},T=function(t){var e,n;return(null!=(n=t.state)?n.turbolinks:void 0)?(e=E[new i(t.state.url).absolute])?(h(),w(e)):K(t.target.location.href):void 0},_=function(){return H(),L(),f=s(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return H(),L()},!1),c(function(){return window.addEventListener("popstate",T,!1)})},k=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),r=window.history&&window.history.pushState&&window.history.replaceState&&k,o=!navigator.userAgent.match(/CriOS\//),W="GET"===(X=M("request_method"))||""===X,l=r&&o&&W,a=document.addEventListener&&document.createEvent,a&&(C(),D()),l?(K=y,_()):K=function(t){return document.location.href=t},this.Turbolinks={visit:K,pagesCached:A,enableTransitionCache:g,allowLinkExtensions:n.allowExtensions,supported:l}}.call(this),function(t){function e(t,i){return new e.prototype.init(t,i)}var n=0,s=function(t){return this[0]=t.startOffset,this[1]=t.endOffset,this.range=t,this};s.prototype.equals=function(){return this[0]===this[1]},t.fn.redactor=function(i){var n=[],s=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof i?function(){var e=t.data(this,"redactor");if("undefined"==typeof e||!t.isFunction(e[i]))return t.error('No such method "'+i+'" for Redactor');var o=e[i].apply(e,s);void 0!==o&&o!==e&&n.push(o)}:function(){t.data(this,"redactor")||t.data(this,"redactor",e(this,i))}),0===n.length?this:1===n.length?n[0]:n},t.Redactor=e,t.Redactor.VERSION="9.1.9",t.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:"en",direction:"ltr",placeholder:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:!0,autosave:!1,autosaveInterval:60,autosaveFormdata:!0,plugins:!1,linkAnchor:!0,linkEmail:!0,linkProtocol:"http://",linkNofollow:!1,linkSize:50,imageFloatMargin:"10px",imageGetJson:!1,imageUpload:!1,imageUploadParam:"file",fileUpload:!1,fileUploadParam:"file",clipboardUpload:!0,clipboardUploadUrl:!1,dragUpload:!0,dnbImageTypes:["image/png","image/jpeg","image/gif"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,buttonSource:!0,buttonSeparator:'<li class="redactor_separator"></li>',buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","alignment","|","horizontalrule"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify","table"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline",tr:"table",td:"table",table:"table"},activeButtonsAdd:!1,formattingTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:["html","head","link","body","meta","script","style","applet"],boldTag:"strong",italicTag:"em",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],ownLine:["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],contOwnLine:["li","dt","dt","h[1-6]","option","script"],newLevel:["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"],blockLevelElements:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","LI","BLOCKQUOTE","OUTPUT","FIGCAPTION","PRE","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE","TD"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit"}}},e.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(e,s){this.rtePaste=!1,this.$element=this.$source=t(e),this.uuid=n++;var o=t.extend(!0,{},t.Redactor.opts);if(this.opts=t.extend({},o,this.$element.data(),s),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css("height"),this.sourceWidth=this.$source.css("width"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=new RegExp("^<(/?"+this.opts.ownLine.join("|/?")+"|"+this.opts.contOwnLine.join("|")+")[ >]"),this.cleanlineAfter=new RegExp("^<(br|/?"+this.opts.ownLine.join("|/?")+"|/"+this.opts.contOwnLine.join("|/")+")[ >]"),this.cleannewLevel=new RegExp("^</?("+this.opts.newLevel.join("|")+")[ >]"),this.rTestBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.opts.linebreaks===!1){if(this.opts.allowedTags!==!1){var a=["strong","em","del"],r=["b","i","strike"];"-1"===t.inArray("p",this.opts.allowedTags)&&this.opts.allowedTags.push("p");for(i in a)"-1"!=t.inArray(a[i],this.opts.allowedTags)&&this.opts.allowedTags.push(r[i])}if(this.opts.deniedTags!==!1){var l=t.inArray("p",this.opts.deniedTags);"-1"!==l&&this.opts.deniedTags.splice(l,l)}}(this.browser("msie")||this.browser("opera"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,"horizontalrule")),this.opts.curLang=this.opts.langs[this.opts.lang],this.buildStart()},toolbarInit:function(t){return{html:{title:t.html,func:"toggle"},formatting:{title:t.formatting,func:"show",dropdown:{p:{title:t.paragraph,func:"formatBlocks"},blockquote:{title:t.quote,func:"formatQuote",className:"redactor_format_blockquote"},pre:{title:t.code,func:"formatBlocks",className:"redactor_format_pre"},h1:{title:t.header1,func:"formatBlocks",className:"redactor_format_h1"},h2:{title:t.header2,func:"formatBlocks",className:"redactor_format_h2"},h3:{title:t.header3,func:"formatBlocks",className:"redactor_format_h3"},h4:{title:t.header4,func:"formatBlocks",className:"redactor_format_h4"},h5:{title:t.header5,func:"formatBlocks",className:"redactor_format_h5"}}},bold:{title:t.bold,exec:"bold"},italic:{title:t.italic,exec:"italic"},deleted:{title:t.deleted,exec:"strikethrough"},underline:{title:t.underline,exec:"underline"},unorderedlist:{title:"&bull; "+t.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+t.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+t.outdent,func:"indentingOutdent"},indent:{title:"> "+t.indent,func:"indentingIndent"},image:{title:t.image,func:"imageShow"},video:{title:t.video,func:"videoShow"},file:{title:t.file,func:"fileShow"},table:{title:t.table,func:"show",dropdown:{insert_table:{title:t.insert_table,func:"tableShow"},separator_drop1:{name:"separator"},insert_row_above:{title:t.insert_row_above,func:"tableAddRowAbove"},insert_row_below:{title:t.insert_row_below,func:"tableAddRowBelow"},insert_column_left:{title:t.insert_column_left,func:"tableAddColumnLeft"},insert_column_right:{title:t.insert_column_right,func:"tableAddColumnRight"},separator_drop2:{name:"separator"},add_head:{title:t.add_head,func:"tableAddHead"},delete_head:{title:t.delete_head,func:"tableDeleteHead"},separator_drop3:{name:"separator"},delete_column:{title:t.delete_column,func:"tableDeleteColumn"},delete_row:{title:t.delete_row,func:"tableDeleteRow"},delete_table:{title:t.delete_table,func:"tableDeleteTable"}}},link:{title:t.link,func:"show",dropdown:{link:{title:t.link_insert,func:"linkShow"},unlink:{title:t.unlink,exec:"unlink"}}},fontcolor:{title:t.fontcolor,func:"show"},backcolor:{title:t.backcolor,func:"show"},alignment:{title:t.alignment,func:"show",dropdown:{alignleft:{title:t.align_left,func:"alignmentLeft"},aligncenter:{title:t.align_center,func:"alignmentCenter"},alignright:{title:t.align_right,func:"alignmentRight"},justify:{title:t.align_justify,func:"alignmentJustify"}}},alignleft:{title:t.align_left,func:"alignmentLeft"},aligncenter:{title:t.align_center,func:"alignmentCenter"},alignright:{title:t.align_right,func:"alignmentRight"},justify:{title:t.align_justify,func:"alignmentJustify"},horizontalrule:{exec:"inserthorizontalrule",title:t.horizontalrule}}},callback:function(e,i,n){var s=this.opts[e+"Callback"];return t.isFunction(s)?i===!1?s.call(this,n):s.call(this,i,n):n},destroy:function(){clearInterval(this.autosaveInterval),t(window).off(".redactor"),this.$source.off("redactor-textarea"),this.$element.off(".redactor").removeData("redactor");var e=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(e).show();else{var i=this.$editor;this.opts.iframe&&(i=this.$element),this.$box.after(i),this.$box.remove(),i.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(e).show()}this.opts.air&&t("#redactor_air_"+this.uuid).remove()},getObject:function(){return t.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return this.opts.iframe?this.$frame:!1},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr("contenteditable").removeAttr("dir");var t=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),t},set:function(t,e,i){t=t.toString(),t=t.replace(/\$/g,"&#36;"),this.opts.fullpage?this.setCodeIframe(t):this.setEditor(t,e),""==t&&(i=!1),i!==!1&&this.placeholderRemove()},setEditor:function(t,e){e!==!1&&(t=this.cleanSavePreCode(t),t=this.cleanStripTags(t),t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t,!0),t=this.opts.linebreaks===!1?this.cleanConverters(t):t.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),t=t.replace(/&amp;#36;/g,"$"),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},setCodeIframe:function(t){var e=this.iframePage();this.$frame[0].src="about:blank",t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t),t=this.cleanRemoveSpaces(t),e.open(),e.write(t),e.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(t){t=this.cleanSavePreCode(t,!0),t=this.cleanConverters(t),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},setSpansVerified:function(){var e=this.$editor.find("span"),i="inline";t.each(e,function(){var e=this.outerHTML,n=new RegExp("<"+this.tagName,"gi"),s=e.replace(n,"<"+i);n=new RegExp("</"+this.tagName,"gi"),s=s.replace(n,"</"+i),t(this).replaceWith(s)})},setSpansVerifiedHtml:function(t){return t=t.replace(/<span(.*?)>/,"<inline$1>"),t.replace(/<\/span>/,"</inline>")},setNonEditable:function(){this.$editor.find(".noneditable").attr("contenteditable",!1)},sync:function(){var e="";if(this.cleanUnverified(),e=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),e=this.syncClean(e),e=this.cleanRemoveEmptyTags(e),e=e.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi,"<$1>$2</$1></li>"),"<br>"===t.trim(e)&&(e=""),this.opts.xhtml){var i=["br","hr","img","link","input","meta"];t.each(i,function(t,i){e=e.replace(new RegExp("<"+i+"(.*?[^/$]?)>","gi"),"<"+i+"$1 />")})}e=this.callback("syncBefore",!1,e),this.$source.val(e),this.callback("syncAfter",!1,e),this.start===!1&&this.callback("change",!1,e)},syncClean:function(e){return this.opts.fullpage||(e=this.cleanStripTags(e)),e=t.trim(e),e=this.placeholderRemoveFromCode(e),e=e.replace(/&#x200b;/gi,""),e=e.replace(/&#8203;/gi,""),e=e.replace(/<\/a>&nbsp;/gi,"</a> "),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?)>/gi,"<a$1$2>"),e=e.replace(/<a(.*?)>/gi,'<a$1 rel="nofollow">')),e=e.replace("<!--?php","<?php"),e=e.replace("?-->","?>"),e=e.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi,'<$1class="noeditable"$2$3>'),e=e.replace(/ data-tagblock=""/gi,""),e=e.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,"</$1>"),e=e.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i,""),e=e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),e=e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),e=e.replace(/<inline>/gi,"<span>"),e=e.replace(/<inline /gi,"<span "),e=e.replace(/<\/inline>/gi,"</span>"),e=e.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi,""),e=e.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),e=e.replace(/&amp;/gi,"&"),e=e.replace(/\u2122/gi,"&trade;"),e=e.replace(/\xa9/gi,"&copy;"),e=this.cleanReConvertProtected(e)},buildStart:function(){this.content="",this.$box=t('<div class="redactor_box" />'),"TEXTAREA"===this.$source[0].tagName&&(this.opts.textareamode=!0),this.opts.mobile===!1&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.content=t.trim(this.opts.textareamode?this.$source.val():this.$source.html())},buildFromTextarea:function(){this.$editor=t("<div />"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(e){return t("<textarea />").attr("name",e.attr("id")).css("height",this.sourceHeight)},buildAddClasses:function(e){t.each(this.$source.get(0).className.split(/\s+/),function(t,i){e.addClass("redactor_"+i)})},buildEnable:function(){this.$editor.addClass("redactor_editor").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr("dir",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var t=this.$editor;this.opts.iframe&&(t=this.$frame),this.opts.tabindex&&t.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&t.css("min-height",this.opts.minHeight+"px"),this.opts.maxHeight&&(this.opts.autoresize=!1,this.sourceHeight=this.opts.maxHeight),this.opts.wym&&this.$editor.addClass("redactor_editor_wym"),this.opts.autoresize||t.css("height",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout(t.proxy(this.observeStart,this),4),this.browser("mozilla"))try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}this.opts.focus&&setTimeout(t.proxy(this.focus,this),100),this.opts.visual||setTimeout(t.proxy(function(){this.opts.visual=!0,this.toggle(!1)},this),200),this.callback("init")},buildBindKeyboard:function(){this.dblEnter=0,this.opts.dragUpload&&this.opts.imageUpload!==!1&&this.$editor.on("drop.redactor",t.proxy(this.buildEventDrop,this)),this.$editor.on("paste.redactor",t.proxy(this.buildEventPaste,this)),this.$editor.on("keydown.redactor",t.proxy(this.buildEventKeydown,this)),this.$editor.on("keyup.redactor",t.proxy(this.buildEventKeyup,this)),t.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on("keydown.redactor-textarea",t.proxy(this.opts.textareaKeydownCallback,this)),t.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",t.proxy(this.opts.focusCallback,this));var e;t(document).mousedown(function(i){e=t(i.target)}),this.$editor.on("blur.redactor",t.proxy(function(i){t(e).hasClass("redactor_toolbar")||0!=t(e).parents(".redactor_toolbar").size()||(this.selectall=!1,t.isFunction(this.opts.blurCallback)&&this.callback("blur",i))},this))},buildEventDrop:function(e){if(e=e.originalEvent||e,void 0===window.FormData||!e.dataTransfer)return!0;var i=e.dataTransfer.files.length;if(0==i)return!0;e.preventDefault();var n=e.dataTransfer.files[0];if(this.opts.dnbImageTypes!==!1&&-1==this.opts.dnbImageTypes.indexOf(n.type))return!0;this.bufferSet();var s=t('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');t(document.body).append(s),this.opts.s3===!1?this.dragUploadAjax(this.opts.imageUpload,n,!0,s,e,this.opts.imageUploadParam):this.s3uploadFile(n)},buildEventPaste:function(e){var i=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var n=this.browser("version").split(".");n[0]<536&&(i=!0)}if(i)return!0;if(this.browser("opera"))return!0;if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(e))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(this.opts.autoresize===!0&&this.fullscreen!==!0?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var s=this.extractContent();setTimeout(t.proxy(function(){var t=this.extractContent();this.$editor.append(s),this.selectionRestore();var e=this.getFragmentHtml(t);this.pasteClean(e),this.opts.autoresize===!0&&this.fullscreen!==!0&&this.$editor.css("height","auto")
},this),1)}},buildEventClipboardUpload:function(e){var i=e.originalEvent||e;if(this.clipboardFilePaste=!1,"undefined"==typeof i.clipboardData)return!1;if(i.clipboardData.items){var n=i.clipboardData.items[0].getAsFile();if(null!==n){this.bufferSet(),this.clipboardFilePaste=!0;var s=new FileReader;return s.onload=t.proxy(this.pasteClipboardUpload,this),s.readAsDataURL(n),!0}}return!1},buildEventKeydown:function(e){if(this.rtePaste)return!1;var i=e.which,n=e.ctrlKey||e.metaKey,s=this.getParent(),o=this.getCurrent(),a=this.getBlock(),r=!1;if(this.callback("keydown",e),this.imageResizeHide(!1),(s&&"PRE"===t(s).get(0).tagName||o&&"PRE"===t(o).get(0).tagName)&&(r=!0,i===this.keyCode.DOWN&&this.insertAfterLastElement(a)),i===this.keyCode.DOWN&&(s&&"BLOCKQUOTE"===t(s)[0].tagName&&this.insertAfterLastElement(s),o&&"BLOCKQUOTE"===t(o)[0].tagName&&this.insertAfterLastElement(o),s&&"P"===t(s)[0].tagName&&"BLOCKQUOTE"==t(s).parent()[0].tagName&&this.insertAfterLastElement(s,t(s).parent()[0]),o&&"P"===t(o)[0].tagName&&s&&"BLOCKQUOTE"==t(s)[0].tagName&&this.insertAfterLastElement(o,s)),n&&!e.shiftKey&&this.shortcuts(e,i),n&&90===i&&!e.shiftKey&&!e.altKey)return e.preventDefault(),void(this.opts.buffer.length?this.bufferUndo():this.document.execCommand("undo",!1,!1));if(n&&90===i&&e.shiftKey&&!e.altKey)return e.preventDefault(),void(0!=this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand("redo",!1,!1));if(n&&65===i?this.selectall=!0:i==this.keyCode.LEFT_WIN||n||(this.selectall=!1),i!=this.keyCode.ENTER||e.shiftKey||e.ctrlKey||e.metaKey)i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey)&&(this.bufferSet(),e.preventDefault(),this.insertLineBreak());else{if(this.browser("msie")&&1==s.nodeType&&("TD"==s.tagName||"TH"==s.tagName))return e.preventDefault(),this.bufferSet(),this.insertNode(document.createElement("br")),this.callback("enter",e),!1;if(a&&("BLOCKQUOTE"==a.tagName||"BLOCKQUOTE"==t(a).parent()[0].tagName))if(this.isEndOfElement()){if(1==this.dblEnter){var l,c;if("BLOCKQUOTE"==a.tagName?(c="br",l=a):(c="p",l=t(a).parent()[0]),e.preventDefault(),this.insertingAfterLastElement(l),this.dblEnter=0,"p"==c)t(a).parent().find("p").last().remove();else{var h=t.trim(t(a).html());t(a).html(h.replace(/<br\s?\/?>$/i,""))}return}this.dblEnter++}else this.dblEnter++;if(r===!0)return this.buildEventKeydownPre(e,o);if(!this.opts.linebreaks)if(a&&this.opts.rBlockTest.test(a.tagName))this.bufferSet(),setTimeout(t.proxy(function(){var e=this.getBlock();if("DIV"===e.tagName&&!t(e).hasClass("redactor_editor")){var i=t("<p>"+this.opts.invisibleSpace+"</p>");t(e).replaceWith(i),this.selectionStart(i)}},this),1);else if(a===!1){this.bufferSet();var d=t("<p>"+this.opts.invisibleSpace+"</p>");return this.insertNode(d[0]),this.selectionStart(d),this.callback("enter",e),!1}if(this.opts.linebreaks){if(!a||!this.opts.rBlockTest.test(a.tagName))return this.buildEventKeydownInsertLineBreak(e);this.bufferSet(),setTimeout(t.proxy(function(){var e=this.getBlock();"DIV"!==e.tagName&&"P"!==e.tagName||t(e).hasClass("redactor_editor")||this.replaceLineBreak(e)},this),1)}if("BLOCKQUOTE"==a.tagName||"FIGCAPTION"==a.tagName)return this.buildEventKeydownInsertLineBreak(e);this.callback("enter",e)}return i===this.keyCode.TAB&&this.opts.shortcuts?this.buildEventKeydownTab(e,r):void(i===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(o))},buildEventKeydownPre:function(e,i){e.preventDefault(),this.bufferSet();var n=t(i).parent().text();return this.insertNode(document.createTextNode("\n")),-1==n.search(/\s$/)&&this.insertNode(document.createTextNode("\n")),this.sync(),this.callback("enter",e),!1},buildEventKeydownTab:function(t,e){return this.opts.tabFocus?this.isEmpty(this.get())&&this.opts.tabSpaces===!1?!0:(t.preventDefault(),e!==!0||t.shiftKey?this.opts.tabSpaces!==!1?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join("\xa0"))),this.sync(),!1):(t.shiftKey?this.indentingOutdent():this.indentingIndent(),!1):(this.bufferSet(),this.insertNode(document.createTextNode("	")),this.sync(),!1)):!0},buildEventKeydownBackspace:function(e){if("undefined"!=typeof e.tagName&&/^(H[1-6])$/i.test(e.tagName)){var i;i=t(this.opts.linebreaks===!1?"<p>"+this.opts.invisibleSpace+"</p>":"<br>"+this.opts.invisibleSpace),t(e).replaceWith(i),this.selectionStart(i)}"undefined"!=typeof e.nodeValue&&null!==e.nodeValue&&e.remove&&3===e.nodeType&&null==e.nodeValue.match(/[^/\u200B]/g)&&e.remove()},buildEventKeydownInsertLineBreak:function(t){this.bufferSet(),t.preventDefault(),this.insertLineBreak(),this.callback("enter",t)},buildEventKeyup:function(e){if(this.rtePaste)return!1;var i=e.which,n=this.getParent(),s=this.getCurrent();if(!this.opts.linebreaks&&3==s.nodeType&&(0==n||"BODY"==n.tagName)){var o=t("<p>").append(t(s).clone());t(s).replaceWith(o);var a=t(o).next();"undefined"!=typeof a[0]&&"BR"==a[0].tagName&&a.remove(),this.selectionEnd(o)}return(this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&i===this.keyCode.ENTER&&this.buildEventKeyupConverters(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?this.formatEmpty(e):(this.callback("keyup",e),void this.sync())},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout(t.proxy(function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()},this),5)},buildPlugins:function(){this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(e,i){RedactorPlugins[i]&&(t.extend(this,RedactorPlugins[i]),t.isFunction(RedactorPlugins[i].init)&&this.init())},this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))},iframeAppend:function(t){this.$source.attr("dir",this.opts.direction).hide(),this.$box.insertAfter(t).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=t('<iframe style="width: 100%;" frameborder="0" />').one("load",t.proxy(function(){if(this.opts.fullpage){this.iframePage(),""===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var e=setInterval(t.proxy(function(){this.$frame.contents().find("body").html()&&(clearInterval(e),this.iframeLoad())},this),0)}else this.iframeLoad()},this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var t=this.iframeDoc();return t.documentElement&&t.removeChild(t.documentElement),t},iframeAddCss:function(e){e=e||this.opts.css,this.isString(e)&&this.$frame.contents().find("head").append('<link rel="stylesheet" href="'+e+'" />'),t.isArray(e)&&t.each(e,t.proxy(function(t,e){this.iframeAddCss(e)},this))},iframeLoad:function(){this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$editor.html()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderStart:function(e){return this.isEmpty(e)&&(this.$element.attr("placeholder")&&(this.opts.placeholder=this.$element.attr("placeholder")),""===this.opts.placeholder&&(this.opts.placeholder=!1),this.opts.placeholder!==!1)?(this.opts.focus=!1,this.$editor.one("focus.redactor_placeholder",t.proxy(this.placeholderFocus,this)),t('<span class="redactor_placeholder" data-redactor="verified">').attr("contenteditable",!1).text(this.opts.placeholder)):!1},placeholderFocus:function(){this.$editor.find("span.redactor_placeholder").remove();var t="";this.opts.linebreaks===!1&&(t=this.opts.emptyHtml),this.$editor.off("focus.redactor_placeholder"),this.$editor.html(t),this.opts.linebreaks===!1?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemove:function(){this.opts.placeholder=!1,this.$editor.find("span.redactor_placeholder").remove(),this.$editor.off("focus.redactor_placeholder")},placeholderRemoveFromCode:function(t){return t.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i,"")},shortcuts:function(t,e){this.opts.shortcuts&&(t.altKey?48===e?this.shortcutsLoadFormat(t,"p"):49===e?this.shortcutsLoadFormat(t,"h1"):50===e?this.shortcutsLoadFormat(t,"h2"):51===e?this.shortcutsLoadFormat(t,"h3"):52===e?this.shortcutsLoadFormat(t,"h4"):53===e?this.shortcutsLoadFormat(t,"h5"):54===e&&this.shortcutsLoadFormat(t,"h6"):77===e?this.shortcutsLoad(t,"removeFormat"):66===e?this.shortcutsLoad(t,"bold"):73===e?this.shortcutsLoad(t,"italic"):74===e?this.shortcutsLoad(t,"insertunorderedlist"):75===e?this.shortcutsLoad(t,"insertorderedlist"):72===e?this.shortcutsLoad(t,"superscript"):76===e&&this.shortcutsLoad(t,"subscript"))},shortcutsLoad:function(t,e){t.preventDefault(),this.execCommand(e,!1)},shortcutsLoadFormat:function(t,e){t.preventDefault(),this.formatBlocks(e)},focus:function(){this.browser("opera")?this.$editor.focus():this.window.setTimeout(t.proxy(this.focusSet,this,!0),1)},focusEnd:function(){this.focusSet()},focusSet:function(t){this.$editor.focus();var e=this.getRange();e.selectNodeContents(this.$editor[0]),e.collapse(t||!1);var i=this.getSelection();i.removeAllRanges(),i.addRange(e)},toggle:function(t){this.opts.visual?this.toggleCode(t):this.toggleVisual()},toggleVisual:function(){var t=this.$source.hide().val();"undefined"!=typeof this.modified&&(this.modified=this.cleanRemoveSpaces(this.modified,!1)!==this.cleanRemoveSpaces(t,!1)),this.modified&&(this.opts.fullpage&&""===t?this.setFullpageOnInit(t):(this.set(t),this.opts.fullpage&&this.buildBindKeyboard())),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr("contenteditable",!0),this.$source.off("keydown.redactor-textarea-indenting"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive("html"),this.opts.visual=!0},toggleCode:function(t){t!==!1&&this.selectionSave();var e=null;this.opts.iframe?(e=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr("contenteditable"),this.$frame.hide()):(e=this.$editor.innerHeight(),this.$editor.hide());var i=this.$source.val();""!==i&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(i)),this.modified=i,this.$source.height(e).show().focus(),this.$source.on("keydown.redactor-textarea-indenting",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive("html"),this.opts.visual=!1},textareaIndenting:function(e){if(9===e.keyCode){var i=t(this),n=i.get(0).selectionStart;return i.val(i.val().substring(0,n)+"	"+i.val().substring(i.get(0).selectionEnd)),i.get(0).selectionStart=i.get(0).selectionEnd=n+1,!1}},autosave:function(){var e=!1,i=this.get(),n="";n=1==this.opts.autosaveFormdata?this.$source.closest("form").serialize():this.$source.attr("name")+"="+escape(encodeURIComponent(i)),this.autosaveInterval=setInterval(t.proxy(function(){e!==i&&t.ajax({url:this.opts.autosave,type:"post",data:n,success:t.proxy(function(t){this.callback("autosave",!1,t),e=i},this)})},this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var e=this.opts.buttons.indexOf("html"),i=this.opts.buttons[e+1];this.opts.buttons.splice(e,1),"|"===i&&this.opts.buttons.splice(e,1)}if(t.extend(this.opts.toolbar,this.opts.buttonsCustom),t.each(this.opts.buttonsAdd,t.proxy(function(t,e){this.opts.buttons.push(e)},this)),this.opts.toolbar&&t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e){"-1"==t.inArray(e,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[e]},this)),0===this.opts.buttons.length)return!1;if(this.airEnable(),this.$toolbar=t("<ul>").addClass("redactor_toolbar").attr("id","redactor_toolbar_"+this.uuid),this.opts.air?(this.$air=t('<div class="redactor_air">').attr("id","redactor_air_"+this.uuid).hide(),this.$air.append(this.$toolbar),t("body").append(this.$air)):this.opts.toolbarExternal?t(this.opts.toolbarExternal).html(this.$toolbar):this.$box.prepend(this.$toolbar),t.each(this.opts.buttons,t.proxy(function(e,i){if("|"===i)this.$toolbar.append(t(this.opts.buttonSeparator));else if(this.opts.toolbar[i]){var n=this.opts.toolbar[i];if(this.opts.fileUpload===!1&&"file"===i)return!0;this.$toolbar.append(t("<li>").append(this.buttonBuild(i,n)))}},this)),this.$toolbar.find("a").attr("tabindex","-1"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),t(this.opts.toolbarFixedTarget).on("scroll.redactor",t.proxy(this.toolbarObserveScroll,this))),this.opts.activeButtons){var n=t.proxy(this.buttonActiveObserver,this);this.$editor.on("mouseup.redactor keyup.redactor",n)}},toolbarObserveScroll:function(){var e=t(this.opts.toolbarFixedTarget).scrollTop(),i=this.$box.offset().top,n=0,s=i+this.$box.height()+40;if(e>i){var o="100%";this.opts.toolbarFixedBox&&(n=this.$box.offset().left,o=this.$box.innerWidth(),this.$toolbar.addClass("toolbar_fixed_box")),this.toolbarFixed=!0,this.$toolbar.css({position:"fixed",width:o,zIndex:1005,top:this.opts.toolbarFixedTopOffset+"px",left:n}),s>e?this.$toolbar.css("visibility","visible"):this.$toolbar.css("visibility","hidden")}else this.toolbarFixed=!1,this.$toolbar.css({position:"relative",width:"auto",top:0,left:n}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass("toolbar_fixed_box")},airEnable:function(){this.opts.air&&this.$editor.on("mouseup.redactor keyup.redactor",this,t.proxy(function(e){var i=this.getSelectionText();if("mouseup"===e.type&&""!=i&&this.airShow(e),"keyup"===e.type&&e.shiftKey&&""!=i){var n=t(this.getElement(this.getSelection().focusNode)),s=n.offset();s.height=n.height(),this.airShow(s,!0)}},this))},airShow:function(e,i){if(this.opts.air){var n,s;if(t(".redactor_air").hide(),i)n=e.left,s=e.top+e.height+14,this.opts.iframe&&(s+=this.$box.position().top-t(this.document).scrollTop(),n+=this.$box.position().left);else{var o=this.$air.innerWidth();n=e.clientX,t(this.document).width()<n+o&&(n-=o),s=e.clientY+14,this.opts.iframe?(s+=this.$box.position().top,n+=this.$box.position().left):s+=t(this.document).scrollTop()}this.$air.css({left:n+"px",top:s+"px"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var e=t.proxy(function(e){t(e).on("mousedown.redactor",t.proxy(function(i){0===t(i.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),t(e).off(i))},this)).on("keydown.redactor",t.proxy(function(i){i.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),t(e).off(i)},this))},this);e(document),this.opts.iframe&&e(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var e=t.proxy(function(e){t(e).on("mousemove.redactor",t.proxy(function(i){0===t(i.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),t(e).off(i))},this))},this);e(document),this.opts.iframe&&e(this.document)}},dropdownBuild:function(e,i){t.each(i,t.proxy(function(i,n){n.className||(n.className="");var s;"separator"===n.name?s=t('<a class="redactor_separator_drop">'):(s=t('<a href="#" class="'+n.className+" redactor_dropdown_"+i+'">'+n.title+"</a>"),s.on("click",t.proxy(function(t){t.preventDefault&&t.preventDefault(),this.browser("msie")&&(t.returnValue=!1),n.callback&&n.callback.call(this,i,s,n,t),n.exec&&this.execCommand(n.exec,i),n.func&&this[n.func](i),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)},this))),e.append(s)},this))},dropdownShow:function(e,i){if(!this.opts.visual)return e.preventDefault(),!1;var n=this.$toolbar.find(".redactor_dropdown_box_"+i),s=this.buttonGet(i);if(s.hasClass("dropact"))this.dropdownHideAll();else{this.dropdownHideAll(),this.buttonActive(i),s.addClass("dropact");var o=s.position();this.toolbarFixed&&(o=s.offset());var a=n.width();o.left+a>t(document).width()&&(o.left-=a);var r=o.left+"px",l=29,c="absolute",h=l+"px";this.opts.toolbarFixed&&this.toolbarFixed?c="fixed":this.opts.air||(h=o.top+l+"px"),n.css({position:c,left:r,top:h}).show()}var d=t.proxy(function(t){this.dropdownHide(t,n)},this);t(document).one("click",d),this.$editor.one("click",d),e.stopPropagation(),this.$editor.focus()},dropdownHideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),t(".redactor_dropdown").hide()},dropdownHide:function(e,i){t(e.target).hasClass("dropact")||(i.removeClass("dropact"),this.dropdownHideAll())},buttonBuild:function(e,i){var n=t('<a href="javascript:;" title="'+i.title+'" tabindex="-1" class="redactor_btn redactor_btn_'+e+'"></a>');if(n.on("click",t.proxy(function(t){return t.preventDefault&&t.preventDefault(),this.browser("msie")&&(t.returnValue=!1),n.hasClass("redactor_button_disabled")?!1:(this.isFocused()!==!1||i.exec||this.$editor.focus(),i.exec?(this.$editor.focus(),this.execCommand(i.exec,e),this.airBindMousemoveHide()):i.func&&"show"!==i.func?(this[i.func](e),this.airBindMousemoveHide()):i.callback?(i.callback.call(this,e,n,i,t),this.airBindMousemoveHide()):i.dropdown&&this.dropdownShow(t,e),void this.buttonActiveObserver(!1,e))},this)),i.dropdown){var s=t('<div class="redactor_dropdown redactor_dropdown_box_'+e+'" style="display: none;">');s.appendTo(this.$toolbar),this.dropdownBuild(s,i.dropdown)}return n},buttonGet:function(e){return this.opts.toolbar?t(this.$toolbar.find("a.redactor_btn_"+e)):!1},buttonActiveToggle:function(t){var e=this.buttonGet(t);e.hasClass("redactor_act")?e.removeClass("redactor_act"):e.addClass("redactor_act")},buttonActive:function(t){this.buttonGet(t).addClass("redactor_act")},buttonInactive:function(t){this.buttonGet(t).removeClass("redactor_act")},buttonInactiveAll:function(e){t.each(this.opts.toolbar,t.proxy(function(t){t!=e&&this.buttonInactive(t)},this))},buttonActiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").removeClass("redactor_button_disabled")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").addClass("redactor_button_disabled")},buttonChangeIcon:function(t,e){this.buttonGet(t).addClass("redactor_btn_"+e)},buttonRemoveIcon:function(t,e){this.buttonGet(t).removeClass("redactor_btn_"+e)},buttonAddSeparator:function(){this.$toolbar.append(t(this.opts.buttonSeparator))},buttonAddSeparatorAfter:function(e){this.buttonGet(e).parent().after(t(this.opts.buttonSeparator))},buttonAddSeparatorBefore:function(e){this.buttonGet(e).parent().before(t(this.opts.buttonSeparator))},buttonRemoveSeparatorAfter:function(t){this.buttonGet(t).parent().next().remove()},buttonRemoveSeparatorBefore:function(t){this.buttonGet(t).parent().prev().remove()},buttonSetRight:function(t){this.opts.toolbar&&this.buttonGet(t).parent().addClass("redactor_btn_right")},buttonSetLeft:function(t){this.opts.toolbar&&this.buttonGet(t).parent().removeClass("redactor_btn_right")},buttonAdd:function(e,i,n,s){if(this.opts.toolbar){var o=this.buttonBuild(e,{title:i,callback:n,dropdown:s});this.$toolbar.append(t("<li>").append(o))}},buttonAddFirst:function(e,i,n,s){if(this.opts.toolbar){var o=this.buttonBuild(e,{title:i,callback:n,dropdown:s});this.$toolbar.prepend(t("<li>").append(o))}},buttonAddAfter:function(e,i,n,s,o){if(this.opts.toolbar){var a=this.buttonBuild(i,{title:n,callback:s,dropdown:o}),r=this.buttonGet(e);0!==r.size()?r.parent().after(t("<li>").append(a)):this.$toolbar.append(t("<li>").append(a))}},buttonAddBefore:function(e,i,n,s,o){if(this.opts.toolbar){var a=this.buttonBuild(i,{title:n,callback:s,dropdown:o}),r=this.buttonGet(e);0!==r.size()?r.parent().before(t("<li>").append(a)):this.$toolbar.append(t("<li>").append(a))}},buttonRemove:function(t,e){var i=this.buttonGet(t);e&&i.parent().next().remove(),i.parent().removeClass("redactor_btn_right"),i.remove()},buttonActiveObserver:function(e,i){var n=this.getParent();if(this.buttonInactiveAll(i),e===!1&&"html"!==i)return void(-1!=t.inArray(i,this.opts.activeButtons)&&this.buttonActiveToggle(i));this.$toolbar.find("a.redactor_dropdown_link").text(n&&"A"===n.tagName?this.opts.curLang.link_edit:this.opts.curLang.link_insert),this.opts.activeButtonsAdd&&(t.each(this.opts.activeButtonsAdd,t.proxy(function(t,e){this.opts.activeButtons.push(e)},this)),t.extend(this.opts.activeButtonsStates,this.opts.activeButtonsAdd)),t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){0!=t(n).closest(e,this.$editor.get()[0]).length&&this.buttonActive(i)},this));var s=t(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(s.length){var o=s.css("text-align");switch(o){case"right":this.buttonActive("alignright");break;case"center":this.buttonActive("aligncenter");break;case"justify":this.buttonActive("justify");break;default:this.buttonActive("alignleft")}}},execPasteFrag:function(t){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount){range=e.getRangeAt(0),range.deleteContents();var i=document.createElement("div");i.innerHTML=t;for(var n,s,o=document.createDocumentFragment();n=i.firstChild;)s=o.appendChild(n);{o.firstChild}range.insertNode(o),s&&(range=range.cloneRange(),range.setStartAfter(s),range.collapse(!0),e.removeAllRanges(),e.addRange(range))}},exec:function(t,e,i){"formatblock"===t&&this.browser("msie")&&(e="<"+e+">"),"inserthtml"===t&&this.browser("msie")?this.isIe11()?this.execPasteFrag(e):(this.$editor.focus(),this.document.selection.createRange().pasteHTML(e)):this.document.execCommand(t,!1,e),i!==!1&&this.sync(),this.callback("execCommand",t,e)},execCommand:function(t,e,i){return this.opts.visual?"inserthtml"===t?(this.insertHtml(e,i),void this.callback("execCommand",t,e)):this.currentOrParentIs("PRE")&&!this.opts.formattingPre?!1:"insertunorderedlist"===t||"insertorderedlist"===t?this.execLists(t,e):"unlink"===t?this.execUnlink(t,e):(this.exec(t,e,i),void("inserthorizontalrule"===t&&this.$editor.find("hr").removeAttr("id"))):(this.$source.focus(),!1)},execUnlink:function(e,i){this.bufferSet();var n=this.currentOrParentIs("A");return n?(t(n).replaceWith(t(n).text()),this.sync(),void this.callback("execCommand",e,i)):void 0},execLists:function(e,i){this.bufferSet();var n=this.getParent(),s=t(n).closest("ol, ul"),o=!1;if(s.length){o=!0;var a=s[0].tagName;("insertunorderedlist"===e&&"OL"===a||"insertorderedlist"===e&&"UL"===a)&&(o=!1)}if(this.selectionSave(),o){var r=this.getNodes(),l=this.getBlocks(r);"undefined"!=typeof r[0]&&r.length>1&&3==r[0].nodeType&&l.unshift(this.getBlock());var c="",h="";t.each(l,t.proxy(function(e,i){if("LI"==i.tagName){var n=t(i),s=n.clone();s.find("ul","ol").remove(),c+=this.opts.linebreaks===!1?this.outerHtml(t("<p>").append(s.contents())):s.html()+"<br>",0==e?(n.addClass("redactor-replaced").empty(),h=this.outerHtml(n)):n.remove()}},this)),html=this.$editor.html().replace(h,"</"+a+">"+c+"<"+a+">"),this.$editor.html(html),this.$editor.find(a+":empty").remove()}else{var d=this.getParent();this.document.execCommand(e);var n=this.getParent(),s=t(n).closest("ol, ul");if(d&&"TD"==d.tagName&&s.wrapAll("<td>"),s.length){var u=s.children().first();if(""==t.trim(t(u).text())){var p=t('<span id="selection-marker-1"></span>');t(u).prepend(p)}(this.browser("msie")||this.browser("mozilla"))&&"LI"!==n.tagName&&t(n).replaceWith(t(n).html());var f=s.parent();this.isParentRedactor(f)&&this.nodeTestBlocks(f[0])&&f.replaceWith(f.contents())}this.browser("mozilla")&&this.$editor.focus()}this.selectionRestore(),t(p).remove(),this.sync(),this.callback("execCommand",e,i)},indentingIndent:function(){this.indentingStart("indent")},indentingOutdent:function(){this.indentingStart("outdent")},indentingStart:function(e){if(this.bufferSet(),"indent"===e){var i=this.getBlock();if(this.selectionSave(),i&&"LI"==i.tagName){var n=this.getParent(),s=t(n).closest("ol, ul"),o=s[0].tagName,a=this.getBlocks();t.each(a,function(e,i){if("LI"==i.tagName){var n=t(i).prev();if(0!=n.size()&&"LI"==n[0].tagName){var s=n.children("ul, ol");0==s.size()?n.append(t("<"+o+">").append(i)):s.append(i)}}})}else if(i===!1&&this.opts.linebreaks===!0){this.exec("formatBlock","blockquote");var r=this.getBlock(),i=t('<div data-tagblock="">').html(t(r).html());t(r).replaceWith(i);var l=this.normalize(t(i).css("margin-left"))+this.opts.indentValue;t(i).css("margin-left",l+"px")}else{var c=this.getBlocks();t.each(c,t.proxy(function(e,i){var n=!1;if("TD"!==i.tagName){n=-1!==t.inArray(i.tagName,this.opts.alignmentTags)?t(i):t(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var s=this.normalize(n.css("margin-left"))+this.opts.indentValue;n.css("margin-left",s+"px")}},this))}this.selectionRestore()}else{this.selectionSave();var i=this.getBlock();if(i&&"LI"==i.tagName){var a=this.getBlocks(),h=0;this.insideOutdent(i,h,a)}else{var c=this.getBlocks();t.each(c,t.proxy(function(e,i){var n=!1;n=-1!==t.inArray(i.tagName,this.opts.alignmentTags)?t(i):t(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var s=this.normalize(n.css("margin-left"))-this.opts.indentValue;0>=s?this.opts.linebreaks===!0&&"undefined"!=typeof n.data("tagblock")?n.replaceWith(n.html()):(n.css("margin-left",""),this.removeEmptyAttr(n,"style")):n.css("margin-left",s+"px")},this))}this.selectionRestore()}this.sync()},insideOutdent:function(e,i,n){if(e&&"LI"==e.tagName){var s=t(e).parent().parent();0!=s.size()&&"LI"==s[0].tagName?s.after(e):"undefined"!=typeof n[i]?(e=n[i],i++,this.insideOutdent(e,i,n)):this.execCommand("insertunorderedlist")}},alignmentLeft:function(){this.alignmentSet("","JustifyLeft")},alignmentRight:function(){this.alignmentSet("right","JustifyRight")},alignmentCenter:function(){this.alignmentSet("center","JustifyCenter")},alignmentJustify:function(){this.alignmentSet("justify","JustifyFull")},alignmentSet:function(e,i){if(this.bufferSet(),this.oldIE())return this.document.execCommand(i,!1,!1),!0;this.selectionSave();var n=this.getBlock();if(!n&&this.opts.linebreaks){this.exec("formatBlock","blockquote");var s=this.getBlock(),n=t('<div data-tagblock="">').html(t(s).html());t(s).replaceWith(n),t(n).css("text-align",e),this.removeEmptyAttr(n,"style"),""==e&&"undefined"!=typeof t(n).data("tagblock")&&t(n).replaceWith(t(n).html())}else{var o=this.getBlocks();t.each(o,t.proxy(function(i,n){var s=!1;s=-1!==t.inArray(n.tagName,this.opts.alignmentTags)?t(n):t(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]),s&&(s.css("text-align",e),this.removeEmptyAttr(s,"style"))},this))}this.selectionRestore(),this.sync()},cleanEmpty:function(t){var e=this.placeholderStart(t);return e!==!1?e:(this.opts.linebreaks===!1&&(""===t?t=this.opts.emptyHtml:-1!==t.search(/^<hr\s?\/?>$/gi)&&(t="<hr>"+this.opts.emptyHtml)),t)},cleanConverters:function(t){return this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>")),this.opts.paragraphy&&(t=this.cleanParagraphy(t)),t},cleanConvertProtected:function(t){return this.opts.templateVars&&(t=t.replace(/\{\{(.*?)\}\}/gi,"<!-- template double $1 -->"),t=t.replace(/\{(.*?)\}/gi,"<!-- template $1 -->")),t=t.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi,'<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>'),t=t.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi,'<section$1 style="display: none;" rel="redactor-style-tag">$2</section>'),t=t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>'),t=this.opts.phpTags?t.replace(/<\?php([\w\W]*?)\?>/gi,'<section style="display: none;" rel="redactor-php-tag">$1</section>'):t.replace(/<\?php([\w\W]*?)\?>/gi,"")},cleanReConvertProtected:function(t){return this.opts.templateVars&&(t=t.replace(/<!-- template double (.*?) -->/gi,"{{$1}}"),t=t.replace(/<!-- template (.*?) -->/gi,"{$1}")),t=t.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi,'<script$1 type="text/javascript">$2</script>'),t=t.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi,"<style$1>$2</style>"),t=t.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>"),this.opts.phpTags&&(t=t.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi,"<?php\r\n$1\r\n?>")),t},cleanRemoveSpaces:function(e,i){if(i!==!1){var i=[],n=e.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);if(null===n&&(n=[]),this.opts.phpTags){var s=e.match(/<\?php([\w\W]*?)\?>/gi);s&&(n=t.merge(n,s))}n&&t.each(n,function(t,n){e=e.replace(n,"buffer_"+t),i.push(n)})}return e=e.replace(/\n/g," "),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g," "),e=e.replace(/[\s\n]*$/g," "),e=e.replace(/>\s{2,}</g,"> <"),e=this.cleanReplacer(e,i),e=e.replace(/\n\n/g,"\n")},cleanReplacer:function(e,i){return i===!1?e:(t.each(i,function(t,i){e=e.replace("buffer_"+t,i)}),e)},cleanRemoveEmptyTags:function(t){t=t.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),t=t.replace(/[\u200B-\u200D\uFEFF]/g,"");var e=["<b>\\s*</b>","<b>&nbsp;</b>","<em>\\s*</em>"],i=["<pre></pre>","<blockquote>\\s*</blockquote>","<dd></dd>","<dt></dt>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<p>\\s*</p>","<p></p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"];i=this.opts.removeEmptyTags?i.concat(e):e;for(var n=i.length,s=0;n>s;++s)t=t.replace(new RegExp(i[s],"gi"),"");return t},cleanParagraphy:function(e){function i(t,i,n){return e.replace(new RegExp(t,i),n)}if(e=t.trim(e),this.opts.linebreaks===!0)return e;if(""===e||"<p></p>"===e)return this.opts.emptyHtml;e+="\n";var n=[],s=e.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);s||(s=[]);var o=e.match(/<!--([\w\W]*?)-->/gi);if(o&&(s=t.merge(s,o)),this.opts.phpTags){var a=e.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);a&&(s=t.merge(s,a))}s&&t.each(s,function(t,i){n[t]=i,e=e.replace(i,"{replace"+t+"}\n")}),e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n");var r="(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";e=i("(<"+r+"[^>]*>)","gi","\n$1"),e=i("(</"+r+">)","gi","$1\n\n"),e=i("\r\n","g","\n"),e=i("\r","g","\n"),e=i("/\n\n+/","g","\n\n");var l=e.split(new RegExp("\ns*\n","g"),-1);e="";for(var c in l)l.hasOwnProperty(c)&&(-1==l[c].search("{replace")?(l[c]=l[c].replace(/<p>\n\t<\/p>/gi,""),l[c]=l[c].replace(/<p><\/p>/gi,""),""!=l[c]&&(e+="<p>"+l[c].replace(/^\n+|\n+$/g,"")+"</p>")):e+=l[c]);return e=i("<p>s*</p>","gi",""),e=i("<p>([^<]+)</(div|address|form)>","gi","<p>$1</p></$2>"),e=i("<p>s*(</?"+r+"[^>]*>)s*</p>","gi","$1"),e=i("<p>(<li.+?)</p>","gi","$1"),e=i("<p>s*(</?"+r+"[^>]*>)","gi","$1"),e=i("(</?"+r+"[^>]*>)s*</p>","gi","$1"),e=i("(</?"+r+"[^>]*>)s*<br />","gi","$1"),e=i("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","gi","$1"),e=i("\n</p>","gi","</p>"),e=i("<li><p>","gi","<li>"),e=i("</p></li>","gi","</li>"),e=i("</li><p>","gi","</li>"),e=i("<p>	?\n?<p>","gi","<p>"),e=i("</dt><p>","gi","</dt>"),e=i("</dd><p>","gi","</dd>"),e=i("<br></p></blockquote>","gi","</blockquote>"),e=i("<p>	*</p>","gi",""),t.each(n,function(t,i){e=e.replace("{replace"+t+"}",i)}),t.trim(e)},cleanConvertInlineTags:function(t,e){var i="strong";"b"===this.opts.boldTag&&(i="b");var n="em";return"i"===this.opts.italicTag&&(n="i"),t=t.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi,"<"+n+">$1</"+n+">"),t=t.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi,"<"+i+">$1</"+i+">"),t="strong"===this.opts.boldTag?t.replace(/<b>([\w\W]*?)<\/b>/gi,"<strong>$1</strong>"):t.replace(/<strong>([\w\W]*?)<\/strong>/gi,"<b>$1</b>"),t="em"===this.opts.italicTag?t.replace(/<i>([\w\W]*?)<\/i>/gi,"<em>$1</em>"):t.replace(/<em>([\w\W]*?)<\/em>/gi,"<i>$1</i>"),t=e!==!0?t.replace(/<strike>([\w\W]*?)<\/strike>/gi,"<del>$1</del>"):t.replace(/<del>([\w\W]*?)<\/del>/gi,"<strike>$1</strike>")},cleanStripTags:function(e){if(""==e||"undefined"==typeof e)return e;var i=!1;this.opts.allowedTags!==!1&&(i=!0);var n=i===!0?this.opts.allowedTags:this.opts.deniedTags,s=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e=e.replace(s,function(e,s){return i===!0?t.inArray(s.toLowerCase(),n)>"-1"?e:"":t.inArray(s.toLowerCase(),n)>"-1"?"":e}),e=this.cleanConvertInlineTags(e)},cleanSavePreCode:function(e,i){var n=e.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);
return null!==n&&t.each(n,t.proxy(function(t,n){var s=n.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);s[3]=s[3].replace(/&nbsp;/g," "),i!==!1&&(s[3]=this.cleanEncodeEntities(s[3])),s[3]=s[3].replace(/\$/g,"&#36;"),e=e.replace(n,"<"+s[1]+s[2]+">"+s[3]+"</"+s[1]+">")},this)),e},cleanEncodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanUnverified:function(){var e=this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");e.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color","").css("line-height",""),e.filter('[style*="background-color: transparent;"]').css("background-color",""),e.css("line-height",""),t.each(e,t.proxy(function(t,e){this.removeEmptyAttr(e,"style")},this)),this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap()},cleanHtml:function(t){var e=0,i=t.length,n=0,s=null,o=null,a="",r="",l="";for(this.cleanlevel=0;i>e;e++){if(n=e,-1==t.substr(e).indexOf("<"))return r+=t.substr(e),this.cleanFinish(r);for(;i>n&&"<"!=t.charAt(n);)n++;for(e!=n&&(l=t.substr(e,n-e),l.match(/^\s{2,}$/g)||("\n"==r.charAt(r.length-1)?r+=this.cleanGetTabs():"\n"==l.charAt(0)&&(r+="\n"+this.cleanGetTabs(),l=l.replace(/^\s+/,"")),r+=l),l.match(/\n/)&&(r+="\n"+this.cleanGetTabs())),s=n;i>n&&">"!=t.charAt(n);)n++;a=t.substr(s,n-s),e=n;var c;if("!--"==a.substr(1,3)){if(!a.match(/--$/)){for(;"-->"!=t.substr(n,3);)n++;n+=2,a=t.substr(s,n-s),e=n}"\n"!=r.charAt(r.length-1)&&(r+="\n"),r+=this.cleanGetTabs(),r+=a+">\n"}else"!"==a[1]?r=this.placeTag(a+">",r):"?"==a[1]?r+=a+">\n":(c=a.match(/^<(script|style|pre)/i))?(c[1]=c[1].toLowerCase(),a=this.cleanTag(a),r=this.placeTag(a,r),o=String(t.substr(e+1)).toLowerCase().indexOf("</"+c[1]),o&&(l=t.substr(e+1,o),e+=o,r+=l)):(a=this.cleanTag(a),r=this.placeTag(a,r))}return this.cleanFinish(r)},cleanGetTabs:function(){for(var t="",e=0;e<this.cleanlevel;e++)t+="	";return t},cleanFinish:function(t){return t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/,""),t=t.replace(/[\s\n]*$/,""),t=t.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.cleanlevel=0,t},cleanTag:function(t){var e="";t=t.replace(/\n/g," "),t=t.replace(/\s{2,}/g," "),t=t.replace(/^\s+|\s+$/g," ");var i="";t.match(/\/$/)&&(i="/",t=t.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)n[2]?e+=n[1].toLowerCase()+"="+n[2]:n[1]&&(e+=n[1].toLowerCase()),e+=" ",t=t.substr(n[0].length);return e.replace(/\s*$/,"")+i+">"},placeTag:function(t,e){var i=t.match(this.cleannewLevel);return(t.match(this.cleanlineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"==t.charAt(1)&&this.cleanlevel--,"\n"==e.charAt(e.length-1)&&(e+=this.cleanGetTabs()),i&&"/"!=t.charAt(1)&&this.cleanlevel++,e+=t,(t.match(this.cleanlineAfter)||t.match(this.cleannewLevel))&&(e=e.replace(/ *$/,""),e+="\n"),e},formatEmpty:function(e){var i=t.trim(this.$editor.html());if(this.opts.linebreaks)""==i&&(e.preventDefault(),this.$editor.html(""),this.focus());else{i=i.replace(/<br\s?\/?>/i,"");var n=i.replace(/<p>\s?<\/p>/gi,"");if(""===i||""===n){e.preventDefault();var s=t(this.opts.emptyHtml).get(0);this.$editor.html(s),this.focus()}}this.sync()},formatBlocks:function(e){this.bufferSet();var i=this.getBlocks();this.selectionSave(),t.each(i,t.proxy(function(i,n){if("LI"!==n.tagName){var s=t(n).parent();if("p"===e){if("P"===n.tagName&&0!=s.size()&&"BLOCKQUOTE"===s[0].tagName||"BLOCKQUOTE"===n.tagName)return void this.formatQuote();if(this.opts.linebreaks)return;this.formatBlock(e,n)}else this.formatBlock(e,n)}},this)),this.selectionRestore(),this.sync()},formatBlock:function(e,i){if(i===!1&&(i=this.getBlock()),i===!1)return this.opts.linebreaks===!0&&this.execCommand("formatblock",e),!0;var n="";if("pre"!==e?n=t(i).contents():(n=t(i).html(),""===t.trim(n)&&(n='<span id="selection-marker-1"></span>')),"PRE"===i.tagName&&(e="p"),this.opts.linebreaks===!0&&"p"===e)t(i).replaceWith(t("<div>").append(n).html()+"<br>");else{var s=this.getParent(),o=t("<"+e+">").append(n);t(i).replaceWith(o),s&&"TD"==s.tagName&&t(o).wrapAll("<td>")}},formatChangeTag:function(e,i,n){n!==!1&&this.selectionSave();var s=t("<"+i+"/>");return t(e).replaceWith(function(){return s.append(t(this).contents())}),n!==!1&&this.selectionRestore(),s},formatQuote:function(){if(this.bufferSet(),this.opts.linebreaks===!1){this.selectionSave();var e=this.getBlocks(),i=!1,n=e.length;if(e){var s="",o="",a=!1,r=!0;if(t.each(e,function(t,e){"P"!==e.tagName&&(r=!1)}),t.each(e,t.proxy(function(l,c){if("BLOCKQUOTE"===c.tagName)this.formatBlock("p",c,!1);else if("P"===c.tagName)if(i=t(c).parent(),"BLOCKQUOTE"==i[0].tagName){var h=t(i).children("p").size();1==h?t(i).replaceWith(c):h==n?(a="blockquote",s+=this.outerHtml(c)):(a="html",s+=this.outerHtml(c),0==l?(t(c).addClass("redactor-replaced").empty(),o=this.outerHtml(c)):t(c).remove())}else r===!1||1==e.length?this.formatBlock("blockquote",c,!1):(a="paragraphs",s+=this.outerHtml(c));else"LI"!==c.tagName&&this.formatBlock("blockquote",c,!1)},this)),a)if("paragraphs"==a)t(e[0]).replaceWith("<blockquote>"+s+"</blockquote>"),t(e).remove();else if("blockquote"==a)t(i).replaceWith(s);else if("html"==a){var l=this.$editor.html().replace(o,"</blockquote>"+s+"<blockquote>");this.$editor.html(l),this.$editor.find("blockquote").each(function(){""==t.trim(t(this).html())&&t(this).remove()})}}this.selectionRestore()}else{var c=this.getBlock();if("BLOCKQUOTE"===c.tagName){this.selectionSave();var l=t.trim(t(c).html()),h=t.trim(this.getSelectionHtml());if(l=l.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi,""),l==h)t(c).replaceWith(t(c).html()+"<br>");else{this.inlineFormat("tmp");var d=this.$editor.find("tmp");d.empty();var u=this.$editor.html().replace("<tmp></tmp>",'</blockquote><span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"+h+"<blockquote>");this.$editor.html(u),d.remove(),this.$editor.find("blockquote").each(function(){""==t.trim(t(this).html())&&t(this).remove()})}this.selectionRestore(),this.$editor.find("span#selection-marker-1").attr("id",!1)}else{var p=this.selectionWrap("blockquote"),l=t(p).html(),f=["ul","ol","table","tr","tbody","thead","tfoot","dl"];t.each(f,function(t,e){l=l.replace(new RegExp("<"+e+"(.*?)>","gi"),""),l=l.replace(new RegExp("</"+e+">","gi"),"")});var m=this.opts.blockLevelElements;m.push("td"),t.each(m,function(t,e){l=l.replace(new RegExp("<"+e+"(.*?)>","gi"),""),l=l.replace(new RegExp("</"+e+">","gi"),"<br>")}),t(p).html(l),this.selectionElement(p);var g=t(p).next();0!=g.size()&&"BR"===g[0].tagName&&g.remove()}}this.sync()},blockRemoveAttr:function(e){var i=this.getBlocks();t(i).removeAttr(e),this.sync()},blockSetAttr:function(e,i){var n=this.getBlocks();t(n).attr(e,i),this.sync()},blockRemoveStyle:function(e){var i=this.getBlocks();t(i).css(e,""),this.removeEmptyAttr(i,"style"),this.sync()},blockSetStyle:function(e,i){var n=this.getBlocks();t(n).css(e,i),this.sync()},blockRemoveClass:function(e){var i=this.getBlocks();t(i).removeClass(e),this.removeEmptyAttr(i,"class"),this.sync()},blockSetClass:function(e){var i=this.getBlocks();t(i).addClass(e),this.sync()},inlineRemoveClass:function(e){this.selectionSave(),this.inlineEachNodes(function(i){t(i).removeClass(e),this.removeEmptyAttr(i,"class")}),this.selectionRestore(),this.sync()},inlineSetClass:function(e){var i=this.getCurrent();t(i).hasClass(e)||this.inlineMethods("addClass",e)},inlineRemoveStyle:function(e){this.selectionSave(),this.inlineEachNodes(function(i){t(i).css(e,""),this.removeEmptyAttr(i,"style")}),this.selectionRestore(),this.sync()},inlineSetStyle:function(t,e){this.inlineMethods("css",t,e)},inlineRemoveAttr:function(e){this.selectionSave();var i=this.getRange(),n=this.getElement(),s=this.getNodes();(i.collapsed||i.startContainer===i.endContainer&&n)&&(s=t(n)),t(s).removeAttr(e),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(t,e){this.inlineMethods("attr",t,e)},inlineMethods:function(e,i,n){this.bufferSet(),this.selectionSave();var s=this.getRange(),o=this.getElement();if(!s.collapsed&&s.startContainer!==s.endContainer||!o||this.nodeTestBlocks(o)){this.document.execCommand("fontSize",!1,4);var a=this.$editor.find("font");t.each(a,t.proxy(function(t,s){this.inlineSetMethods(e,s,i,n)},this))}else t(o)[e](i,n);this.selectionRestore(),this.sync()},inlineSetMethods:function(e,i,n,s){var o,a=t(i).parent(),r=this.getSelectionText(),l=t(a).text(),c=r==l;return c&&a&&"INLINE"===a[0].tagName&&0!=a[0].attributes.length?(o=a,t(i).replaceWith(t(i).html())):(o=t("<inline>").append(t(i).contents()),t(i).replaceWith(o)),t(o)[e](n,s),o},inlineEachNodes:function(e){var i,n=this.getRange(),s=this.getElement(),o=this.getNodes();(n.collapsed||n.startContainer===n.endContainer&&s)&&(o=t(s),i=!0),t.each(o,t.proxy(function(n,s){if(!i&&"INLINE"!==s.tagName){var o=this.getSelectionText(),a=t(s).parent().text(),r=o==a;if(!r||"INLINE"!==s.parentNode.tagName||t(s.parentNode).hasClass("redactor_editor"))return;s=s.parentNode}e.call(this,s)},this))},inlineUnwrapSpan:function(){var e=this.$editor.find("inline");t.each(e,t.proxy(function(e,i){var n=t(i);void 0===n.attr("class")&&void 0===n.attr("style")&&n.contents().unwrap()},this))},inlineFormat:function(e){this.selectionSave(),this.document.execCommand("fontSize",!1,4);var i,n=this.$editor.find("font");t.each(n,function(n,s){var o=t("<"+e+"/>").append(t(s).contents());t(s).replaceWith(o),i=o}),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(e){this.selectionSave();var i=e.toUpperCase(),n=this.getNodes(),s=t(this.getParent()).parent();t.each(n,function(t,e){e.tagName===i&&this.inlineRemoveFormatReplace(e)}),s&&s[0].tagName===i&&this.inlineRemoveFormatReplace(s),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(e){t(e).replaceWith(t(e).contents())},insertHtml:function(e,i){var n=this.getCurrent(),s=n.parentNode;this.$editor.focus(),this.bufferSet();var o=t("<div>").append(e);e=o.html(),e=this.cleanRemoveEmptyTags(e),o=t("<div>").append(e);var a=this.getBlock();if(1==o.contents().length){var r=o.contents()[0].tagName;("P"!=r&&r==a.tagName||"PRE"==r)&&(e=o.text(),o=t("<div>").append(e))}!this.opts.linebreaks&&1==o.contents().length&&3==o.contents()[0].nodeType&&(this.getRangeSelectedNodes().length>2||!n||"BODY"==n.tagName&&!s||"HTML"==s.tagName)&&(e="<p>"+e+"</p>"),e=this.setSpansVerifiedHtml(e),o.contents().length>1&&a||o.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article")?this.browser("msie")?this.isIe11()?this.execPasteFrag(e):this.document.selection.createRange().pasteHTML(e):this.document.execCommand("inserthtml",!1,e):this.insertHtmlAdvanced(e,!1),this.selectall&&this.window.setTimeout(t.proxy(function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())},this),1),this.observeStart(),this.setNonEditable(),i!==!1&&this.sync()},insertHtmlAdvanced:function(t,e){t=this.setSpansVerifiedHtml(t);var i=this.getSelection();if(i.getRangeAt&&i.rangeCount){var n=i.getRangeAt(0);n.deleteContents();var s=this.document.createElement("div");s.innerHTML=t;for(var o,a,r=this.document.createDocumentFragment();o=s.firstChild;)a=r.appendChild(o);n.insertNode(r),a&&(n=n.cloneRange(),n.setStartAfter(a),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}e!==!1&&this.sync()},insertBeforeCursor:function(e){e=this.setSpansVerifiedHtml(e);var i=t(e),n=document.createElement("span");n.innerHTML="\u200b";var s=this.getRange();s.insertNode(n),s.insertNode(i[0]),s.collapse(!1);var o=this.getSelection();o.removeAllRanges(),o.addRange(s),this.sync()},insertText:function(e){var i=t(e);i.length&&(e=i.text()),this.$editor.focus(),this.browser("msie")&&!this.isIe11()?this.document.selection.createRange().pasteHTML(e):this.document.execCommand("inserthtml",!1,e),this.sync()},insertNode:function(e){if(e=e[0]||e,"SPAN"==e.tagName){var i="inline",n=e.outerHTML,s=new RegExp("<"+e.tagName,"i"),o=n.replace(s,"<"+i);s=new RegExp("</"+e.tagName,"i"),o=o.replace(s,"</"+i),e=t(o)[0]}var a=this.getSelection();a.getRangeAt&&a.rangeCount&&(range=a.getRangeAt(0),range.deleteContents(),range.insertNode(e),range.setEndAfter(e),range.setStartAfter(e),a.removeAllRanges(),a.addRange(range))},insertNodeToCaretPositionFromPoint:function(t,e){var i,n=t.clientX,s=t.clientY;if(this.document.caretPositionFromPoint){var o=this.document.caretPositionFromPoint(n,s);i=this.getRange(),i.setStart(o.offsetNode,o.offset),i.collapse(!0),i.insertNode(e)}else if(this.document.caretRangeFromPoint)i=this.document.caretRangeFromPoint(n,s),i.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){i=this.document.body.createTextRange(),i.moveToPoint(n,s);var a=i.duplicate();a.moveToPoint(n,s),i.setEndPoint("EndToEnd",a),i.select()}},insertAfterLastElement:function(e,i){if("undefined"!=typeof i&&(e=i),this.isEndOfElement()){if(this.opts.linebreaks){var n=t("<div>").append(t.trim(this.$editor.html())).contents();if(this.outerHtml(n.last()[0])!=this.outerHtml(e))return!1}else if(this.$editor.contents().last()[0]!==e)return!1;this.insertingAfterLastElement(e)}},insertingAfterLastElement:function(e){if(this.bufferSet(),this.opts.linebreaks===!1){var i=t(this.opts.emptyHtml);t(e).after(i),this.selectionStart(i)}else{var i=t('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];t(e).after(i),t(i).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find("span#selection-marker-1").removeAttr("id")}},insertLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()},insertDoubleLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br><br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()},replaceLineBreak:function(e){var i=t("<br>"+this.opts.invisibleSpace);t(e).replaceWith(i),this.selectionStart(i)},pasteClean:function(e){if(e=this.callback("pasteBefore",!1,e),this.browser("msie")){var i=t.trim(e);0==i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(e=e.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2"))}if(this.opts.pastePlainText){var i=this.document.createElement("div");return e=e.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n"),i.innerHTML=e,e=i.textContent||i.innerText,e=t.trim(e),e=e.replace("\n","<br>"),e=this.cleanParagraphy(e),this.pasteInsert(e),!1}if(this.currentOrParentIs("PRE"))return e=this.pastePre(e),this.pasteInsert(e),!0;if(e=e.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),e=e.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),e=e.replace(/\xb7/g,""),e=e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),e=e.replace(/(&nbsp;){2,}/gi,"&nbsp;"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),e=this.cleanStripTags(e),e=e.replace(/<td><\/td>/gi,"[td]"),e=e.replace(/<td>&nbsp;<\/td>/gi,"[td]"),e=e.replace(/<td><br><\/td>/gi,"[td]"),e=e.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td colspan="$2"]$4[/td]'),e=e.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td rowspan="$2"]$4[/td]'),e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),e=e.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),e=e.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),e=e.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),e=e.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),e=e.replace(/<param(.*?)>/gi,"[param$1]"),e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/ class="(.*?)"/gi,""),e=e.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),e=e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi,"$1"),e=e.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td colspan="$1">$2</td>'),e=e.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td rowspan="$1">$2</td>'),e=e.replace(/\[td\]/gi,"<td>&nbsp;</td>"),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),e=e.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),e=e.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),e=e.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),e=e.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),e=e.replace(/\[param(.*?)\]/gi,"<param$1>"),e=e.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"),e=e.replace(/<\/div><p>/gi,"<p>"),e=e.replace(/<\/p><\/div>/gi,"</p>")),e=this.currentOrParentIs("LI")?e.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br>"):this.cleanParagraphy(e),e=e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),e=e.replace(/<img>/gi,""),e=e.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),e=e.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),e=e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),this.opts.linebreaks===!0&&(e=e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),e=e.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),e=e.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi,"<td$1>$3</td>"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),this.pasteClipboardMozilla=!1,this.browser("mozilla")){if(this.opts.clipboardUpload){var n=e.match(/<img src="data:image(.*?)"(.*?)>/gi);if(null!==n){this.pasteClipboardMozilla=n;for(k in n){var s=n[k].replace("<img",'<img data-mozilla-paste-image="'+k+'" ');e=e.replace(n[k],s)}}}for(;/<br>$/gi.test(e);)e=e.replace(/<br>$/gi,"")}for(e=e.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>");/<font>([\w\W]*?)<\/font>/gi.test(e);)e=e.replace(/<font>([\w\W]*?)<\/font>/gi,"$1");e=e.replace(/<p>\n?<li>/gi,"<li>"),this.browser("msie")&&!this.isIe11()&&(e=e.replace(/\n/g,"")),this.pasteInsert(e)},pastePre:function(t){t=t.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");var e=this.document.createElement("div");return e.innerHTML=t,this.cleanEncodeEntities(e.textContent||e.innerText)},pasteInsert:function(e){this.selectall&&(this.$editor.html(this.opts.linebreaks?"":this.opts.emptyHtml),this.$editor.focus()),e=this.callback("pasteAfter",!1,e),this.insertHtml(e),this.selectall=!1,setTimeout(t.proxy(function(){this.rtePaste=!1,this.browser("mozilla")&&this.$editor.find("p:empty").remove(),this.pasteClipboardMozilla!==!1&&this.pasteClipboardUploadMozilla()},this),100),this.opts.autoresize&&this.fullscreen!==!0?t(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardUploadMozilla:function(){var e=this.$editor.find("img[data-mozilla-paste-image]");t.each(e,t.proxy(function(e,i){var n=t(i),s=i.src.split(","),o=s[1],a=s[0].split(";")[0].split(":")[1];t.post(this.opts.clipboardUploadUrl,{contentType:a,data:o},t.proxy(function(e){var i="string"==typeof e?t.parseJSON(e):e;n.attr("src",i.filelink),n.removeAttr("data-mozilla-paste-image"),this.sync(),this.callback("imageUpload",n,i)},this))},this))},pasteClipboardUpload:function(e){var i=e.target.result,n=i.split(","),s=n[1],o=n[0].split(";")[0].split(":")[1];this.opts.clipboardUpload?t.post(this.opts.clipboardUploadUrl,{contentType:o,data:s},t.proxy(function(e){var i="string"==typeof e?t.parseJSON(e):e,n='<img src="'+i.filelink+'" id="clipboard-image-marker" />';this.execCommand("inserthtml",n,!1);var s=t(this.$editor.find("img#clipboard-image-marker"));s.length?s.removeAttr("id"):s=!1,this.sync(),s&&this.callback("imageUpload",s,i)},this)):this.insertHtml('<img src="'+i+'" />')},bufferSet:function(t){void 0!==t?this.opts.buffer.push(t):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRemoveMarkers("buffer"))},bufferUndo:function(){return 0===this.opts.buffer.length?void this.$editor.focus():(this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),void setTimeout(t.proxy(this.observeStart,this),100))},bufferRedo:function(){return 0===this.opts.rebuffer.length?(this.$editor.focus(),!1):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),void setTimeout(t.proxy(this.observeStart,this),4))},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find("a").on("click",t.proxy(this.linkObserver,this)),this.$editor.on("click.redactor",t.proxy(function(t){this.linkObserverTooltipClose(t)},this)),t(document).on("click.redactor",t.proxy(function(t){this.linkObserverTooltipClose(t)},this))},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(t.proxy(function(e,i){this.browser("msie")&&t(i).attr("unselectable","on"),this.imageResize(i)},this))},linkObserver:function(e){var i=t(e.target),n=i.offset();if(this.opts.iframe){var s=this.$frame.offset();n.top=s.top+(n.top-t(this.document).scrollTop()),n.left+=s.left}var o=t('<span class="redactor-link-tooltip"></span>'),a=i.attr("href");a.length>24&&(a=a.substring(0,24)+"...");var r=t('<a href="'+i.attr("href")+'" target="_blank">'+a+"</a>").on("click",t.proxy(function(){this.linkObserverTooltipClose(!1)},this)),l=t('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",t.proxy(function(t){t.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)},this)),c=t('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",t.proxy(function(t){t.preventDefault(),this.execCommand("unlink"),this.linkObserverTooltipClose(!1)},this));o.append(r),o.append(" | "),o.append(l),o.append(" | "),o.append(c),o.css({top:n.top+20+"px",left:n.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(o)},linkObserverTooltipClose:function(e){return e!==!1&&"A"==e.target.tagName?!1:void t(".redactor-link-tooltip").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return this.document.createRange()},selectionElement:function(t){this.setCaret(t)},selectionStart:function(t){this.selectionSet(t[0]||t,0,null,0)},selectionEnd:function(t){this.selectionSet(t[0]||t,1,null,1)},selectionSet:function(t,e,i,n){null==i&&(i=t),null==n&&(n=e);var s=this.getSelection();if(s){var o=this.getRange();o.setStart(t,e),o.setEnd(i,n);try{s.removeAllRanges()}catch(a){}s.addRange(o)}},selectionWrap:function(t){t=t.toLowerCase();var e=this.getBlock();if(e){var i=this.formatChangeTag(e,t);return this.sync(),i}var n=this.getSelection(),s=n.getRangeAt(0),i=document.createElement(t);return i.appendChild(s.extractContents()),s.insertNode(i),this.selectionElement(i),i},selectionAll:function(){var t=this.getRange();t.selectNodeContents(this.$editor[0]);var e=this.getSelection();e.removeAllRanges(),e.addRange(t)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(e){var i=0,n=this.getRange(),s=n.cloneRange();return s.selectNodeContents(e),s.setEnd(n.endContainer,n.endOffset),i=t.trim(s.toString()).length},getCaretOffsetRange:function(){return new s(this.getSelection().getRangeAt(0))},setCaret:function(t,e,i){"undefined"==typeof i&&(i=e),t=t[0]||t;var n=this.getRange();n.selectNodeContents(t);var s,o=this.getTextNodesIn(t),a=!1,r=0;if(1==o.length&&e)n.setStart(o[0],e),n.setEnd(o[0],i);else for(var l,c=0;l=o[c++];){if(s=r+l.length,!a&&e>=r&&(s>e||e==s&&c<o.length)&&(n.setStart(l,e-r),a=!0),a&&s>=i){n.setEnd(l,i-r);break}r=s}var h=this.getSelection();h.removeAllRanges(),h.addRange(n)},getTextNodesIn:function(t){var e=[];if(3==t.nodeType)e.push(t);else for(var i=t.childNodes,n=0,s=i.length;s>n;++n)e.push.apply(e,this.getTextNodesIn(i[n]));return e},getCurrent:function(){var t=!1,e=this.getSelection();return e&&e.rangeCount>0&&(t=e.getRangeAt(0).startContainer),this.isParentRedactor(t)},getParent:function(e){return e=e||this.getCurrent(),e?this.isParentRedactor(t(e).parent()[0]):!1},getBlock:function(e){for("undefined"==typeof e&&(e=this.getCurrent());e;){if(this.nodeTestBlocks(e))return t(e).hasClass("redactor_editor")?!1:e;e=e.parentNode}return!1},getBlocks:function(e){var i=[];if("undefined"==typeof e){var n=this.getRange();if(n&&n.collapsed===!0)return[this.getBlock()];var e=this.getNodes(n)}return t.each(e,t.proxy(function(e,n){return this.opts.iframe===!1&&0==t(n).parents("div.redactor_editor").size()?!1:void(this.nodeTestBlocks(n)&&i.push(n))},this)),0===i.length&&(i=[this.getBlock()]),i},nodeTestBlocks:function(t){return 1==t.nodeType&&this.rTestBlock.test(t.nodeName)},tagTestBlock:function(t){return this.rTestBlock.test(t)},getNodes:function(e,i){if("undefined"==typeof e||0==e)var e=this.getRange();if(e&&e.collapsed===!0){if("undefined"==typeof i&&this.tagTestBlock(i)){var n=this.getBlock();return n.tagName==i?[n]:[]}return[this.getCurrent()]}var s=[],o=[],a=this.document.getSelection();if(a.isCollapsed||(s=this.getRangeSelectedNodes(a.getRangeAt(0))),t.each(s,t.proxy(function(e,n){return this.opts.iframe===!1&&0==t(n).parents("div.redactor_editor").size()?!1:void("undefined"==typeof i?""!=t.trim(n.textContent)&&o.push(n):n.tagName==i&&o.push(n))},this)),0==o.length){if("undefined"==typeof i&&this.tagTestBlock(i)){var n=this.getBlock();return n.tagName==i?o.push(n):[]}o.push(this.getCurrent())}var r=o[o.length-1];return this.nodeTestBlocks(r)&&(o=o.slice(0,-1)),o},getElement:function(e){for(e||(e=this.getCurrent());e;){if(1==e.nodeType)return t(e).hasClass("redactor_editor")?!1:e;e=e.parentNode}return!1},getRangeSelectedNodes:function(t){t=t||this.getRange();var e=t.startContainer,i=t.endContainer;if(e==i)return[e];for(var n=[];e&&e!=i;)n.push(e=this.nextNode(e));for(e=t.startContainer;e&&e!=t.commonAncestorContainer;)n.unshift(e),e=e.parentNode;return n},nextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var t="",e=this.getSelection();if(e.rangeCount){for(var i=this.document.createElement("div"),n=e.rangeCount,s=0;n>s;++s)i.appendChild(e.getRangeAt(s).cloneContents());t=i.innerHTML}return this.syncClean(t)},selectionSave:function(){this.isFocused()||this.$editor.focus(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(e){if(e){var i=t('<span id="selection-marker-1" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0],n=t('<span id="selection-marker-2" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];e.collapsed===!0?this.selectionSetMarker(e,i,!0):(this.selectionSetMarker(e,i,!0),this.selectionSetMarker(e,n,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(t,e,i){var n=t.cloneRange();n.collapse(i),n.insertNode(e),n.detach()},selectionRestore:function(t,e){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{t===!0&&this.savedSel&&this.$editor.html(this.savedSel);var i=this.$editor.find("span#selection-marker-1"),n=this.$editor.find("span#selection-marker-2");this.browser("mozilla")?this.$editor.focus():this.isFocused()||this.$editor.focus(),0!=i.length&&0!=n.length?this.selectionSet(i[0],0,n[0],0):0!=i.length&&this.selectionSet(i[0],0,null,0),e!==!1&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(){this.opts.rangy?rangy.removeMarkers(this.savedSel):t.each(this.$editor.find("span.redactor-selection-marker"),function(){var e=t.trim(t(this).html().replace(/[^\u0000-\u1C7F]/g,""));""==e?t(this).remove():t(this).removeAttr("class").removeAttr("id")})},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,t.proxy(function(){t("#redactor_insert_table_btn").click(t.proxy(this.tableInsert,this)),setTimeout(function(){t("#redactor_table_rows").focus()},200)},this))},tableInsert:function(){var e,i,n,s,o=t("#redactor_table_rows").val(),a=t("#redactor_table_columns").val(),r=t("<div></div>"),l=Math.floor(99999*Math.random()),c=t('<table id="table'+l+'"><tbody></tbody></table>');for(e=0;o>e;e++){for(i=t("<tr></tr>"),n=0;a>n;n++)s=t("<td>"+this.opts.invisibleSpace+"</td>"),0===e&&0===n&&s.append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),t(i).append(s);c.append(i)}r.append(c);var h=r.html();this.modalClose(),this.selectionRestore();var d=this.getBlock()||this.getCurrent();d&&"BODY"!=d.tagName?t(d).after(h):this.insertHtmlAdvanced(h,!1),this.selectionRestore();var u=this.$editor.find("#table"+l);this.buttonActiveObserver(),u.find("span#selection-marker-1").remove(),u.removeAttr("id"),this.sync()},tableDeleteTable:function(){var e=t(this.getParent()).closest("table");return this.isParentRedactor(e)?0==e.size()?!1:(this.bufferSet(),e.remove(),void this.sync()):!1},tableDeleteRow:function(){var e=t(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;if(0==e.size())return!1;this.bufferSet();var i=t(this.getParent()).closest("tr"),n=i.prev().length?i.prev():i.next();if(n.length){var s=n.children("td").first();s.length&&s.prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>")}i.remove(),this.selectionRestore(),this.sync()},tableDeleteColumn:function(){var e=t(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;if(0==e.size())return!1;this.bufferSet();var i=t(this.getParent()).closest("td"),n=i.get(0).cellIndex;e.find("tr").each(t.proxy(function(e,i){var s=0>n-1?n+1:n-1;0===e&&t(i).find("td").eq(s).prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),t(i).find("td").eq(n).remove()},this)),this.selectionRestore(),this.sync()},tableAddHead:function(){var e=t(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;if(0==e.size())return!1;if(this.bufferSet(),0!==e.find("thead").size())this.tableDeleteHead();else{var i=e.find("tr").first().clone();i.find("td").html(this.opts.invisibleSpace),$thead=t("<thead></thead>"),$thead.append(i),e.prepend($thead),this.sync()}},tableDeleteHead:function(){var e=t(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;var i=e.find("thead");return 0==i.size()?!1:(this.bufferSet(),i.remove(),void this.sync())},tableAddRowAbove:function(){this.tableAddRow("before")},tableAddRowBelow:function(){this.tableAddRow("after")},tableAddColumnLeft:function(){this.tableAddColumn("before")},tableAddColumnRight:function(){this.tableAddColumn("after")},tableAddRow:function(e){var i=t(this.getParent()).closest("table");if(!this.isParentRedactor(i))return!1;if(0==i.size())return!1;this.bufferSet();var n=t(this.getParent()).closest("tr"),s=n.clone();s.find("td").html(this.opts.invisibleSpace),"after"===e?n.after(s):n.before(s),this.sync()},tableAddColumn:function(e){var i=t(this.getParent()).closest("table");if(!this.isParentRedactor(i))return!1;if(0==i.size())return!1;this.bufferSet();var n=0,s=t(this.getParent()).closest("tr"),o=t(this.getParent()).closest("td");s.find("td").each(t.proxy(function(e,i){t(i)[0]===o[0]&&(n=e)},this)),i.find("tr").each(t.proxy(function(i,s){var o=t(s).find("td").eq(n),a=o.clone();a.html(this.opts.invisibleSpace),"after"===e?o.after(a):o.before(a)},this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,t.proxy(function(){t("#redactor_insert_video_btn").click(t.proxy(this.videoInsert,this)),setTimeout(function(){t("#redactor_insert_video_area").focus()
},200)},this))},videoInsert:function(){var e=t("#redactor_insert_video_area").val();e=this.cleanStripTags(e),this.selectionRestore();var i=this.getBlock()||this.getCurrent();i?t(i).after(e):this.insertHtmlAdvanced(e,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var e=t.proxy(function(){this.insert_link_node=!1;var e=this.getSelection(),i="",n="",s="",o=this.getParent(),a=t(o).parent().get(0);a&&"A"===a.tagName&&(o=a),o&&"A"===o.tagName?(i=o.href,n=t(o).text(),s=o.target,this.insert_link_node=o):n=e.toString(),t(".redactor_link_text").val(n);var r=self.location.href.replace(/\/$/i,""),l=i.replace(r,"");if(this.opts.linkProtocol===!1){var c=new RegExp("^(http|ftp|https)://"+self.location.host,"i");l=l.replace(c,"")}var h=t("#redactor_tabs").find("a");this.opts.linkEmail===!1&&h.eq(1).remove(),this.opts.linkAnchor===!1&&h.eq(2).remove(),this.opts.linkEmail===!1&&this.opts.linkAnchor===!1?(t("#redactor_tabs").remove(),t("#redactor_link_url").val(l)):0===i.search("mailto:")?(this.modalSetTab.call(this,2),t("#redactor_tab_selected").val(2),t("#redactor_link_mailto").val(i.replace("mailto:",""))):0===l.search(/^#/gi)?(this.modalSetTab.call(this,3),t("#redactor_tab_selected").val(3),t("#redactor_link_anchor").val(l.replace(/^#/gi,""))):t("#redactor_link_url").val(l),"_blank"===s&&t("#redactor_link_blank").prop("checked",!0),t("#redactor_insert_link_btn").click(t.proxy(this.linkProcess,this)),setTimeout(function(){t("#redactor_link_url").focus()},200)},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,e)},linkProcess:function(){var e=t("#redactor_tab_selected").val(),i="",n="",s="",o="";if("1"===e){i=t("#redactor_link_url").val(),n=t("#redactor_link_url_text").val(),t("#redactor_link_blank").prop("checked")&&(s=' target="_blank"',o="_blank");var a="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}",r=new RegExp("^(http|ftp|https)://"+a,"i"),l=new RegExp("^"+a,"i");-1==i.search(r)&&0==i.search(l)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+i)}else"2"===e?(i="mailto:"+t("#redactor_link_mailto").val(),n=t("#redactor_link_mailto_text").val()):"3"===e&&(i="#"+t("#redactor_link_anchor").val(),n=t("#redactor_link_anchor_text").val());n=n.replace(/<|>/g,""),this.linkInsert('<a href="'+i+'"'+s+">"+n+"</a>",t.trim(n),i,o)},linkInsert:function(e,i,n,s){if(this.selectionRestore(),""!==i)if(this.insert_link_node)this.bufferSet(),t(this.insert_link_node).text(i).attr("href",n),""!==s?t(this.insert_link_node).attr("target",s):t(this.insert_link_node).removeAttr("target"),this.sync();else{var o=t(e).addClass("redactor-added-link");this.exec("inserthtml",this.outerHtml(o),!1),this.$editor.find("a.redactor-added-link").removeAttr("style").removeClass("redactor-added-link").each(function(){""==this.className&&t(this).removeAttr("class")}),this.sync()}setTimeout(t.proxy(function(){this.opts.observeLinks&&this.observeLinks()},this),5),this.modalClose()},fileShow:function(){this.selectionSave();var e=t.proxy(function(){var e=this.getSelection(),i="";i=this.oldIE()?e.text:e.toString(),t("#redactor_filename").val(i),this.isMobile()||this.draguploadInit("#redactor_file",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:t.proxy(this.fileCallback,this),error:t.proxy(function(t,e){this.callback("fileUploadError",e)},this),uploadParam:this.opts.fileUploadParam}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:t.proxy(this.fileCallback,this),error:t.proxy(function(t,e){this.callback("fileUploadError",e)},this)})},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,e)},fileCallback:function(e){if(this.selectionRestore(),e!==!1){var i=t("#redactor_filename").val();""===i&&(i=e.filename);var n='<a href="'+e.filelink+'" id="filelink-marker">'+i+"</a>";this.browser("webkit")&&this.window.chrome&&(n+="&nbsp;"),this.execCommand("inserthtml",n,!1);var s=t(this.$editor.find("a#filelink-marker"));0!=s.size()?s.removeAttr("id"):s=!1,this.sync(),this.callback("fileUpload",s,e)}this.modalClose()},imageShow:function(){this.selectionSave();var e=t.proxy(function(){if(this.opts.imageGetJson?t.getJSON(this.opts.imageGetJson,t.proxy(function(e){var i={},n=0;t.each(e,t.proxy(function(t,e){"undefined"!=typeof e.folder&&(n++,i[e.folder]=n)},this));var s=!1;if(t.each(e,t.proxy(function(e,n){var o="";"undefined"!=typeof n.title&&(o=n.title);var a=0;t.isEmptyObject(i)||"undefined"==typeof n.folder||(a=i[n.folder],s===!1&&(s=".redactorfolder"+a));var r=t('<img src="'+n.thumb+'" class="redactorfolder redactorfolder'+a+'" rel="'+n.image+'" title="'+o+'" />');t("#redactor_image_box").append(r),t(r).click(t.proxy(this.imageThumbClick,this))},this)),!t.isEmptyObject(i)){t(".redactorfolder").hide(),t(s).show();var o=function(e){t(".redactorfolder").hide(),t(".redactorfolder"+t(e.target).val()).show()},a=t('<select id="redactor_image_box_select">');t.each(i,function(e,i){a.append(t('<option value="'+i+'">'+e+"</option>"))}),t("#redactor_image_box").before(a),a.change(o)}},this)):t("#redactor_tabs").find("a").eq(1).remove(),this.opts.imageUpload||this.opts.s3)this.isMobile()||this.opts.s3!==!1||t("#redactor_file").length&&this.draguploadInit("#redactor_file",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:t.proxy(this.imageCallback,this),error:t.proxy(function(t,e){this.callback("imageUploadError",e)},this),uploadParam:this.opts.imageUploadParam}),this.opts.s3===!1?this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:t.proxy(this.imageCallback,this),error:t.proxy(function(t,e){this.callback("imageUploadError",e)},this)}):t("#redactor_file").on("change.redactor",t.proxy(this.s3handleFileSelect,this));else if(t(".redactor_tab").hide(),this.opts.imageGetJson){var e=t("#redactor_tabs").find("a");e.eq(0).remove(),e.eq(1).addClass("redactor_tabs_act"),t("#redactor_tab2").show()}else t("#redactor_tabs").remove(),t("#redactor_tab3").show();t("#redactor_upload_btn").click(t.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout(function(){t("#redactor_file_link").focus()},200)},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,e)},imageEdit:function(e){var i=e,n=i.parent().parent(),s=t.proxy(function(){t("#redactor_file_alt").val(i.attr("alt")),t("#redactor_image_edit_src").attr("href",i.attr("src")),t("#redactor_form_image_align").val(i.css("float")),"A"===t(n).get(0).tagName&&(t("#redactor_file_link").val(t(n).attr("href")),"_blank"==t(n).attr("target")&&t("#redactor_link_blank").prop("checked",!0)),t("#redactor_image_delete_btn").click(t.proxy(function(){this.imageRemove(i)},this)),t("#redactorSaveBtn").click(t.proxy(function(){this.imageSave(i)},this))},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,s)},imageRemove:function(e){var i=t(e).parent();t(e).remove(),i.length&&"P"===i[0].tagName&&(this.$editor.focus(),this.selectionStart(i)),this.callback("imageDelete",e),this.modalClose(),this.sync()},imageSave:function(e){var i=t(e),n=i.parent();i.attr("alt",t("#redactor_file_alt").val());var s=t("#redactor_form_image_align").val();if("left"===s)this.imageMargin="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0",i.css({"float":"left",margin:this.imageMargin});else if("right"===s)this.imageMargin="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin,i.css({"float":"right",margin:this.imageMargin});else{this.imageMargin="0px";var o=i.closest("#redactor-image-box");0!=o.size()&&o.css({"float":"",margin:""}),i.css({"float":"",margin:""})}var a=t.trim(t("#redactor_file_link").val());if(""!==a){var r=!1;if(t("#redactor_link_blank").prop("checked")&&(r=!0),"A"!==n.get(0).tagName){var l=t('<a href="'+a+'">'+this.outerHtml(e)+"</a>");r&&l.attr("target","_blank"),i.replaceWith(l)}else n.attr("href",a),r?n.attr("target","_blank"):n.removeAttr("target")}else"A"===n.get(0).tagName&&n.replaceWith(this.outerHtml(e));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(e){if(e!==!1&&0!=t(e.target).parent().size()&&"redactor-image-box"===t(e.target).parent()[0].id)return!1;var i=this.$editor.find("#redactor-image-box");return 0==i.size()?!1:(this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove(),"0px"!=this.imageMargin&&(i.find("img").css("margin",this.imageMargin),i.css("margin",""),this.imageMargin="0px"),i.find("img").css("opacity",""),i.replaceWith(function(){return t(this).contents()}),t(document).off("click.redactor-image-resize-hide"),this.$editor.off("click.redactor-image-resize-hide"),this.$editor.off("keydown.redactor-image-delete"),void this.sync())},imageResize:function(e){var i=t(e);i.on("mousedown",t.proxy(function(){this.imageResizeHide(!1)},this)),i.on("dragstart",t.proxy(function(){this.$editor.on("drop.redactor-image-inside-drop",t.proxy(function(){setTimeout(t.proxy(function(){this.observeImages(),this.$editor.off("drop.redactor-image-inside-drop"),this.sync()},this),1)},this))},this)),i.on("click",t.proxy(function(){if(0!=this.$editor.find("#redactor-image-box").size())return!1;var e,n,s=i.width()/i.height(),o=20,a=this.imageResizeControls(i),r=!1;a.on("mousedown",function(t){r=!0,t.preventDefault(),s=i.width()/i.height(),e=Math.round(t.pageX-i.eq(0).offset().left),n=Math.round(t.pageY-i.eq(0).offset().top)}),t(this.document.body).on("mousemove",t.proxy(function(t){if(r){var a=(Math.round(t.pageX-i.eq(0).offset().left)-e,Math.round(t.pageY-i.eq(0).offset().top)-n),l=i.height(),c=parseInt(l,10)+a,h=Math.round(c*s);h>o&&(i.width(h),this.imageEditter.css(100>h?{marginTop:"-7px",marginLeft:"-13px",fontSize:"9px",padding:"3px 5px"}:{marginTop:"-11px",marginLeft:"-18px",fontSize:"11px",padding:"7px 10px"})),e=Math.round(t.pageX-i.eq(0).offset().left),n=Math.round(t.pageY-i.eq(0).offset().top),this.sync()}},this)).on("mouseup",function(){r=!1}),this.$editor.on("keydown.redactor-image-delete",t.proxy(function(t){var e=t.which;(this.keyCode.BACKSPACE==e||this.keyCode.DELETE==e)&&(this.bufferSet(),this.imageResizeHide(!1),this.imageRemove(i))},this)),t(document).on("click.redactor-image-resize-hide",t.proxy(this.imageResizeHide,this)),this.$editor.on("click.redactor-image-resize-hide",t.proxy(this.imageResizeHide,this))},this))},imageResizeControls:function(e){var i=t('<span id="redactor-image-box" data-redactor="verified">');i.css({position:"relative",display:"inline-block",lineHeight:0,outline:"1px dashed rgba(0, 0, 0, .6)","float":e.css("float")}),i.attr("contenteditable",!1),this.imageMargin=e[0].style.margin,"0px"!=this.imageMargin&&(i.css("margin",this.imageMargin),e.css("margin","")),e.css("opacity",.5).after(i),this.imageEditter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.opts.curLang.edit+"</span>"),this.imageEditter.css({position:"absolute",zIndex:2,top:"50%",left:"50%",marginTop:"-11px",marginLeft:"-18px",lineHeight:1,backgroundColor:"#000",color:"#fff",fontSize:"11px",padding:"7px 10px",cursor:"pointer"}),this.imageEditter.attr("contenteditable",!1),this.imageEditter.on("click",t.proxy(function(){this.imageEdit(e)},this)),i.append(this.imageEditter);var n=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return n.css({position:"absolute",zIndex:2,lineHeight:1,cursor:"nw-resize",bottom:"-4px",right:"-5px",border:"1px solid #fff",backgroundColor:"#000",width:"8px",height:"8px"}),n.attr("contenteditable",!1),i.append(n),i.append(e),n},imageThumbClick:function(e){var i='<img id="image-marker" src="'+t(e.target).attr("rel")+'" alt="'+t(e.target).attr("title")+'" />',n=this.getParent();this.opts.paragraphy&&0==t(n).closest("li").size()&&(i="<p>"+i+"</p>"),this.imageInsert(i,!0)},imageCallbackLink:function(){var e=t("#redactor_file_link").val();if(""!==e){var i='<img id="image-marker" src="'+e+'" />';this.opts.linebreaks===!1&&(i="<p>"+i+"</p>"),this.imageInsert(i,!0)}else this.modalClose()},imageCallback:function(t){this.imageInsert(t)},imageInsert:function(e,i){if(this.selectionRestore(),e!==!1){var n="";if(i!==!0){n='<img id="image-marker" src="'+e.filelink+'" />';var s=this.getParent();this.opts.paragraphy&&0==t(s).closest("li").size()&&(n="<p>"+n+"</p>")}else n=e;this.execCommand("inserthtml",n,!1);var o=t(this.$editor.find("img#image-marker"));o.length?o.removeAttr("id"):o=!1,this.sync(),i!==!0&&this.callback("imageUpload",o,e)}this.modalClose(),this.observeImages()},modalTemplatesInit:function(){t.extend(this.opts,{modal_file:String()+'<section><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>'+this.opts.curLang.filename+'</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="'+this.opts.fileUploadParam+'" /></div></form></section>',modal_image_edit:String()+"<section><label>"+this.opts.curLang.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+this.opts.curLang.link+'</label><input id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+"</label><label>"+this.opts.curLang.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+this.opts.curLang.none+'</option><option value="left">'+this.opts.curLang.left+'</option><option value="right">'+this.opts.curLang.right+'</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">'+this.opts.curLang._delete+'</button>&nbsp;&nbsp;&nbsp;<button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="'+this.opts.curLang.save+'" /></footer>',modal_image:String()+'<section><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">'+this.opts.curLang.upload+'</a><a href="#">'+this.opts.curLang.choose+'</a><a href="#">'+this.opts.curLang.link+'</a></div><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="'+this.opts.imageUploadParam+'" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+this.opts.curLang.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_link:String()+'<section><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">URL</a><a href="#">Email</a><a href="#">'+this.opts.curLang.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+this.opts.curLang.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_table:String()+"<section><label>"+this.opts.curLang.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+this.opts.curLang.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_video:String()+'<section><form id="redactorInsertVideoForm"><label>'+this.opts.curLang.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="'+this.opts.curLang.insert+'" /></footer>'})},modalInit:function(e,i,n,s){var o=t("#redactor_modal_overlay");o.length||(this.$overlay=o=t('<div id="redactor_modal_overlay" style="display: none;"></div>'),t("body").prepend(this.$overlay)),this.opts.modalOverlay&&o.show().on("click",t.proxy(this.modalClose,this));var a=t("#redactor_modal");a.length||(this.$modal=a=t('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>'),t("body").append(this.$modal)),t("#redactor_modal_close").on("click",t.proxy(this.modalClose,this)),this.hdlModalClose=t.proxy(function(t){return t.keyCode===this.keyCode.ESC?(this.modalClose(),!1):void 0},this),t(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),this.modalcontent=!1,0==i.indexOf("#")?(this.modalcontent=t(i),t("#redactor_modal_inner").empty().append(this.modalcontent.html()),this.modalcontent.html("")):t("#redactor_modal_inner").empty().append(i),a.find("#redactor_modal_header").html(e),"undefined"!=typeof t.fn.draggable&&(a.draggable({handle:"#redactor_modal_header"}),a.find("#redactor_modal_header").css("cursor","move"));var r=t("#redactor_tabs");if(r.length){var l=this;r.find("a").each(function(e,i){e++,t(i).on("click",function(i){if(i.preventDefault(),r.find("a").removeClass("redactor_tabs_act"),t(this).addClass("redactor_tabs_act"),t(".redactor_tab").hide(),t("#redactor_tab"+e).show(),t("#redactor_tab_selected").val(e),l.isMobile()===!1){var n=a.outerHeight();a.css("margin-top","-"+(n+10)/2+"px")}})})}a.find(".redactor_btn_modal_close").on("click",t.proxy(this.modalClose,this)),this.saveModalScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop(),this.isMobile()===!1?(a.css({position:"fixed",top:"-2000px",left:"50%",width:n+"px",marginLeft:"-"+(n+60)/2+"px"}).show(),this.modalSaveBodyOveflow=t(document.body).css("overflow"),t(document.body).css("overflow","hidden")):a.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof s&&s(),this.isMobile()===!1&&setTimeout(function(){var t=a.outerHeight();a.css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(t+10)/2+"px"})},10)},modalClose:function(){return t("#redactor_modal_close").off("click",this.modalClose),t("#redactor_modal").fadeOut("fast",t.proxy(function(){var e=t("#redactor_modal_inner");this.modalcontent!==!1&&(this.modalcontent.html(e.html()),this.modalcontent=!1),e.html(""),this.opts.modalOverlay&&t("#redactor_modal_overlay").hide().off("click",this.modalClose),t(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?t(this.document.body).scrollTop(this.saveModalScroll):this.opts.autoresize===!1&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll)},this)),this.isMobile()===!1&&t(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},modalSetTab:function(e){t(".redactor_tab").hide(),t("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(e-1).addClass("redactor_tabs_act"),t("#redactor_tab"+e).show()},s3handleFileSelect:function(t){for(var e,i=t.target.files,n=0;e=i[n];n++)this.s3uploadFile(e)},s3uploadFile:function(e){this.s3executeOnSignedUrl(e,t.proxy(function(t){this.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(e,i){var n=new XMLHttpRequest,s="?";"-1"!=this.opts.s3.search(/\?/)&&(s="&"),n.open("GET",this.opts.s3+s+"name="+e.name+"&type="+e.type,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){4==this.readyState&&200==this.status?(t("#redactor-progress").fadeIn(),i(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},n.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},s3uploadToS3:function(e,i){var n=this.s3createCORSRequest("PUT",i);n&&(n.onload=t.proxy(function(){if(200==n.status){t("#redactor-progress, #redactor-progress-drag").hide();var e=i.split("?");if(!e[0])return!1;this.selectionRestore();var s="";s='<img id="image-marker" src="'+e[0]+'" />',this.opts.paragraphy&&(s="<p>"+s+"</p>"),this.execCommand("inserthtml",s,!1);var o=t(this.$editor.find("img#image-marker"));o.length?o.removeAttr("id"):o=!1,this.sync(),this.callback("imageUpload",o,!1),this.modalClose(),this.observeImages()}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))},uploadInit:function(e,i){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},t.extend(this.uploadOptions,i);var n=t("#"+e);n.length&&"INPUT"===n[0].tagName?(this.uploadOptions.input=n,this.el=t(n[0].form)):this.el=n,this.element_action=this.el.attr("action"),this.uploadOptions.auto?t(this.uploadOptions.input).change(t.proxy(function(t){this.el.submit(function(){return!1}),this.uploadSubmit(t)},this)):this.uploadOptions.trigger&&t("#"+this.uploadOptions.trigger).click(t.proxy(this.uploadSubmit,this))},uploadSubmit:function(){t("#redactor-progress").fadeIn(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var e=this.document.createElement("div"),i='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return e.innerHTML=i,t(e).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),t("#"+this.id).load(t.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(e,i){if(this.uploadOptions.input){var n="redactorUploadForm"+this.id,s="redactorUploadFile"+this.id;this.form=t('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+i+'" name="'+n+'" id="'+n+'" enctype="multipart/form-data" />'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&t.each(this.opts.uploadFields,t.proxy(function(e,i){null!=i&&0===i.toString().indexOf("#")&&(i=t(i).val());var n=t("<input/>",{type:"hidden",name:e,value:i});t(this.form).append(n)},this));var o=this.uploadOptions.input,a=t(o).clone();t(o).attr("id",s).before(a).appendTo(this.form),t(this.form).css("position","absolute").css("top","-2000px").css("left","-2000px").appendTo("body"),this.form.submit()}else e.attr("target",i).attr("method","POST").attr("enctype","multipart/form-data").attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var e,i=t("#"+this.id)[0];if(e=i.contentDocument?i.contentDocument:i.contentWindow?i.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if(t("#redactor-progress").hide(),"undefined"!=typeof e){var n=e.body.innerHTML,s=n.match(/\{(.|\n)*\}/)[0];s=s.replace(/^\[/,""),s=s.replace(/\]$/,"");var o=t.parseJSON(s);"undefined"==typeof o.error?this.uploadOptions.success(o):(this.uploadOptions.error(this,o),this.modalClose())}else this.modalClose(),alert("Upload failed!");this.el.attr("action",this.element_action),this.el.attr("target","")},draguploadInit:function(e,i){return this.draguploadOptions=t.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},i),void 0===window.FormData?!1:(this.droparea=t('<div class="redactor_droparea"></div>'),this.dropareabox=t('<div class="redactor_dropareabox">'+this.draguploadOptions.text+"</div>"),this.dropalternative=t('<div class="redactor_dropalternative">'+this.draguploadOptions.atext+"</div>"),this.droparea.append(this.dropareabox),t(e).before(this.droparea),t(e).before(this.dropalternative),this.dropareabox.on("dragover",t.proxy(function(){return this.draguploadOndrag()},this)),this.dropareabox.on("dragleave",t.proxy(function(){return this.draguploadOndragleave()},this)),void(this.dropareabox.get(0).ondrop=t.proxy(function(t){t.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop"),this.dragUploadAjax(this.draguploadOptions.url,t.dataTransfer.files[0],!1,!1,!1,this.draguploadOptions.uploadParam)},this)))},dragUploadAjax:function(e,i,n,s,o,a){if(!n){var r=t.ajaxSettings.xhr();r.upload&&r.upload.addEventListener("progress",t.proxy(this.uploadProgress,this),!1),t.ajaxSetup({xhr:function(){return r}})}var l=new FormData;a!==!1?l.append(a,i):l.append("file",i),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&t.each(this.opts.uploadFields,t.proxy(function(e,i){null!=i&&0===i.toString().indexOf("#")&&(i=t(i).val()),l.append(e,i)},this)),t.ajax({url:e,dataType:"html",data:l,cache:!1,contentType:!1,processData:!1,type:"POST",success:t.proxy(function(e){e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var i="string"==typeof e?t.parseJSON(e):e;if(n){s.fadeOut("slow",function(){t(this).remove()});var a=t("<img>");a.attr("src",i.filelink).attr("id","drag-image-marker"),this.insertNodeToCaretPositionFromPoint(o,a[0]);var r=t(this.$editor.find("img#drag-image-marker"));r.length?r.removeAttr("id"):r=!1,this.sync(),this.observeImages(),r&&this.callback("imageUpload",r,i),"undefined"!=typeof i.error&&this.callback("imageUploadError",i)}else"undefined"==typeof i.error?this.draguploadOptions.success(i):(this.draguploadOptions.error(this,i),this.draguploadOptions.success(!1))},this)})},draguploadOndrag:function(){return this.dropareabox.addClass("hover"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass("hover"),!1},uploadProgress:function(t,e){var i=t.loaded?parseInt(t.loaded/t.total*100,10):t;this.dropareabox.text("Loading "+i+"% "+(e||""))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},normalize:function(t){return"undefined"==typeof t?0:parseInt(t.replace("px",""),10)},outerHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isEmpty:function(t){return t=t.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi,""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),""==t},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"version"==t?i[2]:"webkit"==t?"chrome"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==t:"opr"==i[1]?"webkit"==t:t==i[1]},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},getFragmentHtml:function(t){var e=t.cloneNode(!0),i=this.document.createElement("div");return i.appendChild(e),i.innerHTML},extractContent:function(){for(var t,e=this.$editor[0],i=this.document.createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i},isParentRedactor:function(e){return e?this.opts.iframe?e:0==t(e).parents("div.redactor_editor").length||t(e).hasClass("redactor_editor")?!1:e:!1},currentOrParentIs:function(t){var e=this.getParent(),i=this.getCurrent();return e&&e.tagName===t?e:i&&i.tagName===t?i:!1},isEndOfElement:function(){var e=this.getBlock(),i=this.getCaretOffset(e),n=t.trim(t(e).text()).replace(/\n\r\n/g,""),s=n.length;return i==s?!0:!1},isFocused:function(){var e,i=this.getSelection();return i&&i.rangeCount&&i.rangeCount>0&&(e=i.getRangeAt(0).startContainer),e?this.opts.iframe?this.getCaretOffsetRange().equals()?!this.$editor.is(e):!0:0!=t(e).closest("div.redactor_editor").length:!1},removeEmptyAttr:function(e,i){""==t(e).attr(i)&&t(e).removeAttr(i)},removeFromArrayByValue:function(t,e){for(var i=null;-1!==(i=t.indexOf(e));)t.splice(i,1);return t}},e.prototype.init.prototype=e.prototype,t.Redactor.fn.formatLinkify=function(e,i,n,s,o){for(var a=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,r=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,l=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,c=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,h=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,d=(this.$editor?this.$editor.get(0):this).childNodes,u=d.length;u--;){var p=d[u];if(3===p.nodeType){var f=p.nodeValue;if(s&&f){var m='<iframe width="500" height="281" src="',g='" frameborder="0" allowfullscreen></iframe>';f.match(c)?(f=f.replace(c,m+"//www.youtube.com/embed/$1"+g),t(p).after(f).remove()):f.match(h)&&(f=f.replace(h,m+"//player.vimeo.com/video/$2"+g),t(p).after(f).remove())}if(n&&f&&f.match(l)&&(f=f.replace(l,'<img src="$1">'),t(p).after(f).remove()),i&&f&&(f.match(a)||f.match(r))){var v=f.match(a)||f.match(r);v=v[0],v.length>o&&(v=v.substring(0,o)+"..."),f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(a,'$1<a href="'+e+'$2">'+t.trim(v)+"</a>$3").replace(r,'$1<a href="$2">'+t.trim(v)+"</a>$5"),t(p).after(f).remove()}}else 1!==p.nodeType||/^(a|button|textarea)$/i.test(p.tagName)||t.Redactor.fn.formatLinkify.call(p,e,i,n,s,o)}}}(jQuery),window.init_redactor=function(){var t,e=$("meta[name=csrf-token]").attr("content"),i=$("meta[name=csrf-param]").attr("content");void 0!==i&&void 0!==e&&(t=i+"="+encodeURIComponent(e)),$(".redactor").redactor({imageUpload:"/redactor_rails/pictures?"+t,imageGetJson:"/redactor_rails/pictures",path:"/assets/redactor-rails",css:"style.css"})},$(document).ready(window.init_redactor),$(window).bind("page:change",window.init_redactor),fotoramaVersion="4.6.0",function(t,e,i,n,s){"use strict";function o(t){var e="bez_"+n.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof n.easing[e]){var i=function(t,e){var i=[null,null],n=[null,null],s=[null,null],o=function(o,a){return s[a]=3*t[a],n[a]=3*(e[a]-t[a])-s[a],i[a]=1-s[a]-n[a],o*(s[a]+o*(n[a]+o*i[a]))},a=function(t){return s[0]+t*(2*n[0]+3*i[0]*t)},r=function(t){for(var e,i=t,n=0;++n<14&&(e=o(i,0)-t,!(Math.abs(e)<.001));)i-=e/a(i);return i};return function(t){return o(r(t),1)}};n.easing[e]=function(e,n,s,o,a){return o*i([t[0],t[1]],[t[2],t[3]])(n/a)+s}}return e}function a(){}function r(t,e,i){return Math.max(isNaN(e)?-1/0:e,Math.min(isNaN(i)?1/0:i,t))}function l(t){return t.match(/ma/)&&t.match(/-?\d+(?!d)/g)[t.match(/3d/)?12:4]}function c(t){return Ri?+l(t.css("transform")):+t.css("left").replace("px","")}function h(t){var e={};return Ri?e.transform="translate3d("+t+"px,0,0)":e.left=t,e}function d(t){return{"transition-duration":t+"ms"}}function u(t,e){return t=+String(t).replace(e||"px",""),isNaN(t)?s:t}function p(t){return/%$/.test(t)?u(t,"%"):s}function f(t,e){return p(t)/100*e||u(t)}function m(t){return(!isNaN(u(t))||!isNaN(u(t,"%")))&&t
}function g(t,e,i,n){return(t-(n||0))*(e+(i||0))}function v(t,e,i,n){return-Math.round(t/(e+(i||0))-(n||0))}function b(t){var e=t.data();if(!e.tEnd){var i=t[0],n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};U(i,n[yi.prefixed("transition")],function(t){e.tProp&&t.propertyName.match(e.tProp)&&e.onEndFn()}),e.tEnd=!0}}function y(t,e,i,n){var s,o=t.data();o&&(o.onEndFn=function(){s||(s=!0,clearTimeout(o.tT),i())},o.tProp=e,clearTimeout(o.tT),o.tT=setTimeout(function(){o.onEndFn()},1.5*n),b(t))}function w(t,e){if(t.length){var i=t.data();Ri?(t.css(d(0)),i.onEndFn=a,clearTimeout(i.tT)):t.stop();var n=x(e,function(){return c(t)});return t.css(h(n)),n}}function x(){for(var t,e=0,i=arguments.length;i>e&&(t=e?arguments[e]():arguments[e],"number"!=typeof t);e++);return t}function k(t,e){return Math.round(t+(e-t)/1.5)}function _(){return _.p=_.p||("https:"===i.protocol?"https://":"http://"),_.p}function C(t){var i=e.createElement("a");return i.href=t,i}function T(t,e){if("string"!=typeof t)return t;t=C(t);var i,n;if(t.host.match(/youtube\.com/)&&t.search){if(i=t.search.split("v=")[1]){var s=i.indexOf("&");-1!==s&&(i=i.substring(0,s)),n="youtube"}}else t.host.match(/youtube\.com|youtu\.be/)?(i=t.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),n="youtube"):t.host.match(/vimeo\.com/)&&(n="vimeo",i=t.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return i&&n||!e||(i=t.href,n="custom"),i?{id:i,type:n,s:t.search.replace(/^\?/,""),p:_()}:!1}function D(t,e,i){var s,o,a=t.video;return"youtube"===a.type?(o=_()+"img.youtube.com/vi/"+a.id+"/default.jpg",s=o.replace(/\/default.jpg$/,"/hqdefault.jpg"),t.thumbsReady=!0):"vimeo"===a.type?n.ajax({url:_()+"vimeo.com/api/v2/video/"+a.id+".json",dataType:"jsonp",success:function(n){t.thumbsReady=!0,$(e,{img:n[0].thumbnail_large,thumb:n[0].thumbnail_small},t.i,i)}}):t.thumbsReady=!0,{img:s,thumb:o}}function $(t,e,i,s){for(var o=0,a=t.length;a>o;o++){var r=t[o];if(r.i===i&&r.thumbsReady){var l={videoReady:!0};l[Ji]=l[tn]=l[Zi]=!1,s.splice(o,1,n.extend({},r,l,e));break}}}function S(t){function e(t,e,s){var o=t.children("img").eq(0),a=t.attr("href"),r=t.attr("src"),l=o.attr("src"),c=e.video,h=s?T(a,c===!0):!1;h?a=!1:h=c,i(t,o,n.extend(e,{video:h,img:e.img||a||r||l,thumb:e.thumb||l||r||a}))}function i(t,e,i){var s=i.thumb&&i.img!==i.thumb,o=u(i.width||t.attr("width")),a=u(i.height||t.attr("height"));n.extend(i,{width:o,height:a,thumbratio:B(i.thumbratio||u(i.thumbwidth||e&&e.attr("width")||s||o)/u(i.thumbheight||e&&e.attr("height")||s||a))})}var s=[];return t.children().each(function(){var t=n(this),o=W(n.extend(t.data(),{id:t.attr("id")}));if(t.is("a, img"))e(t,o,!0);else{if(t.is(":empty"))return;i(t,null,n.extend(o,{html:this,_html:t.html()}))}s.push(o)}),s}function E(t){return 0===t.offsetWidth&&0===t.offsetHeight}function N(t){return!n.contains(e.documentElement,t)}function A(t,e,i){t()?e():setTimeout(function(){A(t,e)},i||100)}function M(t){i.replace(i.protocol+"//"+i.host+i.pathname.replace(/^\/?/,"/")+i.search+"#"+t)}function O(t,e,i,n){var s=t.data(),o=s.measures;if(o&&(!s.l||s.l.W!==o.width||s.l.H!==o.height||s.l.r!==o.ratio||s.l.w!==e.w||s.l.h!==e.h||s.l.m!==i||s.l.p!==n)){var a=o.width,l=o.height,c=e.w/e.h,h=o.ratio>=c,d="scaledown"===i,u="contain"===i,p="cover"===i,m=G(n);h&&(d||u)||!h&&p?(a=r(e.w,0,d?a:1/0),l=a/o.ratio):(h&&p||!h&&(d||u))&&(l=r(e.h,0,d?l:1/0),a=l*o.ratio),t.css({width:Math.ceil(a),height:Math.ceil(l),left:Math.floor(f(m.x,e.w-a)),top:Math.floor(f(m.y,e.h-l))}),s.l={W:o.width,H:o.height,r:o.ratio,w:e.w,h:e.h,m:i,p:n}}return!0}function P(t,e){var i=t[0];i.styleSheet?i.styleSheet.cssText=e:t.html(e)}function I(t,e,i){return e===i?!1:e>=t?"left":t>=i?"right":"left right"}function F(t,e,i,n){if(!i)return!1;if(!isNaN(t))return t-(n?0:1);for(var s,o=0,a=e.length;a>o;o++){var r=e[o];if(r.id===t){s=o;break}}return s}function R(t,e,i){i=i||{},t.each(function(){var t,s=n(this),o=s.data();o.clickOn||(o.clickOn=!0,n.extend(ee(s,{onStart:function(e){t=e,(i.onStart||a).call(this,e)},onMove:i.onMove||a,onTouchEnd:i.onTouchEnd||a,onEnd:function(i){i.moved||e.call(this,t)}}),{noMove:!0}))})}function L(t,e){return'<div class="'+t+'">'+(e||"")+"</div>"}function H(t){for(var e=t.length;e;){var i=Math.floor(Math.random()*e--),n=t[e];t[e]=t[i],t[i]=n}return t}function j(t){return"[object Array]"==Object.prototype.toString.call(t)&&n.map(t,function(t){return n.extend({},t)})}function z(t,e,i){t.scrollLeft(e||0).scrollTop(i||0)}function W(t){if(t){var e={};return n.each(t,function(t,i){e[t.toLowerCase()]=i}),e}}function B(t){if(t){var e=+t;return isNaN(e)?(e=t.split("/"),+e[0]/+e[1]||s):e}}function U(t,e,i,n){e&&(t.addEventListener?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i))}function q(t){return!!t.getAttribute("disabled")}function Y(t){return{tabindex:-1*t+"",disabled:t}}function V(t,e){U(t,"keyup",function(i){q(t)||13==i.keyCode&&e.call(t,i)})}function K(t,e){U(t,"focus",t.onfocusin=function(i){e.call(t,i)},!0)}function Q(t,e){t.preventDefault?t.preventDefault():t.returnValue=!1,e&&t.stopPropagation&&t.stopPropagation()}function X(t){return t?">":"<"}function G(t){return t=(t+"").split(/\s+/),{x:m(t[0])||on,y:m(t[1])||on}}function J(t,e){var i=t.data(),s=Math.round(e.pos),o=function(){i.sliding=!1,(e.onEnd||a)()};"undefined"!=typeof e.overPos&&e.overPos!==e.pos&&(s=e.overPos,o=function(){J(t,n.extend({},e,{overPos:e.pos,time:Math.max(qi,e.time/2)}))});var r=n.extend(h(s),e.width&&{width:e.width});i.sliding=!0,Ri?(t.css(n.extend(d(e.time),r)),e.time>10?y(t,"transform",o,e.time):o()):t.stop().animate(r,e.time,nn,o)}function Z(t,e,i,s,o,r){var l="undefined"!=typeof r;if(l||(o.push(arguments),Array.prototype.push.call(arguments,o.length),!(o.length>1))){t=t||n(t),e=e||n(e);var c=t[0],h=e[0],d="crossfade"===s.method,u=function(){if(!u.done){u.done=!0;var t=(l||o.shift())&&o.shift();t&&Z.apply(this,t),(s.onEnd||a)(!!t)}},p=s.time/(r||1);i.removeClass(We+" "+ze),t.stop().addClass(We),e.stop().addClass(ze),d&&h&&t.fadeTo(0,0),t.fadeTo(d?p:0,1,d&&u),e.fadeTo(p,0,u),c&&d||h||u()}}function te(t){var e=(t.touches||[])[0]||t;t._x=e.pageX,t._y=e.clientY,t._now=n.now()}function ee(t,i){function s(t){return u=n(t.target),w.checked=m=g=b=!1,h||w.flow||t.touches&&t.touches.length>1||t.which>1||Ei&&Ei.type!==t.type&&Ai||(m=i.select&&u.is(i.select,y))?m:(f="touchstart"===t.type,g=u.is("a, a *",y),p=w.control,v=w.noMove||w.noSwipe||p?16:w.snap?0:4,te(t),d=Ei=t,Ni=t.type.replace(/down|start/,"move").replace(/Down/,"Move"),(i.onStart||a).call(y,t,{control:p,$target:u}),h=w.flow=!0,void((!f||w.go)&&Q(t)))}function o(t){if(t.touches&&t.touches.length>1||Wi&&!t.isPrimary||Ni!==t.type||!h)return h&&r(),void(i.onTouchEnd||a)();te(t);var e=Math.abs(t._x-d._x),n=Math.abs(t._y-d._y),s=e-n,o=(w.go||w.x||s>=0)&&!w.noSwipe,l=0>s;f&&!w.checked?(h=o)&&Q(t):(Q(t),(i.onMove||a).call(y,t,{touch:f})),!b&&Math.sqrt(Math.pow(e,2)+Math.pow(n,2))>v&&(b=!0),w.checked=w.checked||o||l}function r(t){(i.onTouchEnd||a)();var e=h;w.control=h=!1,e&&(w.flow=!1),!e||g&&!w.checked||(t&&Q(t),Ai=!0,clearTimeout(Mi),Mi=setTimeout(function(){Ai=!1},1e3),(i.onEnd||a).call(y,{moved:b,$target:u,control:p,touch:f,startEvent:d,aborted:!t||"MSPointerCancel"===t.type}))}function l(){w.flow||setTimeout(function(){w.flow=!0},10)}function c(){w.flow&&setTimeout(function(){w.flow=!1},Ui)}var h,d,u,p,f,m,g,v,b,y=t[0],w={};return Wi?(U(y,"MSPointerDown",s),U(e,"MSPointerMove",o),U(e,"MSPointerCancel",r),U(e,"MSPointerUp",r)):(U(y,"touchstart",s),U(y,"touchmove",o),U(y,"touchend",r),U(e,"touchstart",l),U(e,"touchend",c),U(e,"touchcancel",c),Oi.on("scroll",c),t.on("mousedown",s),Pi.on("mousemove",o).on("mouseup",r)),t.on("click","a",function(t){w.checked&&Q(t)}),w}function ie(t,e){function i(i,n){D=!0,c=d=i._x,g=i._now,m=[[g,c]],u=p=E.noMove||n?0:w(t,(e.getPos||a)()),(e.onStart||a).call($,i)}function s(t,e){b=E.min,y=E.max,x=E.snap,_=t.altKey,D=T=!1,C=e.control,C||S.sliding||i(t)}function o(n,s){E.noSwipe||(D||i(n),d=n._x,m.push([n._now,d]),p=u-(c-d),f=I(p,b,y),b>=p?p=k(p,b):p>=y&&(p=k(p,y)),E.noMove||(t.css(h(p)),T||(T=!0,s.touch||Wi||t.addClass(ni)),(e.onMove||a).call($,n,{pos:p,edge:f})))}function l(s){if(!E.noSwipe||!s.moved){D||i(s.startEvent,!0),s.touch||Wi||t.removeClass(ni),v=n.now();for(var o,l,c,h,f,g,w,k,C,T=v-Ui,S=null,N=qi,A=e.friction,M=m.length-1;M>=0;M--){if(o=m[M][0],l=Math.abs(o-T),null===S||c>l)S=o,h=m[M][1];else if(S===T||l>c)break;c=l}w=r(p,b,y);var O=h-d,P=O>=0,I=v-S,F=I>Ui,R=!F&&p!==u&&w===p;x&&(w=r(Math[R?P?"floor":"ceil":"round"](p/x)*x,b,y),b=y=w),R&&(x||w===p)&&(C=-(O/I),N*=r(Math.abs(C),e.timeLow,e.timeHigh),f=Math.round(p+C*N/A),x||(w=f),(!P&&f>y||P&&b>f)&&(g=P?b:y,k=f-g,x||(w=g),k=r(w+.03*k,g-50,g+50),N=Math.abs((p-k)/(C/A)))),N*=_?10:1,(e.onEnd||a).call($,n.extend(s,{moved:s.moved||F&&x,pos:p,newPos:w,overPos:k,time:N}))}}var c,d,u,p,f,m,g,v,b,y,x,_,C,T,D,$=t[0],S=t.data(),E={};return E=n.extend(ee(e.$wrap,n.extend({},e,{onStart:s,onMove:o,onEnd:l})),E)}function ne(t,e){var i,s,o,r=t[0],l={prevent:{}};return U(r,Bi,function(t){var r=t.wheelDeltaY||-1*t.deltaY||0,c=t.wheelDeltaX||-1*t.deltaX||0,h=Math.abs(c)&&!Math.abs(r),d=X(0>c),u=s===d,p=n.now(),f=Ui>p-o;s=d,o=p,h&&l.ok&&(!l.prevent[d]||i)&&(Q(t,!0),i&&u&&f||(e.shift&&(i=!0,clearTimeout(l.t),l.t=setTimeout(function(){i=!1},Yi)),(e.onEnd||a)(t,e.shift?d:c)))}),l}function se(){n.each(n.Fotorama.instances,function(t,e){e.index=t})}function oe(t){n.Fotorama.instances.push(t),se()}function ae(t){n.Fotorama.instances.splice(t.index,1),se()}var re="fotorama",le="fullscreen",ce=re+"__wrap",he=ce+"--css2",de=ce+"--css3",ue=ce+"--video",pe=ce+"--fade",fe=ce+"--slide",me=ce+"--no-controls",ge=ce+"--no-shadows",ve=ce+"--pan-y",be=ce+"--rtl",ye=ce+"--only-active",we=ce+"--no-captions",xe=ce+"--toggle-arrows",ke=re+"__stage",_e=ke+"__frame",Ce=_e+"--video",Te=ke+"__shaft",De=re+"__grab",$e=re+"__pointer",Se=re+"__arr",Ee=Se+"--disabled",Ne=Se+"--prev",Ae=Se+"--next",Me=re+"__nav",Oe=Me+"-wrap",Pe=Me+"__shaft",Ie=Me+"--dots",Fe=Me+"--thumbs",Re=Me+"__frame",Le=Re+"--dot",He=Re+"--thumb",je=re+"__fade",ze=je+"-front",We=je+"-rear",Be=re+"__shadow",Ue=Be+"s",qe=Ue+"--left",Ye=Ue+"--right",Ve=re+"__active",Ke=re+"__select",Qe=re+"--hidden",Xe=re+"--fullscreen",Ge=re+"__fullscreen-icon",Je=re+"__error",Ze=re+"__loading",ti=re+"__loaded",ei=ti+"--full",ii=ti+"--img",ni=re+"__grabbing",si=re+"__img",oi=si+"--full",ai=re+"__dot",ri=re+"__thumb",li=ri+"-border",ci=re+"__html",hi=re+"__video",di=hi+"-play",ui=hi+"-close",pi=re+"__caption",fi=re+"__caption__wrap",mi=re+"__spinner",gi='" tabindex="0" role="button',vi=n&&n.fn.jquery.split(".");if(!vi||vi[0]<1||1==vi[0]&&vi[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var bi={},yi=function(t,e,i){function n(t){v.cssText=t}function s(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var n in t){var s=t[n];if(!o(s,"-")&&v[s]!==i)return"pfx"==e?s:!0}return!1}function r(t,e,n){for(var o in t){var a=e[t[o]];if(a!==i)return n===!1?t[o]:s(a,"function")?a.bind(n||e):a}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+w.join(n+" ")+n).split(" ");return s(e,"string")||s(e,"undefined")?a(o,e):(o=(t+" "+x.join(n+" ")+n).split(" "),r(o,e,i))}var c,h,d,u="2.6.2",p={},f=e.documentElement,m="modernizr",g=e.createElement(m),v=g.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",w=y.split(" "),x=y.toLowerCase().split(" "),k={},_=[],C=_.slice,T=function(t,i,n,s){var o,a,r,l,c=e.createElement("div"),h=e.body,d=h||e.createElement("body");if(parseInt(n,10))for(;n--;)r=e.createElement("div"),r.id=s?s[n]:m+(n+1),c.appendChild(r);return o=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),c.id=m,(h?c:d).innerHTML+=o,d.appendChild(c),h||(d.style.background="",d.style.overflow="hidden",l=f.style.overflow,f.style.overflow="hidden",f.appendChild(d)),a=i(c,t),h?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),f.style.overflow=l),!!a},D={}.hasOwnProperty;d=s(D,"undefined")||s(D.call,"undefined")?function(t,e){return e in t&&s(t.constructor.prototype[e],"undefined")}:function(t,e){return D.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=C.call(arguments,1),n=function(){if(this instanceof n){var s=function(){};s.prototype=e.prototype;var o=new s,a=e.apply(o,i.concat(C.call(arguments)));return Object(a)===a?a:o}return e.apply(t,i.concat(C.call(arguments)))};return n}),k.csstransforms3d=function(){var t=!!l("perspective");return t};for(var $ in k)d(k,$)&&(h=$.toLowerCase(),p[h]=k[$](),_.push((p[h]?"":"no-")+h));return p.addTest=function(t,e){if("object"==typeof t)for(var n in t)d(t,n)&&p.addTest(n,t[n]);else{if(t=t.toLowerCase(),p[t]!==i)return p;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(e?"":"no-")+t),p[t]=e}return p},n(""),g=c=null,p._version=u,p._prefixes=b,p._domPrefixes=x,p._cssomPrefixes=w,p.testProp=function(t){return a([t])},p.testAllProps=l,p.testStyles=T,p.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},p}(t,e),wi={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},xi="webkit moz o ms khtml".split(" ");if("undefined"!=typeof e.cancelFullScreen)wi.ok=!0;else for(var ki=0,_i=xi.length;_i>ki;ki++)if(wi.prefix=xi[ki],"undefined"!=typeof e[wi.prefix+"CancelFullScreen"]){wi.ok=!0;break}wi.ok&&(wi.event=wi.prefix+"fullscreenchange",wi.is=function(){switch(this.prefix){case"":return e.fullScreen;case"webkit":return e.webkitIsFullScreen;default:return e[this.prefix+"FullScreen"]}},wi.request=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},wi.cancel=function(){return""===this.prefix?e.cancelFullScreen():e[this.prefix+"CancelFullScreen"]()});var Ci,Ti={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},Di={top:"auto",left:"auto",className:""};!function(t,e){Ci=e()}(this,function(){function t(t,i){var n,s=e.createElement(t||"div");for(n in i)s[n]=i[n];return s}function i(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,i,n){var s=["opacity",e,~~(100*t),i,n].join("-"),o=.01+i/n*100,a=Math.max(1-(1-t)/e*(100-o),t),r=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=r&&"-"+r+"-"||"";return f[s]||(m.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+a+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",m.cssRules.length),f[s]=1),s}function o(t,e){var i,n,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<p.length;n++)if(i=p[n]+e,o[i]!==s)return i;return o[e]!==s?e:void 0}function a(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function r(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]===s&&(t[n]=i[n])}return t}function l(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function c(t,e){return"string"==typeof t?t:t[e%t.length]}function h(t){return"undefined"==typeof this?new h(t):void(this.opts=r(t||{},h.defaults,g))}function d(){function e(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function s(){return a(e("group",{coordsize:h+" "+h,coordorigin:-l+" "+-l}),{width:h,height:h})}function o(t,o,r){i(u,i(a(s(),{rotation:360/n.lines*t+"deg",left:~~o}),i(a(e("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:r}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r,l=n.length+n.width,h=2*l,d=2*-(n.width+n.length)+"px",u=a(s(),{position:"absolute",top:d,left:d});if(n.shadow)for(r=1;r<=n.lines;r++)o(r,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(r=1;r<=n.lines;r++)o(r);return i(t,u)},h.prototype.opacity=function(t,e,i,n){var s=t.firstChild;n=n.shadow&&n.lines||0,s&&e+n<s.childNodes.length&&(s=s.childNodes[e+n],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=i))}}var u,p=["webkit","Moz","ms","O"],f={},m=function(){var n=t("style",{type:"text/css"});return i(e.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),g={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},r(h.prototype,{spin:function(e){this.stop();var i,n,s=this,o=s.opts,r=s.el=a(t(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),c=o.radius+o.length+o.width;if(e&&(e.insertBefore(r,e.firstChild||null),n=l(e),i=l(r),a(r,{left:("auto"==o.left?n.x-i.x+(e.offsetWidth>>1):parseInt(o.left,10)+c)+"px",top:("auto"==o.top?n.y-i.y+(e.offsetHeight>>1):parseInt(o.top,10)+c)+"px"})),r.setAttribute("role","progressbar"),s.lines(r,s.opts),!u){var h,d=0,p=(o.lines-1)*(1-o.direction)/2,f=o.fps,m=f/o.speed,g=(1-o.opacity)/(m*o.trail/100),v=m/o.lines;!function b(){d++;for(var t=0;t<o.lines;t++)h=Math.max(1-(d+(o.lines-t)*v)%m*g,o.opacity),s.opacity(r,t*o.direction+p,h,o);s.timeout=s.el&&setTimeout(b,~~(1e3/f))}()}return s},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=s),this},lines:function(e,s){function o(e,i){return a(t(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*l+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var r,l=0,h=(s.lines-1)*(1-s.direction)/2;l<s.lines;l++)r=a(t(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:u&&n(s.opacity,s.trail,h+l*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&i(r,a(o("#000","0 0 4px #000"),{top:"2px"})),i(e,i(r,o(c(s.color,l),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var v=a(t("group"),{behavior:"url(#default#VML)"});return!o(v,"transform")&&v.adj?d():u=o(v,"animation"),h});var $i,Si,Ei,Ni,Ai,Mi,Oi=n(t),Pi=n(e),Ii="quirks"===i.hash.replace("#",""),Fi=yi.csstransforms3d,Ri=Fi&&!Ii,Li=Fi||"CSS1Compat"===e.compatMode,Hi=wi.ok,ji=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),zi=!Ri||ji,Wi=navigator.msPointerEnabled,Bi="onwheel"in e.createElement("div")?"wheel":e.onmousewheel!==s?"mousewheel":"DOMMouseScroll",Ui=250,qi=300,Yi=1400,Vi=5e3,Ki=2,Qi=64,Xi=500,Gi=333,Ji="$stageFrame",Zi="$navDotFrame",tn="$navThumbFrame",en="auto",nn=o([.1,0,.25,1]),sn=99999,on="50%",an={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Ki,glimpse:0,fit:"contain",position:on,thumbposition:on,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:Qi,thumbheight:Qi,thumbmargin:Ki,thumbborderwidth:Ki,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:qi,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},rn={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};jQuery.Fotorama=function(t,s){function o(){n.each(Tn,function(t,e){if(!e.i){e.i=us++;var i=T(e.video,!0);if(i){var n={};e.video=i,e.img||e.thumb?e.thumbsReady=!0:n=D(e,Tn,ls),$(Tn,{img:n.img,thumb:n.thumb},e.i,ls)}}})}function a(t){return Gn[t]||ls.fullScreen}function l(t){var e="keydown."+re,i=re+cs,n="keydown."+i,o="resize."+i+" orientationchange."+i;t?(Pi.on(n,function(t){var e,i;En&&27===t.keyCode?(e=!0,pn(En,!0,!0)):(ls.fullScreen||s.keyboard&&!ls.index)&&(27===t.keyCode?(e=!0,ls.cancelFullScreen()):t.shiftKey&&32===t.keyCode&&a("space")||37===t.keyCode&&a("left")||38===t.keyCode&&a("up")?i="<":32===t.keyCode&&a("space")||39===t.keyCode&&a("right")||40===t.keyCode&&a("down")?i=">":36===t.keyCode&&a("home")?i="<<":35===t.keyCode&&a("end")&&(i=">>")),(e||i)&&Q(t),i&&ls.show({index:i,slow:t.altKey,user:!0})}),ls.index||Pi.off(e).on(e,"textarea, input, select",function(t){!Si.hasClass(le)&&t.stopPropagation()}),Oi.on(o,ls.resize)):(Pi.off(n),Oi.off(o))}function c(e){e!==c.f&&(e?(t.html("").addClass(re+" "+hs).append(gs).before(fs).before(ms),oe(ls)):(gs.detach(),fs.detach(),ms.detach(),t.html(ps.urtext).removeClass(hs),ae(ls)),l(e),c.f=e)}function p(){Tn=ls.data=Tn||j(s.data)||S(t),Dn=ls.size=Tn.length,!Cn.ok&&s.shuffle&&H(Tn),o(),Is=C(Is),Dn&&c(!0)}function b(){var t=2>Dn||En;Ls.noMove=t||Un,Ls.noSwipe=t||!s.swipe,!Kn&&bs.toggleClass(De,!s.click&&!Ls.noMove&&!Ls.noSwipe),Wi&&gs.toggleClass(ve,!Ls.noSwipe)}function y(t){t===!0&&(t=""),s.autoplay=Math.max(+t||Vi,1.5*Vn)}function k(){function t(t,i){e[t?"add":"remove"].push(i)}ls.options=s=W(s),Un="crossfade"===s.transition||"dissolve"===s.transition,Ln=s.loop&&(Dn>2||Un&&(!Kn||"slide"!==Kn)),Vn=+s.transitionduration||qi,Xn="rtl"===s.direction,Gn=n.extend({},s.keyboard&&rn,s.keyboard);var e={add:[],remove:[]};Hn=s.nav,zn="top"===s.navposition,e.remove.push(Ke),ks.toggle(!!s.arrows),Be(),Sn=new Ci(n.extend(Ti,s.spinner,Di,{direction:Xn?-1:1})),Ni(),Ai(),s.autoplay&&y(s.autoplay),qn=u(s.thumbwidth)||Qi,Yn=u(s.thumbheight)||Qi,Hs.ok=zs.ok=s.trackpad&&!zi,b(),nn(s,[Rs]),jn="thumbs"===Hn,jn?(vi(Dn,"navThumb"),$n=$s,rs=tn,P(fs,n.Fotorama.jst.style({w:qn,h:Yn,b:s.thumbborderwidth,m:s.thumbmargin,s:cs,q:!Li})),Cs.addClass(Fe).removeClass(Ie)):"dots"===Hn?(vi(Dn,"navDot"),$n=Ds,rs=Zi,Cs.addClass(Ie).removeClass(Fe)):(Hn=!1,Cs.removeClass(Fe+" "+Ie)),Hn&&(zn?_s.insertBefore(vs):_s.insertAfter(vs),ki.nav=!1,ki($n,Ts,"nav")),Wn=s.allowfullscreen,Wn?(Es.prependTo(vs),Bn=Hi&&"native"===Wn):(Es.detach(),Bn=!1),t(Un,pe),t(!Un,fe),t(!s.captions,we),t(Xn,be),t("always"!==s.arrows,xe),Qn=s.shadows&&!zi,t(!Qn,ge),gs.addClass(e.add.join(" ")).removeClass(e.remove.join(" ")),Fs=n.extend({},s)}function _(t){return 0>t?(Dn+t%Dn)%Dn:t>=Dn?t%Dn:t}function C(t){return r(t,0,Dn-1)}function E(t){return Ln?_(t):C(t)}function q(t){return t>0||Ln?t-1:!1}function G(t){return Dn-1>t||Ln?t+1:!1}function te(){Ls.min=Ln?-1/0:-g(Dn-1,Rs.w,s.margin,Mn),Ls.max=Ln?1/0:-g(0,Rs.w,s.margin,Mn),Ls.snap=Rs.w+s.margin}function ee(){js.min=Math.min(0,Rs.nw-Ts.width()),js.max=0,Ts.toggleClass(De,!(js.noMove=js.min===js.max))}function se(t,e,i){if("number"==typeof t){t=new Array(t);var s=!0}return n.each(t,function(t,n){if(s&&(n=t),"number"==typeof n){var o=Tn[_(n)];if(o){var a="$"+e+"Frame",r=o[a];i.call(this,t,n,o,r,a,r&&r.data())}}})}function je(t,e,i,n){(!Jn||"*"===Jn&&n===Rn)&&(t=m(s.width)||m(t)||Xi,e=m(s.height)||m(e)||Gi,ls.resize({width:t,ratio:s.ratio||i||t/e},0,n!==Rn&&"*"))}function ze(t,e,i,o,a,r){se(t,e,function(t,l,c,h,d,u){function p(t){var e=_(l);on(t,{index:e,src:k,frame:Tn[e]})}function f(){y.remove(),n.Fotorama.cache[k]="error",c.html&&"stage"===e||!C||C===k?(!k||c.html||v?"stage"===e&&(h.trigger("f:load").removeClass(Ze+" "+Je).addClass(ti),p("load"),je()):(h.trigger("f:error").removeClass(Ze).addClass(Je),p("error")),u.state="error",!(Dn>1&&Tn[l]===c)||c.html||c.deleted||c.video||v||(c.deleted=!0,ls.splice(l,1))):(c[x]=k=C,ze([l],e,i,o,a,!0))}function m(){n.Fotorama.measures[k]=w.measures=n.Fotorama.measures[k]||{width:b.width,height:b.height,ratio:b.width/b.height},je(w.measures.width,w.measures.height,w.measures.ratio,l),y.off("load error").addClass(si+(v?" "+oi:"")).prependTo(h),O(y,(n.isFunction(i)?i():i)||Rs,o||c.fit||s.fit,a||c.position||s.position),n.Fotorama.cache[k]=u.state="loaded",setTimeout(function(){h.trigger("f:load").removeClass(Ze+" "+Je).addClass(ti+" "+(v?ei:ii)),"stage"===e?p("load"):(c.thumbratio===en||!c.thumbratio&&s.thumbratio===en)&&(c.thumbratio=w.measures.ratio,kn())},0)}function g(){var t=10;A(function(){return!os||!t--&&!zi},function(){m()})}if(h){var v=ls.fullScreen&&c.full&&c.full!==c.img&&!u.$full&&"stage"===e;if(!u.$img||r||v){var b=new Image,y=n(b),w=y.data();u[v?"$full":"$img"]=y;var x="stage"===e?v?"full":"img":"thumb",k=c[x],C=v?null:c["stage"===e?"thumb":"img"];if("navThumb"===e&&(h=u.$wrap),!k)return void f();n.Fotorama.cache[k]?!function T(){"error"===n.Fotorama.cache[k]?f():"loaded"===n.Fotorama.cache[k]?setTimeout(g,0):setTimeout(T,100)}():(n.Fotorama.cache[k]="*",y.on("load",g).on("error",f)),u.state="",b.src=k}}})}function We(t){Ps.append(Sn.spin().el).appendTo(t)}function Be(){Ps.detach(),Sn&&Sn.stop()}function ni(){var t=Nn[Ji];t&&!t.data().state&&(We(t),t.on("f:load f:error",function(){t.off("f:load f:error"),Be()}))}function hi(t){V(t,yn),K(t,function(){setTimeout(function(){z(Cs)},0),Fi({time:Vn,guessIndex:n(this).data().eq,minMax:js})})}function vi(t,e){se(t,e,function(t,i,s,o,a,r){if(!o){o=s[a]=gs[a].clone(),r=o.data(),r.data=s;var l=o[0];"stage"===e?(s.html&&n('<div class="'+ci+'"></div>').append(s._html?n(s.html).removeAttr("id").html(s._html):s.html).appendTo(o),s.caption&&n(L(pi,L(fi,s.caption))).appendTo(o),s.video&&o.addClass(Ce).append(As.clone()),K(l,function(){setTimeout(function(){z(vs)},0),gn({index:r.eq,user:!0})}),ys=ys.add(o)):"navDot"===e?(hi(l),Ds=Ds.add(o)):"navThumb"===e&&(hi(l),r.$wrap=o.children(":first"),$s=$s.add(o),s.video&&r.$wrap.append(As.clone()))}})}function bi(t,e,i,n){return t&&t.length&&O(t,e,i,n)}function yi(t){se(t,"stage",function(t,e,i,o,a,r){if(o){var l=_(e),c=i.fit||s.fit,h=i.position||s.position;r.eq=l,Bs[Ji][l]=o.css(n.extend({left:Un?0:g(e,Rs.w,s.margin,Mn)},Un&&d(0))),N(o[0])&&(o.appendTo(bs),pn(i.$video)),bi(r.$img,Rs,c,h),bi(r.$full,Rs,c,h)}})}function xi(t,e){if("thumbs"===Hn&&!isNaN(t)){var i=-t,o=-t+Rs.nw;$s.each(function(){var t=n(this),a=t.data(),r=a.eq,l=function(){return{h:Yn,w:a.w}},c=l(),h=Tn[r]||{},d=h.thumbfit||s.thumbfit,u=h.thumbposition||s.thumbposition;c.w=a.w,a.l+a.w<i||a.l>o||bi(a.$img,c,d,u)||e&&ze([r],"navThumb",l,d,u)})}}function ki(t,e,i){if(!ki[i]){var o="nav"===i&&jn,a=0;e.append(t.filter(function(){for(var t,e=n(this),i=e.data(),s=0,o=Tn.length;o>s;s++)if(i.data===Tn[s]){t=!0,i.eq=s;break}return t||e.remove()&&!1}).sort(function(t,e){return n(t).data().eq-n(e).data().eq}).each(function(){if(o){var t=n(this),e=t.data(),i=Math.round(Yn*e.data.thumbratio)||qn;e.l=a,e.w=i,t.css({width:i}),a+=i+s.thumbmargin}})),ki[i]=!0}}function _i(t){return t-Us>Rs.w/3}function Ei(t){return!(Ln||Is+t&&Is-Dn+t||En)}function Ni(){var t=Ei(0),e=Ei(1);ws.toggleClass(Ee,t).attr(Y(t)),xs.toggleClass(Ee,e).attr(Y(e))}function Ai(){Hs.ok&&(Hs.prevent={"<":Ei(0),">":Ei(1)})}function Mi(t){var e,i,n=t.data();return jn?(e=n.l,i=n.w):(e=t.position().left,i=t.width()),{c:e+i/2,min:-e+10*s.thumbmargin,max:-e+Rs.w-i-10*s.thumbmargin}}function Ii(t){var e=Nn[rs].data();J(Ss,{time:1.2*t,pos:e.l,width:e.w-2*s.thumbborderwidth})}function Fi(t){var e=Tn[t.guessIndex][rs];if(e){var i=js.min!==js.max,n=t.minMax||i&&Mi(Nn[rs]),s=i&&(t.keep&&Fi.l?Fi.l:r((t.coo||Rs.nw/2)-Mi(e).c,n.min,n.max)),o=i&&r(s,js.min,js.max),a=1.1*t.time;J(Ts,{time:a,pos:o||0,onEnd:function(){xi(o,!0)}}),un(Cs,I(o,js.min,js.max)),Fi.l=s}}function ji(){Bi(rs),Ws[rs].push(Nn[rs].addClass(Ve))}function Bi(t){for(var e=Ws[t];e.length;)e.shift().removeClass(Ve)}function Yi(t){var e=Bs[t];n.each(An,function(t,i){delete e[_(i)]}),n.each(e,function(t,i){delete e[t],i.detach()})}function Ki(t){Mn=On=Is;var e=Nn[Ji];e&&(Bi(Ji),Ws[Ji].push(e.addClass(Ve)),t||ls.show.onEnd(!0),w(bs,0,!0),Yi(Ji),yi(An),te(),ee())}function nn(t,e){t&&n.each(e,function(e,i){i&&n.extend(i,{width:t.width||i.width,height:t.height,minwidth:t.minwidth,maxwidth:t.maxwidth,minheight:t.minheight,maxheight:t.maxheight,ratio:B(t.ratio)})})}function on(e,i){t.trigger(re+":"+e,[ls,i])}function an(){clearTimeout(ln.t),os=1,s.stopautoplayontouch?ls.stopAutoplay():is=!0}function ln(){s.stopautoplayontouch||(cn(),hn()),ln.t=setTimeout(function(){os=0},qi+Ui)}function cn(){is=!(!En&&!ns)}function hn(){if(clearTimeout(hn.t),!s.autoplay||is)return void(ls.autoplay&&(ls.autoplay=!1,on("stopautoplay")));ls.autoplay||(ls.autoplay=!0,on("startautoplay"));var t=Is,e=Nn[Ji].data();A(function(){return e.state||t!==Is},function(){hn.t=setTimeout(function(){is||t!==Is||ls.show(Ln?X(!Xn):_(Is+(Xn?-1:1)))},s.autoplay)})}function dn(){ls.fullScreen&&(ls.fullScreen=!1,Hi&&wi.cancel(ds),Si.removeClass(le),$i.removeClass(le),t.removeClass(Xe).insertAfter(ms),Rs=n.extend({},ss),pn(En,!0,!0),bn("x",!1),ls.resize(),ze(An,"stage"),z(Oi,ts,Zn),on("fullscreenexit"))}function un(t,e){Qn&&(t.removeClass(qe+" "+Ye),e&&!En&&t.addClass(e.replace(/^|\s/g," "+Ue+"--")))}function pn(t,e,i){e&&(gs.removeClass(ue),En=!1,b()),t&&t!==En&&(t.remove(),on("unloadvideo")),i&&(cn(),hn())}function fn(t){gs.toggleClass(me,t)}function mn(t){if(!Ls.flow){var e=t?t.pageX:mn.x,i=e&&!Ei(_i(e))&&s.click;mn.p!==i&&vs.toggleClass($e,i)&&(mn.p=i,mn.x=e)}}function gn(t){clearTimeout(gn.t),s.clicktransition&&s.clicktransition!==s.transition?setTimeout(function(){var e=s.transition;ls.setOptions({transition:s.clicktransition}),Kn=e,gn.t=setTimeout(function(){ls.show(t)},10)},0):ls.show(t)}function vn(t,e){var i=t.target,o=n(i);o.hasClass(di)?ls.playVideo():i===Ns?ls.toggleFullScreen():En?i===Os&&pn(En,!0,!0):e?fn():s.click&&gn({index:t.shiftKey||X(_i(t._x)),slow:t.altKey,user:!0})}function bn(t,e){Ls[t]=js[t]=e}function yn(t){var e=n(this).data().eq;gn({index:e,slow:t.altKey,user:!0,coo:t._x-Cs.offset().left})}function wn(t){gn({index:ks.index(this)?">":"<",slow:t.altKey,user:!0})}function xn(t){K(t,function(){setTimeout(function(){z(vs)},0),fn(!1)})}function kn(){if(p(),k(),!kn.i){kn.i=!0;var t=s.startindex;(t||s.hash&&i.hash)&&(Rn=F(t||i.hash.replace(/^#/,""),Tn,0===ls.index||t,t)),Is=Mn=On=Pn=Rn=E(Rn)||0}if(Dn){if(_n())return;En&&pn(En,!0),An=[],Yi(Ji),kn.ok=!0,ls.show({index:Is,time:0}),ls.resize()}else ls.destroy()}function _n(){return!_n.f===Xn?(_n.f=Xn,Is=Dn-1-Is,ls.reverse(),!0):void 0}function Cn(){Cn.ok||(Cn.ok=!0,on("ready"))}$i=n("html"),Si=n("body");var Tn,Dn,$n,Sn,En,Nn,An,Mn,On,Pn,In,Fn,Rn,Ln,Hn,jn,zn,Wn,Bn,Un,qn,Yn,Vn,Kn,Qn,Xn,Gn,Jn,Zn,ts,es,is,ns,ss,os,as,rs,ls=this,cs=n.now(),hs=re+cs,ds=t[0],us=1,ps=t.data(),fs=n("<style></style>"),ms=n(L(Qe)),gs=n(L(ce)),vs=n(L(ke)).appendTo(gs),bs=(vs[0],n(L(Te)).appendTo(vs)),ys=n(),ws=n(L(Se+" "+Ne+gi)),xs=n(L(Se+" "+Ae+gi)),ks=ws.add(xs).appendTo(vs),_s=n(L(Oe)),Cs=n(L(Me)).appendTo(_s),Ts=n(L(Pe)).appendTo(Cs),Ds=n(),$s=n(),Ss=(bs.data(),Ts.data(),n(L(li)).appendTo(Ts)),Es=n(L(Ge+gi)),Ns=Es[0],As=n(L(di)),Ms=n(L(ui)).appendTo(vs),Os=Ms[0],Ps=n(L(mi)),Is=!1,Fs={},Rs={},Ls={},Hs={},js={},zs={},Ws={},Bs={},Us=0,qs=[];gs[Ji]=n(L(_e)),gs[tn]=n(L(Re+" "+He+gi,L(ri))),gs[Zi]=n(L(Re+" "+Le+gi,L(ai))),Ws[Ji]=[],Ws[tn]=[],Ws[Zi]=[],Bs[Ji]={},gs.addClass(Ri?de:he).toggleClass(me,!s.controlsonstart),ps.fotorama=this,ls.startAutoplay=function(t){return ls.autoplay?this:(is=ns=!1,y(t||s.autoplay),hn(),this)},ls.stopAutoplay=function(){return ls.autoplay&&(is=ns=!0,hn()),this},ls.show=function(t){var e;"object"!=typeof t?(e=t,t={}):e=t.index,e=">"===e?On+1:"<"===e?On-1:"<<"===e?0:">>"===e?Dn-1:e,e=isNaN(e)?F(e,Tn,!0):e,e="undefined"==typeof e?Is||0:e,ls.activeIndex=Is=E(e),In=q(Is),Fn=G(Is),An=[Is,In,Fn],On=Ln?e:Is;var i=Math.abs(Pn-On),n=x(t.time,function(){return Math.min(Vn*(1+(i-1)/12),2*Vn)}),o=t.overPos;t.slow&&(n*=10);var a=Nn;ls.activeFrame=Nn=Tn[Is];var l=a===Nn&&!t.user;pn(En,Nn.i!==Tn[_(Mn)].i),vi(An,"stage"),yi(zi?[On]:[On,q(On),G(On)]),bn("go",!0),l||on("show",{user:t.user,time:n}),is=!0;var c=ls.show.onEnd=function(e){if(!c.ok){if(c.ok=!0,e||Ki(!0),l||on("showend",{user:t.user}),!e&&Kn&&Kn!==s.transition)return ls.setOptions({transition:Kn}),void(Kn=!1);ni(),ze(An,"stage"),bn("go",!1),Ai(),mn(),cn(),hn()}};if(Un){var h=Nn[Ji],d=Is!==Pn?Tn[Pn][Ji]:null;Z(h,d,ys,{time:n,method:s.transition,onEnd:c},qs)}else J(bs,{pos:-g(On,Rs.w,s.margin,Mn),overPos:o,time:n,onEnd:c});if(Ni(),Hn){ji();var u=C(Is+r(On-Pn,-1,1));Fi({time:n,coo:u!==Is&&t.coo,guessIndex:"undefined"!=typeof t.coo?u:Is,keep:l}),jn&&Ii(n)}return es="undefined"!=typeof Pn&&Pn!==Is,Pn=Is,s.hash&&es&&!ls.eq&&M(Nn.id||Is+1),this},ls.requestFullScreen=function(){return Wn&&!ls.fullScreen&&(Zn=Oi.scrollTop(),ts=Oi.scrollLeft(),z(Oi),bn("x",!0),ss=n.extend({},Rs),t.addClass(Xe).appendTo(Si.addClass(le)),$i.addClass(le),pn(En,!0,!0),ls.fullScreen=!0,Bn&&wi.request(ds),ls.resize(),ze(An,"stage"),ni(),on("fullscreenenter")),this},ls.cancelFullScreen=function(){return Bn&&wi.is()?wi.cancel(e):dn(),this},ls.toggleFullScreen=function(){return ls[(ls.fullScreen?"cancel":"request")+"FullScreen"]()},U(e,wi.event,function(){!Tn||wi.is()||En||dn()
}),ls.resize=function(t){if(!Tn)return this;var e=arguments[1]||0,i=arguments[2];nn(ls.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:W(t),[Rs,i||ls.fullScreen||s]);var n=Rs.width,o=Rs.height,a=Rs.ratio,l=Oi.height()-(Hn?Cs.height():0);return m(n)&&(gs.addClass(ye).css({width:n,minWidth:Rs.minwidth||0,maxWidth:Rs.maxwidth||sn}),n=Rs.W=Rs.w=gs.width(),Rs.nw=Hn&&f(s.navwidth,n)||n,s.glimpse&&(Rs.w-=Math.round(2*(f(s.glimpse,n)||0))),bs.css({width:Rs.w,marginLeft:(Rs.W-Rs.w)/2}),o=f(o,l),o=o||a&&n/a,o&&(n=Math.round(n),o=Rs.h=Math.round(r(o,f(Rs.minheight,l),f(Rs.maxheight,l))),vs.stop().animate({width:n,height:o},e,function(){gs.removeClass(ye)}),Ki(),Hn&&(Cs.stop().animate({width:Rs.nw},e),Fi({guessIndex:Is,time:e,keep:!0}),jn&&ki.nav&&Ii(e)),Jn=i||!0,Cn())),Us=vs.offset().left,this},ls.setOptions=function(t){return n.extend(s,t),kn(),this},ls.shuffle=function(){return Tn&&H(Tn)&&kn(),this},ls.destroy=function(){return ls.cancelFullScreen(),ls.stopAutoplay(),Tn=ls.data=null,c(),An=[],Yi(Ji),kn.ok=!1,this},ls.playVideo=function(){var t=Nn,e=t.video,i=Is;return"object"==typeof e&&t.videoReady&&(Bn&&ls.fullScreen&&ls.cancelFullScreen(),A(function(){return!wi.is()||i!==Is},function(){i===Is&&(t.$video=t.$video||n(n.Fotorama.jst.video(e)),t.$video.appendTo(t[Ji]),gs.addClass(ue),En=t.$video,b(),ks.blur(),Es.blur(),on("loadvideo"))})),this},ls.stopVideo=function(){return pn(En,!0,!0),this},vs.on("mousemove",mn),Ls=ie(bs,{onStart:an,onMove:function(t,e){un(vs,e.edge)},onTouchEnd:ln,onEnd:function(t){un(vs);var e=(Wi&&!as||t.touch)&&s.arrows&&"always"!==s.arrows;if(t.moved||e&&t.pos!==t.newPos&&!t.control){var i=v(t.newPos,Rs.w,s.margin,Mn);ls.show({index:i,time:Un?Vn:t.time,overPos:t.overPos,user:!0})}else t.aborted||t.control||vn(t.startEvent,e)},timeLow:1,timeHigh:1,friction:2,select:"."+Ke+", ."+Ke+" *",$wrap:vs}),js=ie(Ts,{onStart:an,onMove:function(t,e){un(Cs,e.edge)},onTouchEnd:ln,onEnd:function(t){function e(){Fi.l=t.newPos,cn(),hn(),xi(t.newPos,!0)}if(t.moved)t.pos!==t.newPos?(is=!0,J(Ts,{time:t.time,pos:t.newPos,overPos:t.overPos,onEnd:e}),xi(t.newPos),Qn&&un(Cs,I(t.newPos,js.min,js.max))):e();else{var i=t.$target.closest("."+Re,Ts)[0];i&&yn.call(i,t.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:Cs}),Hs=ne(vs,{shift:!0,onEnd:function(t,e){an(),ln(),ls.show({index:e,slow:t.altKey})}}),zs=ne(Cs,{onEnd:function(t,e){an(),ln();var i=w(Ts)+.25*e;Ts.css(h(r(i,js.min,js.max))),Qn&&un(Cs,I(i,js.min,js.max)),zs.prevent={"<":i>=js.max,">":i<=js.min},clearTimeout(zs.t),zs.t=setTimeout(function(){Fi.l=i,xi(i,!0)},Ui),xi(i)}}),gs.hover(function(){setTimeout(function(){os||fn(!(as=!0))},0)},function(){as&&fn(!(as=!1))}),R(ks,function(t){Q(t),wn.call(this,t)},{onStart:function(){an(),Ls.control=!0},onTouchEnd:ln}),ks.each(function(){V(this,function(t){wn.call(this,t)}),xn(this)}),V(Ns,ls.toggleFullScreen),xn(Ns),n.each("load push pop shift unshift reverse sort splice".split(" "),function(t,e){ls[e]=function(){return Tn=Tn||[],"load"!==e?Array.prototype[e].apply(Tn,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(Tn=j(arguments[0])),kn(),ls}}),kn()},n.fn.fotorama=function(e){return this.each(function(){var i=this,s=n(this),o=s.data(),a=o.fotorama;a?a.setOptions(e,!0):A(function(){return!E(i)},function(){o.urtext=s.html(),new n.Fotorama(s,n.extend({},an,t.fotoramaDefaults,e,o))})})},n.Fotorama.instances=[],n.Fotorama.cache={},n.Fotorama.measures={},n=n||{},n.Fotorama=n.Fotorama||{},n.Fotorama.jst=n.Fotorama.jst||{},n.Fotorama.jst.style=function(t){{var e,i="";bi.escape}return i+=".fotorama"+(null==(e=t.s)?"":e)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(e=t.m)?"":e)+"px;\nheight:"+(null==(e=t.h)?"":e)+"px}\n.fotorama"+(null==(e=t.s)?"":e)+" .fotorama__thumb-border{\nheight:"+(null==(e=t.h-t.b*(t.q?0:2))?"":e)+"px;\nborder-width:"+(null==(e=t.b)?"":e)+"px;\nmargin-top:"+(null==(e=t.m)?"":e)+"px}"},n.Fotorama.jst.video=function(t){function e(){i+=n.call(arguments,"")}var i="",n=(bi.escape,Array.prototype.join);return i+='<div class="fotorama__video"><iframe src="',e(("youtube"==t.type?t.p+"youtube.com/embed/"+t.id+"?autoplay=1":"vimeo"==t.type?t.p+"player.vimeo.com/video/"+t.id+"?autoplay=1&badge=0":t.id)+(t.s&&"custom"!=t.type?"&"+t.s:"")),i+='" frameborder="0" allowfullscreen></iframe></div>\n'},n(function(){n("."+re+':not([data-auto="false"])').fotorama(),"http://"===_()&&i.host.match(/\./)&&!t.blockFotoramaData&&n("body").append('<iframe src="http://data.fotorama.io/?version='+fotoramaVersion+'" style="display: none;"></iframe>')})}(window,document,location,"undefined"!=typeof jQuery&&jQuery),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){jQuery(function(){return $("#admin_jury_user_tokens").tokenInput("/ajax/users",{theme:"facebook"})})}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){jQuery(function(){return $("#site_photo_user_id").tokenInput("/ajax/users",{theme:"facebook",prePopulate:$("#site_photo_user_id").data("load")})})}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),jQuery(function(t){t.datepicker.regional.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.en)}),function(t){"use strict";var e=function(t,e){return t-e},i=function(t){4===t.length&&(t=t.replace(/(\w)(\w)(\w)/gi,"$1$1$2$2$3$3"));var e=/(\w{2})(\w{2})(\w{2})/.exec(t);return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]},n=function(t){return"#"+jQuery.map(t,function(t){var e=t.toString(16);return e=1===e.length?"0"+e:e}).join("")},s=function(t,e){return jQuery.map(i(t.end),function(n,s){return(n-i(t.start)[s])/e})},o=function(t,e,s){var o=jQuery.map(i(t.start),function(t,i){var n=Math.round(t+e[i]*s);return n>255?n=255:0>n&&(n=0),n});return n(o)};t.fn.tagcloud=function(i){var n=t.extend({},t.fn.tagcloud.defaults,i),a=this.map(function(){return t(this).attr("rel")});a=jQuery.makeArray(a).sort(e);var r=a[0],l=a.pop(),c=l-r;0===c&&(c=1);var h,d;return n.size&&(h=(n.size.end-n.size.start)/c),n.color&&(d=s(n.color,c)),this.each(function(){var e=t(this).attr("rel")-r;n.size&&t(this).css({"font-size":n.size.start+e*h+n.size.unit}),n.color&&t(this).css({color:o(n.color,d,e)})})},t.fn.tagcloud.defaults={size:{start:14,end:18,unit:"pt"}}}(jQuery),function(){}.call(this),function(){jQuery(function(){return $("#letter_people_tokens").tokenInput("/ajax/users",{theme:"facebook",prePopulate:$("#letter_people_tokens").data("load")})})}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){jQuery(function(){return $("#photo_theme_tokens").tokenInput("/photo_ajax/theme_tokens",{theme:"facebook",prePopulate:$("#photo_theme_tokens").data("load")})})}.call(this),function(t){var e=0,i=5,n=.5,s=function(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type},o=s(),a=function(e,i){return"undefined"==typeof e||null===e||void 0===e||e==[]||""===e||i&&""===t.trim(e)},r=function(t,e,i){var n=a(t.data(e))?t.attr(e):t.data(e);return n?n:i[e]},l=function(){return"kvstar-"+Math.round((new Date).getTime()+100*Math.random())},c=function(e,i){if(this.$elementOrig=t(e),o)this.init(i);else{var n=i.starCaptions;this.polyfill(n)}};c.prototype={constructor:c,_parseAttr:function(t,s){var o=this,l=o.$elementOrig;if("range"===l.attr("type")||"number"===l.attr("type")){var c=r(l,t,s),h=n;"min"===t?h=e:"max"===t?h=i:"step"===t&&(h=n);var d=a(c)?h:c;return parseFloat(d)}return parseFloat(s[t])},listen:function(){var e=this;e.$element.on("change",function(){e.inactive||(e.setStars(),e.$elementOrig.val(e.$element.val()),e.$elementOrig.trigger("change"),e.$elementOrig.trigger("rating.change",[e.$element.val(),e.$caption.html()]))}),e.$clear.on("click",function(){e.inactive||e.clear()}),t(e.$elementOrig[0].form).on("reset",function(){e.inactive||e.reset()})},initSlider:function(s){var o=this,r=a(o.$elementOrig.attr("id"))?l():"kvstar-"+o.$elementOrig.attr("id");a(o.$elementOrig.val())&&o.$elementOrig.val(0),o.initialValue=o.$elementOrig.val(),o.min="undefined"!=typeof s.min?s.min:o._parseAttr("min",s),o.max="undefined"!=typeof s.max?s.max:o._parseAttr("max",s),o.step="undefined"!=typeof s.step?s.step:o._parseAttr("step",s),(isNaN(o.min)||a(o.min))&&(o.min=e),(isNaN(o.max)||a(o.max))&&(o.max=i),(isNaN(o.step)||a(o.step)||0==o.step)&&(o.step=n),o.$elementOrig.clone(!0).attr({id:r,name:r,type:"range"}).insertBefore(o.$elementOrig),o.$elementOrig.removeAttr("class"),o.$element=t("#"+r),o.$element.attr({min:o.min,max:o.max,step:o.step,disabled:o.disabled,readonly:o.readonly}),o.$element.val(o.$elementOrig.val()),o.$elementOrig.hide()},polyfill:function(e){var i=this,n=t("<select>"),s=i.$element;s.before(n);for(var o in e)n.append(t("<option>").attr("value",o).text(e[o]));n.attr({"class":s.attr("class"),style:s.attr("style")}),s.hide(),n.on("change",function(){i.$element.val(n.val()),i.$element.trigger("change"),i.$element.trigger("rating.change",[n.val(),e[n.val()]])})},init:function(e){if(this.options=e,this.$elementOrig.is(":visible")){"undefined"==typeof this.$element&&this.initSlider(e),this.checkDisabled(),$element=this.$element,this.containerClass=e.containerClass,this.glyphicon=e.glyphicon;var i=this.glyphicon?"\ue006":"\u2605";this.symbol=a(e.symbol)?i:e.symbol,this.rtl=e.rtl||this.$element.attr("dir"),this.rtl&&this.$element.attr("dir","rtl"),this.showClear=e.showClear,this.showCaption=e.showCaption,this.size=e.size,this.stars=e.stars,this.defaultCaption=e.defaultCaption,this.starCaptions=e.starCaptions,this.starCaptionClasses=e.starCaptionClasses,this.clearButton=e.clearButton,this.clearButtonTitle=e.clearButtonTitle,this.clearButtonBaseClass=a(e.clearButtonBaseClass)?"clear-rating":e.clearButtonBaseClass,this.clearButtonActiveClass=a(e.clearButtonActiveClass)?"clear-rating-active":e.clearButtonActiveClass,this.clearCaption=e.clearCaption,this.clearCaptionClass=e.clearCaptionClass,this.clearValue=e.clearValue,this.$clearElement=e.clearElement,this.$captionElement=e.captionElement,this.$element.removeClass("rating-slider").addClass("rating-slider"),"undefined"==typeof this.$rating&&"undefined"==typeof this.$container&&(this.$rating=t(document.createElement("div")).html('<div class="rating-stars"></div>'),this.$container=t(document.createElement("div")),this.$container.before(this.$rating),this.$container.append(this.$rating),this.$element.before(this.$container).appendTo(this.$rating)),this.$stars=this.$rating.find(".rating-stars"),this.generateRating(),this.$clear=a(this.$clearElement)?this.$container.find("."+this.clearButtonBaseClass):this.$clearElement,this.$caption=a(this.$captionElement)?this.$container.find(".caption"):this.$captionElement,this.setStars(),this.listen(),this.showClear&&this.$clear.attr({"class":this.getClearClass()})}},checkDisabled:function(){var t=this;t.disabled=r(t.$element,"disabled",t.options),t.readonly=r(t.$element,"readonly",t.options),t.inactive=t.disabled||t.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var t=this,e=t.renderClear(),i=t.renderCaption(),n=t.rtl?"rating-container-rtl":"rating-container",s=t.getStars();n+=t.glyphicon?"\ue006"==t.symbol?" rating-gly-star":" rating-gly":" rating-uni",t.$rating.attr("class",n),t.$rating.attr("data-content",s),t.$stars.attr("data-content",s);var n=t.rtl?"star-rating-rtl":"star-rating";t.$container.attr("class",n+" rating-"+t.size),t.inactive?t.$container.addClass("rating-disabled"):t.$container.removeClass("rating-disabled"),"undefined"==typeof t.$caption&&"undefined"==typeof t.$clear&&(t.rtl?t.$container.prepend(i).append(e):t.$container.prepend(e).append(i)),a(t.containerClass)||t.$container.removeClass(t.containerClass).addClass(t.containerClass)},getStars:function(){for(var t=this,e=t.stars,i="",n=1;e>=n;n++)i+=t.symbol;return i},renderClear:function(){var t=this;if(!t.showClear)return"";var e=t.getClearClass();return a(t.$clearElement)?'<div class="'+e+'" title="'+t.clearButtonTitle+'">'+t.clearButton+"</div>":(t.$clearElement.removeClass(e).addClass(e).attr({title:t.clearButtonTitle}),t.$clearElement.html(t.clearButton),"")},renderCaption:function(){var t=this,e=t.$element.val();if(!t.showCaption)return"";var i=t.fetchCaption(e);return a(t.$captionElement)?'<div class="caption">'+i+"</div>":(t.$captionElement.removeClass("caption").addClass("caption").attr({title:t.clearCaption}),t.$captionElement.html(i),"")},fetchCaption:function(t){var e=this,i=parseFloat(t),n=a(e.starCaptionClasses[i])?e.clearCaptionClass:e.starCaptionClasses[i],s=a(e.starCaptions[i])?e.defaultCaption.replace(/\{rating\}/g,i):e.starCaptions[i],o=i==e.clearValue?e.clearCaption:s;return'<span class="'+n+'">'+o+"</span>"},setStars:function(){var t=this,e=t.min,i=t.max,n=(t.step,t.$element.val()),s=0,o=t.fetchCaption(n);n==i?s=100:!a(n)&&n>=e&&(s=Math.floor((n-e)/i*1e3)/10),t.rtl&&(s=100-s),s+="%",t.$stars.css("width",s),t.$caption.html(o)},clear:function(){var t=this,e='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>";t.$stars.removeClass("rated"),t.inactive||t.$caption.html(e),t.$element.val(t.clearValue),t.$elementOrig.val(t.clearValue),t.$elementOrig.trigger("change"),t.setStars(),t.$elementOrig.trigger("rating.clear")},reset:function(){var t=this;t.$element.val(t.initialValue),t.$elementOrig.val(t.initialValue),t.setStars(),t.$elementOrig.trigger("rating.reset")},update:function(t){if(arguments.length>0){var e=this;e.$element.val(t).change()}},refresh:function(e){var i=this;if(arguments.length){i.init(t.extend(i.options,e)),i.showClear?i.$clear.show():i.$clear.hide(),i.showCaption?i.$caption.show():i.$caption.hide()}}},t.fn.rating=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var n=t(this),s=n.data("rating"),o="object"==typeof e&&e;s||n.data("rating",s=new c(this,t.extend({},t.fn.rating.defaults,o,t(this).data()))),"string"==typeof e&&s[e].apply(s,i)})},t.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,defaultCaption:"{rating} Stars",starCaptions:{.5:"0.5",1:"1.0",1.5:"1.5",2:"2.0",2.5:"2.5",3:"3.0",3.5:"3.5",4:"4.0",4.5:"4.5",5:"5.0",5.5:"5.5",6:"6.0",6.5:"6.5",7:"7.0",7.5:"7.5",8:"8.0",8.5:"8.5",9:"9.0",9.5:"9.5",10:"10.0"},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-danger",2:"label label-danger",2.5:"label label-warning",3:"label label-warning",3.5:"label label-warning",4:"label label-warning",4.5:"label label-info",5:"label label-info",5.5:"label label-info",6:"label label-info",6.5:"label label-primary",7:"label label-primary",7.5:"label label-primary",8:"label label-primary",8.5:"label label-success",9:"label label-success",9.5:"label label-success",10:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:0,captionElement:null,clearElement:null,containerClass:null},t(function(){var e=t(o?"input.rating[type=number]":"input.rating[type=text]");e.length>0&&e.rating()})}(jQuery),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),$(document).ready(function(){$(".jury_rate").on("click",function(){var t=$(this).attr("data"),e=this.value;$.post("/jury_rating",{rate:e,data:t},function(){})}),$(".final_estimate").on("click",function(){var t=$(this).attr("data"),e=this.value;$.post("/admin/final_rating",{rate:e,data:t},function(){})}),$(".fotorama").fotorama({maxwidth:"100%",ratio:16/9,allowfullscreen:!0,nav:"thumbs"}),$(".fotorama").on("fotorama:show",function(t,e){var i=/\d+/,n=e.activeFrame.img,s=n.match(i),o="/gallery/show/"+s;$(".comlink").attr("href",o)})});