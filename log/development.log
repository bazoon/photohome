  [1m[36m (3.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.5ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20130820035511)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying(255) DEFAULT '' NOT NULL, "encrypted_password" character varying(255) DEFAULT '' NOT NULL, "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (1.4ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (1.2ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130820035511"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to AddNameToUsers (20130820035514)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD COLUMN "name" character varying(255)[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130820035514"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to AddConfirmableToUsers (20130820035516)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD COLUMN "confirmation_token" character varying(255)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD COLUMN "confirmed_at" timestamp
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD COLUMN "confirmation_sent_at" timestamp[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD COLUMN "unconfirmed_email" character varying(255)
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20130820035516"]]
  [1m[35m (0.6ms)[0m  COMMIT
Migrating to RolifyCreateRoles (20130820035521)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.6ms)[0m  CREATE TABLE "roles" ("id" serial primary key, "name" character varying(255), "resource_id" integer, "resource_type" character varying(255), "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "users_roles" ("user_id" integer, "role_id" integer) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_roles_on_name" ON "roles" ("name")
  [1m[36m (1.6ms)[0m  [1mCREATE INDEX "index_roles_on_name_and_resource_type_and_resource_id" ON "roles" ("name", "resource_type", "resource_id")[0m
  [1m[35m (1.5ms)[0m  CREATE INDEX "index_users_roles_on_user_id_and_role_id" ON "users_roles" ("user_id", "role_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20130820035521"]]
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (110.3ms)[0m  [1mDROP DATABASE IF EXISTS "photohome_test"[0m
  [1m[35m (607.8ms)[0m  CREATE DATABASE "photohome_test" ENCODING = 'unicode' TEMPLATE = "template0"
  [1m[36mSQL (1.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (9.3ms)[0m  CREATE TABLE "roles" ("id" serial primary key, "name" character varying(255), "resource_id" integer, "resource_type" character varying(255), "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.6ms)[0m  [1mCREATE INDEX "index_roles_on_name_and_resource_type_and_resource_id" ON "roles" USING btree ("name", "resource_type", "resource_id")[0m
  [1m[35m (2.0ms)[0m  CREATE INDEX "index_roles_on_name" ON "roles" USING btree ("name")
  [1m[36m (6.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying(255) DEFAULT '' NOT NULL, "encrypted_password" character varying(255) DEFAULT '' NOT NULL, "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp, "updated_at" timestamp, "name" character varying(255), "confirmation_token" character varying(255), "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying(255)) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (2.6ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "users_roles" ("user_id" integer, "role_id" integer) 
  [1m[36m (2.3ms)[0m  [1mCREATE INDEX "index_users_roles_on_user_id_and_role_id" ON "users_roles" USING btree ("user_id", "role_id")[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (2.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130820035521')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130820035511')
  [1m[36m (1.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130820035514')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130820035516')
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from block in <top (required)> at /Users/vith/Desktop/projects/rails/photohome/db/seeds.rb:12)
  [1m[35mRole Load (1.8ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.2ms)[0m  INSERT INTO "roles" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00], ["name", "admin"], ["updated_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from block in <top (required)> at /Users/vith/Desktop/projects/rails/photohome/db/seeds.rb:12)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'user' ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "roles" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00], ["name", "user"], ["updated_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from block in <top (required)> at /Users/vith/Desktop/projects/rails/photohome/db/seeds.rb:12)
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'VIP' ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "roles" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00], ["name", "VIP"], ["updated_at", Tue, 20 Aug 2013 03:56:06 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from <top (required)> at /Users/vith/Desktop/projects/rails/photohome/db/seeds.rb:16)
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'user@example.com' ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."confirmation_token" = '8VB7ZMWJsS1bDYj5DNBZ' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "created_at", "email", "encrypted_password", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["confirmation_sent_at", Tue, 20 Aug 2013 03:56:07 UTC +00:00], ["confirmation_token", "8VB7ZMWJsS1bDYj5DNBZ"], ["created_at", Tue, 20 Aug 2013 03:56:07 UTC +00:00], ["email", "user@example.com"], ["encrypted_password", "$2a$10$t63RGDH.kps4QQiC6b.HGed1rSt9XPILfUcelVDmJ8.hO4n.kGKpi"], ["name", "First User"], ["updated_at", Tue, 20 Aug 2013 03:56:07 UTC +00:00]]
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/devise-3.0.3/app/views/devise/mailer/confirmation_instructions.html.erb (4.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/" for 127.0.0.1 at 2013-08-20 09:57:30 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  Rendered home/index.html.erb within layouts/application (5.4ms)
  Rendered layouts/_navigation.html.erb (9.8ms)
Completed 200 OK in 2885ms (Views: 2864.4ms | ActiveRecord: 2.5ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2013-08-20 09:57:38 +0600
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (99.9ms)
  Rendered layouts/_navigation.html.erb (1.4ms)
Completed 200 OK in 223ms (Views: 111.4ms | ActiveRecord: 1.1ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2013-08-20 09:57:40 +0600
Processing by RegistrationsController#new as HTML
  Rendered devise/shared/_links.html.erb (0.7ms)
  Rendered devise/registrations/new.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation.html.erb (1.4ms)
Completed 200 OK in 23ms (Views: 21.3ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2013-08-20 09:57:45 +0600
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.html.erb (0.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (7.7ms)
  Rendered layouts/_navigation.html.erb (1.3ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2013-08-20 09:59:31 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - Migrations are pending; run 'rake db:migrate RAILS_ENV=development' to resolve this issue.:
  activerecord (4.0.0) lib/active_record/migration.rb:379:in `check_pending!'
  activerecord (4.0.0) lib/active_record/migration.rb:366:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__113618981311213907__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70200396034520/variables" for 127.0.0.1 at 2013-08-20 09:59:31 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateNovelties (20130820035917)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (149.7ms)[0m  [1mCREATE TABLE "novelties" ("id" serial primary key, "title" character varying(255), "content" text, "publish_date" date, "published" boolean, "user_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130820035917"]]
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/users/sign_in" for 127.0.0.1 at 2013-08-20 09:59:51 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::SessionsController#new as HTML
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.9ms)
  Rendered devise/sessions/new.html.erb within layouts/application (114.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (3.5ms)
Completed 200 OK in 445ms (Views: 372.7ms | ActiveRecord: 2.6ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 09:59:59 +0600
Processing by NoveltiesController#index as HTML
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (5.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.1ms)
Completed 200 OK in 23ms (Views: 17.0ms | ActiveRecord: 2.6ms)


Started GET "/en/novelties/new" for 127.0.0.1 at 2013-08-20 10:00:02 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (33.0ms)
  Rendered novelties/new.html.erb within layouts/application (34.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.5ms)
Completed 200 OK in 48ms (Views: 45.9ms | ActiveRecord: 0.8ms)


Started GET "/users/sign_in?locale=en" for 127.0.0.1 at 2013-08-20 10:00:29 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/sessions/new.html.erb within layouts/application (6.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.6ms)
Completed 200 OK in 19ms (Views: 16.9ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=en" for 127.0.0.1 at 2013-08-20 10:00:30 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.html.erb within layouts/application (9.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (39.6ms)
Completed 200 OK in 63ms (Views: 60.7ms | ActiveRecord: 0.0ms)


Started POST "/users?locale=en" for 127.0.0.1 at 2013-08-20 10:00:50 +0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "user"=>{"name"=>"vit", "email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (7.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
Completed 200 OK in 128ms (Views: 19.7ms | ActiveRecord: 1.8ms)


Started POST "/users?locale=en" for 127.0.0.1 at 2013-08-20 10:01:02 +0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "user"=>{"name"=>"vit", "email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (7.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
Completed 200 OK in 100ms (Views: 18.7ms | ActiveRecord: 0.9ms)


Started POST "/users?locale=en" for 127.0.0.1 at 2013-08-20 10:01:14 +0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "user"=>{"name"=>"vit", "email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."confirmation_token" = '7BvmxECh3dUyqhftrPgs' LIMIT 1[0m
  [1m[35mSQL (3.6ms)[0m  INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "created_at", "email", "encrypted_password", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["confirmation_sent_at", Tue, 20 Aug 2013 04:01:14 UTC +00:00], ["confirmation_token", "7BvmxECh3dUyqhftrPgs"], ["created_at", Tue, 20 Aug 2013 04:01:14 UTC +00:00], ["email", "vith@yandex.ru"], ["encrypted_password", "$2a$10$Z9P5/2ZbdLBrN.MoFGQOfebwnQoLN7wsYKI5tTTrn4c4BYtbersMm"], ["name", "vit"], ["updated_at", Tue, 20 Aug 2013 04:01:14 UTC +00:00]]
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/devise-3.0.3/app/views/devise/mailer/confirmation_instructions.html.erb (1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 511ms

ArgumentError - Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true:
  actionpack (4.0.0) lib/action_dispatch/http/url.rb:59:in `build_host_url'
  actionpack (4.0.0) lib/action_dispatch/http/url.rb:40:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:645:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:376:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:209:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:178:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:249:in `block (2 levels) in define_url_helper'
  actionpack (4.0.0) lib/action_dispatch/routing/routes_proxy.rb:31:in `user_confirmation_url'
  actionpack (4.0.0) lib/action_dispatch/routing/routes_proxy.rb:34:in `method_missing'
  devise (3.0.3) lib/devise/controllers/url_helpers.rb:50:in `confirmation_url'
  devise (3.0.3) app/views/devise/mailer/confirmation_instructions.html.erb:5:in `___sers_vith__rvm_gems_ruby_______p____photohome_gems_devise_______app_views_devise_mailer_confirmation_instructions_html_erb__2995945905758826727_70343913921340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionmailer (4.0.0) lib/action_mailer/base.rb:755:in `block in collect_responses'
  actionmailer (4.0.0) lib/action_mailer/base.rb:769:in `each'
  actionmailer (4.0.0) lib/action_mailer/base.rb:769:in `each_template'
  actionmailer (4.0.0) lib/action_mailer/base.rb:751:in `collect_responses'
  actionmailer (4.0.0) lib/action_mailer/base.rb:691:in `mail'
  devise (3.0.3) lib/devise/mailers/helpers.rb:16:in `devise_mail'
  devise (3.0.3) app/mailers/devise/mailer.rb:5:in `confirmation_instructions'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1227985711523222650__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionmailer (4.0.0) lib/action_mailer/base.rb:503:in `process'
  actionmailer (4.0.0) lib/action_mailer/base.rb:497:in `initialize'
  actionmailer (4.0.0) lib/action_mailer/base.rb:480:in `new'
  actionmailer (4.0.0) lib/action_mailer/base.rb:480:in `method_missing'
  devise (3.0.3) lib/devise/models/authenticatable.rb:175:in `send_devise_notification'
  devise (3.0.3) lib/devise/models/confirmable.rb:164:in `send_on_create_confirmation_instructions'
  activesupport (4.0.0) lib/active_support/callbacks.rb:390:in `_run__3276053693906181976__create__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:303:in `create_record'
  activerecord (4.0.0) lib/active_record/timestamp.rb:57:in `create_record'
  activerecord (4.0.0) lib/active_record/persistence.rb:466:in `create_or_update'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `block in create_or_update'
  activesupport (4.0.0) lib/active_support/callbacks.rb:383:in `_run__3276053693906181976__save__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `create_or_update'
  activerecord (4.0.0) lib/active_record/persistence.rb:106:in `save'
  activerecord (4.0.0) lib/active_record/validations.rb:51:in `save'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:32:in `save'
  activerecord (4.0.0) lib/active_record/transactions.rb:270:in `block (2 levels) in save'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:270:in `block in save'
  activerecord (4.0.0) lib/active_record/transactions.rb:281:in `rollback_active_record_state!'
  activerecord (4.0.0) lib/active_record/transactions.rb:269:in `save'
  devise (3.0.3) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:443:in `_run__3020040738138575501__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1321103135171750459__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70343914003380/variables" for 127.0.0.1 at 2013-08-20 10:01:15 +0600


Started POST "/users?locale=en" for 127.0.0.1 at 2013-08-20 10:07:32 +0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "user"=>{"name"=>"vit", "email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'BziscjgKaESx3kBNgBD8' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "created_at", "email", "encrypted_password", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["confirmation_sent_at", Tue, 20 Aug 2013 04:07:32 UTC +00:00], ["confirmation_token", "BziscjgKaESx3kBNgBD8"], ["created_at", Tue, 20 Aug 2013 04:07:32 UTC +00:00], ["email", "vith@yandex.ru"], ["encrypted_password", "$2a$10$QxZEV98Pa5HmojkUSrNg3O8vL1mdOc180oSBX3Pd1xXgpD07zRda."], ["name", "vit"], ["updated_at", Tue, 20 Aug 2013 04:07:32 UTC +00:00]]
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/devise-3.0.3/app/views/devise/mailer/confirmation_instructions.html.erb (1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 109ms

ArgumentError - Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true:
  actionpack (4.0.0) lib/action_dispatch/http/url.rb:59:in `build_host_url'
  actionpack (4.0.0) lib/action_dispatch/http/url.rb:40:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:645:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:376:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:209:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:178:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:249:in `block (2 levels) in define_url_helper'
  actionpack (4.0.0) lib/action_dispatch/routing/routes_proxy.rb:31:in `user_confirmation_url'
  devise (3.0.3) lib/devise/controllers/url_helpers.rb:50:in `confirmation_url'
  devise (3.0.3) app/views/devise/mailer/confirmation_instructions.html.erb:5:in `___sers_vith__rvm_gems_ruby_______p____photohome_gems_devise_______app_views_devise_mailer_confirmation_instructions_html_erb__2995945905758826727_70343913921340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionmailer (4.0.0) lib/action_mailer/base.rb:755:in `block in collect_responses'
  actionmailer (4.0.0) lib/action_mailer/base.rb:769:in `each'
  actionmailer (4.0.0) lib/action_mailer/base.rb:769:in `each_template'
  actionmailer (4.0.0) lib/action_mailer/base.rb:751:in `collect_responses'
  actionmailer (4.0.0) lib/action_mailer/base.rb:691:in `mail'
  devise (3.0.3) lib/devise/mailers/helpers.rb:16:in `devise_mail'
  devise (3.0.3) app/mailers/devise/mailer.rb:5:in `confirmation_instructions'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1227985711523222650__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionmailer (4.0.0) lib/action_mailer/base.rb:503:in `process'
  actionmailer (4.0.0) lib/action_mailer/base.rb:497:in `initialize'
  actionmailer (4.0.0) lib/action_mailer/base.rb:480:in `new'
  actionmailer (4.0.0) lib/action_mailer/base.rb:480:in `method_missing'
  devise (3.0.3) lib/devise/models/authenticatable.rb:175:in `send_devise_notification'
  devise (3.0.3) lib/devise/models/confirmable.rb:164:in `send_on_create_confirmation_instructions'
  activesupport (4.0.0) lib/active_support/callbacks.rb:390:in `_run__3276053693906181976__create__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:303:in `create_record'
  activerecord (4.0.0) lib/active_record/timestamp.rb:57:in `create_record'
  activerecord (4.0.0) lib/active_record/persistence.rb:466:in `create_or_update'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `block in create_or_update'
  activesupport (4.0.0) lib/active_support/callbacks.rb:383:in `_run__3276053693906181976__save__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `create_or_update'
  activerecord (4.0.0) lib/active_record/persistence.rb:106:in `save'
  activerecord (4.0.0) lib/active_record/validations.rb:51:in `save'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:32:in `save'
  activerecord (4.0.0) lib/active_record/transactions.rb:270:in `block (2 levels) in save'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:270:in `block in save'
  activerecord (4.0.0) lib/active_record/transactions.rb:281:in `rollback_active_record_state!'
  activerecord (4.0.0) lib/active_record/transactions.rb:269:in `save'
  devise (3.0.3) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:443:in `_run__3020040738138575501__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1321103135171750459__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70343914540680/variables" for 127.0.0.1 at 2013-08-20 10:07:32 +0600


Started POST "/users?locale=en" for 127.0.0.1 at 2013-08-20 10:08:45 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "user"=>{"name"=>"vit", "email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'GHGJm4gp4ycoLvBMvzjw' LIMIT 1
  [1m[36mSQL (4.1ms)[0m  [1mINSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "created_at", "email", "encrypted_password", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["confirmation_sent_at", Tue, 20 Aug 2013 04:08:45 UTC +00:00], ["confirmation_token", "GHGJm4gp4ycoLvBMvzjw"], ["created_at", Tue, 20 Aug 2013 04:08:45 UTC +00:00], ["email", "vith@yandex.ru"], ["encrypted_password", "$2a$10$GM8MmnFWwcsQ.zmccxhJe.0x2qug6UPXKCpdBYiaXh0dM0700Hpfm"], ["name", "vit"], ["updated_at", Tue, 20 Aug 2013 04:08:45 UTC +00:00]]
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/devise-3.0.3/app/views/devise/mailer/confirmation_instructions.html.erb (2.0ms)

Sent mail to vith@yandex.ru (6212.8ms)
Date: Tue, 20 Aug 2013 10:08:46 +0600
From: please-change-me-at-config-initializers-devise@example.com
Reply-To: please-change-me-at-config-initializers-devise@example.com
To: vith@yandex.ru
Message-ID: <5212ebce3db99_11653fdd7cdd1d7043773@Mac-mini-VITALIY.local.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Welcome vith@yandex.ru!</p>

<p>You can confirm your account email through the link below:</p>

<p><a href="http://localhost:3000/users/confirmation?confirmation_token=GHGJm4gp4ycoLvBMvzjw">Confirm my account</a></p>

  [1m[35m (1.8ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=en
Completed 302 Found in 6891ms (ActiveRecord: 11.3ms)


Started GET "/?locale=en" for 127.0.0.1 at 2013-08-20 10:08:52 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation.html.erb (3.5ms)
Completed 200 OK in 181ms (Views: 178.6ms | ActiveRecord: 0.6ms)


Started GET "/?locale=en" for 127.0.0.1 at 2013-08-20 10:09:04 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation.html.erb (3.2ms)
Completed 200 OK in 24ms (Views: 21.8ms | ActiveRecord: 0.8ms)
  [1m[36mUser Load (4.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]


Started GET "/users/confirmation?confirmation_token=GHGJm4gp4ycoLvBMvzjw" for 127.0.0.1 at 2013-08-20 10:10:01 +0600
Processing by Devise::ConfirmationsController#show as HTML
  Parameters: {"confirmation_token"=>"GHGJm4gp4ycoLvBMvzjw"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'GHGJm4gp4ycoLvBMvzjw' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "users" SET "confirmation_token" = $1, "confirmed_at" = $2, "updated_at" = $3 WHERE "users"."id" = 4[0m  [["confirmation_token", nil], ["confirmed_at", Tue, 20 Aug 2013 04:10:01 UTC +00:00], ["updated_at", Tue, 20 Aug 2013 04:10:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = 4  [["last_sign_in_at", Tue, 20 Aug 2013 04:10:01 UTC +00:00], ["current_sign_in_at", Tue, 20 Aug 2013 04:10:01 UTC +00:00], ["last_sign_in_ip", "127.0.0.1"], ["current_sign_in_ip", "127.0.0.1"], ["sign_in_count", 1], ["updated_at", Tue, 20 Aug 2013 04:10:01 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=en
Completed 302 Found in 43ms (ActiveRecord: 4.2ms)


Started GET "/?locale=en" for 127.0.0.1 at 2013-08-20 10:10:01 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (1.9ms)
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (48.6ms)
Completed 200 OK in 60ms (Views: 52.3ms | ActiveRecord: 6.9ms)


Started GET "/users/edit?locale=en" for 127.0.0.1 at 2013-08-20 10:10:05 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (74.0ms)
default_url_options is passed options: {}

  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.8ms)
Completed 200 OK in 91ms (Views: 88.3ms | ActiveRecord: 1.3ms)
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from irb_binding at (irb):10)
  [1m[35mRole Load (2.4ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.8ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "users_roles" ("user_id", "role_id") VALUES (4, 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m


Started GET "/users" for 127.0.0.1 at 2013-08-20 10:11:27 +0600
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (1.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.9ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (25.5ms)
  Rendered users/index.html.erb within layouts/application (85.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
Completed 200 OK in 106ms (Views: 95.2ms | ActiveRecord: 4.7ms)


Started GET "/users/edit?locale=en" for 127.0.0.1 at 2013-08-20 10:12:03 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (6.9ms)
default_url_options is passed options: {}

  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.0ms)
Completed 200 OK in 23ms (Views: 19.6ms | ActiveRecord: 1.3ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:15:48 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (4.9ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.6ms)
Completed 200 OK in 24ms (Views: 17.2ms | ActiveRecord: 4.0ms)


Started GET "/en/novelties/new" for 127.0.0.1 at 2013-08-20 10:16:25 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (30.5ms)
  Rendered novelties/new.html.erb within layouts/application (32.0ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.2ms)
Completed 200 OK in 48ms (Views: 44.6ms | ActiveRecord: 2.2ms)


Started POST "/en/novelties" for 127.0.0.1 at 2013-08-20 10:16:48 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "novelty"=>{"title"=>"Выставка", "content"=>"Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.", "publish_date(1i)"=>"2013", "publish_date(2i)"=>"8", "publish_date(3i)"=>"20", "published"=>"1", "user_id"=>"4"}, "commit"=>"Create Novelty", "locale"=>"en"}
  [1m[35m (8.1ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["content", "Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui."], ["created_at", Tue, 20 Aug 2013 04:16:48 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", true], ["title", "Выставка"], ["updated_at", Tue, 20 Aug 2013 04:16:48 UTC +00:00], ["user_id", 4]]
  [1m[35m (3.9ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/en/novelties/1
Completed 302 Found in 21ms (ActiveRecord: 13.5ms)


Started GET "/en/novelties/1" for 127.0.0.1 at 2013-08-20 10:16:48 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mNovelty Load (0.9ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (2.3ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (6.2ms)
Completed 200 OK in 42ms (Views: 38.2ms | ActiveRecord: 2.1ms)


Started GET "/en/novelties" for 127.0.0.1 at 2013-08-20 10:16:50 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.2ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (4.4ms)
Completed 200 OK in 18ms (Views: 16.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:17:28 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.1ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.0ms)
Completed 200 OK in 18ms (Views: 15.3ms | ActiveRecord: 1.7ms)


Started GET "/en/novelties/new" for 127.0.0.1 at 2013-08-20 10:17:31 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (9.5ms)
  Rendered novelties/new.html.erb within layouts/application (10.4ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (4.1ms)
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 1.1ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:17:37 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.7ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.2ms)
Completed 200 OK in 21ms (Views: 19.0ms | ActiveRecord: 1.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:17:39 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (2.1ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.2ms)
Completed 200 OK in 18ms (Views: 16.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:18:09 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.3ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (20.2ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (51.1ms)
Completed 200 OK in 83ms (Views: 71.2ms | ActiveRecord: 9.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:18:51 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (29.2ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (99.0ms)
Completed 200 OK in 144ms (Views: 130.7ms | ActiveRecord: 10.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:19:38 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (25.1ms)
default_url_options is passed options: {}

  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (120.5ms)
Completed 200 OK in 324ms (Views: 290.9ms | ActiveRecord: 13.8ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:19:42 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (75.8ms)
  Rendered novelties/new.html.erb within layouts/application (77.1ms)
Completed 500 Internal Server Error in 80ms

NoMethodError - undefined method `map' for "translation missing: ru.date.order":String:
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:886:in `translated_date_order'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:881:in `date_order'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:709:in `select_date'
  actionpack (4.0.0) lib/action_view/helpers/tags/date_select.rb:14:in `render'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:255:in `date_select'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:1055:in `date_select'
  simple_form (3.0.0.rc) lib/simple_form/inputs/date_time_input.rb:5:in `input'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `each'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `each'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/root.rb:15:in `render'
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:118:in `input'
  app/views/novelties/_form.html.erb:7:in `block in _app_views_novelties__form_html_erb__4341111038920111264_70295615543000'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__4341111038920111264_70295615543000'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb___2502531449681451209_70295615480700'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__4089727338262092972__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__324471070778666536__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:19:42 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (11.1ms)
  Rendered novelties/new.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 15ms

NoMethodError - undefined method `map' for "translation missing: ru.date.order":String:
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:886:in `translated_date_order'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:881:in `date_order'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:709:in `select_date'
  actionpack (4.0.0) lib/action_view/helpers/tags/date_select.rb:14:in `render'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:255:in `date_select'
  actionpack (4.0.0) lib/action_view/helpers/date_helper.rb:1055:in `date_select'
  simple_form (3.0.0.rc) lib/simple_form/inputs/date_time_input.rb:5:in `input'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `each'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `each'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/root.rb:15:in `render'
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:118:in `input'
  app/views/novelties/_form.html.erb:7:in `block in _app_views_novelties__form_html_erb__4341111038920111264_70295615953860'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__4341111038920111264_70295615953860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb___2502531449681451209_70295615920840'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__4089727338262092972__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__324471070778666536__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70295648352700/variables" for 127.0.0.1 at 2013-08-20 10:19:42 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:20:18 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (131.0ms)
  Rendered novelties/new.html.erb within layouts/application (138.6ms)
default_url_options is passed options: {}

  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (122.3ms)
Completed 200 OK in 408ms (Views: 374.4ms | ActiveRecord: 12.8ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:21:11 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (71.3ms)
  Rendered novelties/new.html.erb within layouts/application (72.3ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (52.8ms)
Completed 200 OK in 140ms (Views: 127.0ms | ActiveRecord: 9.9ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:21:13 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (52.4ms)
  Rendered novelties/new.html.erb within layouts/application (53.2ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.2ms)
Completed 200 OK in 68ms (Views: 65.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:21:51 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (56.2ms)
  Rendered novelties/new.html.erb within layouts/application (57.9ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (6.7ms)
Completed 200 OK in 82ms (Views: 79.7ms | ActiveRecord: 2.1ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:24:30 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "novelty"=>{"title"=>"Foom", "content"=>"Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>"4"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["content", "Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui."], ["created_at", Tue, 20 Aug 2013 04:24:30 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", false], ["title", "Foom"], ["updated_at", Tue, 20 Aug 2013 04:24:30 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.7ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/2
Completed 302 Found in 120ms (ActiveRecord: 7.1ms)


Started GET "/ru/novelties/2" for 127.0.0.1 at 2013-08-20 10:24:30 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"2"}
  [1m[36mNovelty Load (0.8ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "2"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.4ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (56.8ms)
Completed 200 OK in 69ms (Views: 61.6ms | ActiveRecord: 6.0ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:24:33 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.6ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.6ms)
Completed 200 OK in 19ms (Views: 16.4ms | ActiveRecord: 1.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:27:24 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (5.0ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.6ms)
Completed 200 OK in 22ms (Views: 19.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:29:17 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (4.1ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.0ms)
Completed 200 OK in 20ms (Views: 17.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:29:36 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.3ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (6.0ms)
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:30:17 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.7ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (5.0ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.7ms)
Completed 200 OK in 21ms (Views: 18.9ms | ActiveRecord: 1.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:31:45 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (5.6ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.7ms)
Completed 200 OK in 25ms (Views: 22.3ms | ActiveRecord: 1.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:32:12 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (3.2ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.9ms)
Completed 200 OK in 23ms (Views: 20.5ms | ActiveRecord: 1.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:32:50 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (6.1ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (6.3ms)
Completed 200 OK in 25ms (Views: 22.2ms | ActiveRecord: 1.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:33:34 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (53.0ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (5.2ms)
Completed 200 OK in 68ms (Views: 65.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:33:53 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  Rendered novelties/index.html.erb within layouts/application (6.0ms)
Completed 500 Internal Server Error in 9ms

NoMethodError - undefined method `name' for #<Novelty:0x007fdb7361a020>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  app/views/novelties/index.html.erb:24:in `block in _app_views_novelties_index_html_erb__856965016397824280_70290255122520'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/novelties/index.html.erb:18:in `_app_views_novelties_index_html_erb__856965016397824280_70290255122520'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__4265918779054417241__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2921894446910019856__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70290255233340/variables" for 127.0.0.1 at 2013-08-20 10:33:53 +0600
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"[0m


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 10:34:38 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (27.2ms)
  Rendered novelties/new.html.erb within layouts/application (30.0ms)
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (4.9ms)
Completed 200 OK in 55ms (Views: 52.5ms | ActiveRecord: 1.7ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 10:34:40 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"cZaFV+QBoo++8DcdZpZMxtjR/VY55Tf0l+AbahEHwWY=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 40ms (ActiveRecord: 1.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:34:41 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation.html.erb (11.0ms)
Completed 200 OK in 36ms (Views: 34.6ms | ActiveRecord: 0.5ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 10:34:42 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (50.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.9ms)
Completed 200 OK in 105ms (Views: 103.0ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-20 10:34:44 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.9ms)
  Rendered devise/registrations/new.html.erb within layouts/application (8.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.1ms)
Completed 200 OK in 26ms (Views: 24.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (5.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:36:08 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.8ms)
Completed 200 OK in 26ms (Views: 24.0ms | ActiveRecord: 1.3ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:41:55 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
ERROR: compiling _app_views_novelties_index_html_erb___1497111163826922622_70127158520580 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:26: unknown regexp options - td
unmatched close parenthesis: /td>
        <td><%= link_to 'Edit', edit_novelty_path(novelty) );@output_buffer.safe_append='</
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected '<'
        <td>';@output_buffer.append=( ...
         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected tCONSTANT, expecting ')'
...uffer.append=( link_to 'Destroy', novelty, method: :delete, ...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected tCONSTANT, expecting ')'
... :delete, data: { confirm: 'Are you sure?' } );@output_buffe...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:28: unknown regexp options - tr
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:31: unknown regexp options - tabl
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:33: syntax error, unexpected '<'
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:35: syntax error, unexpected tCONSTANT, expecting ')'
...ut_buffer.append=( link_to 'New Novelty', new_novelty_path )...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:36: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:36: syntax error, unexpected end-of-input, expecting ')'
Function body:           def _app_views_novelties_index_html_erb___1497111163826922622_70127158520580(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "novelties/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append='<h1>Новости</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Заголовок</th>
      <th>Содержание</th>
      <th>Дата</th>
      <th>Опубликовано<nobr/>?</th>
      <th>Пользователь</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
';     @novelties.each do |novelty| 
@output_buffer.safe_append='      <tr>
        <td>';@output_buffer.append=( novelty.title );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( novelty.content );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( I18n.l(novelty.publish_date) );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( novelty.published );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( novelty.user.name );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( link_to content_tag(:span,"",class: "ui-icon ui-icon-pencil"),novelty</td>
        <td><%= link_to 'Edit', edit_novelty_path(novelty) );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( link_to 'Destroy', novelty, method: :delete, data: { confirm: 'Are you sure?' } );@output_buffer.safe_append='</td>
      </tr>
';     end 
@output_buffer.safe_append='  </tbody>
</table>

<br>

';@output_buffer.append=( link_to 'New Novelty', new_novelty_path );@output_buffer.safe_append='
';@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__4161589022135078777__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3085125902430523699__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered novelties/index.html.erb within layouts/application (22.0ms)
Completed 500 Internal Server Error in 50ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:26: unknown regexp options - td
unmatched close parenthesis: /td>
        <td><%= link_to 'Edit', edit_novelty_path(novelty) );@output_buffer.safe_append='</
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected '<'
        <td>';@output_buffer.append=( ...
         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected tCONSTANT, expecting ')'
...uffer.append=( link_to 'Destroy', novelty, method: :delete, ...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:27: syntax error, unexpected tCONSTANT, expecting ')'
... :delete, data: { confirm: 'Are you sure?' } );@output_buffe...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:28: unknown regexp options - tr
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:31: unknown regexp options - tabl
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:33: syntax error, unexpected '<'
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:35: syntax error, unexpected tCONSTANT, expecting ')'
...ut_buffer.append=( link_to 'New Novelty', new_novelty_path )...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:36: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/novelties/index.html.erb:36: syntax error, unexpected end-of-input, expecting ')':
  app/views/novelties/index.html.erb:26:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `module_eval'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `synchronize'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__4161589022135078777__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3085125902430523699__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70127194709000/variables" for 127.0.0.1 at 2013-08-20 10:41:55 +0600
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:42:41 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (4.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (117.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (11.9ms)
Completed 200 OK in 412ms (Views: 397.1ms | ActiveRecord: 14.4ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:47:46 +0600
Processing by NoveltiesController#index as HTML
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.8ms)
Completed 200 OK in 24ms (Views: 21.7ms | ActiveRecord: 1.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:48:13 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation.html.erb (1.8ms)
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 0.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:48:13 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation.html.erb (2.6ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.6ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:48:23 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.8ms)
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 1.3ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:49:25 +0600
Processing by NoveltiesController#index as HTML
  [1m[35mNovelty Load (1.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.1ms)
Completed 200 OK in 493ms (Views: 490.2ms | ActiveRecord: 1.9ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:52:47 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.8ms)
Completed 200 OK in 25ms (Views: 23.3ms | ActiveRecord: 1.2ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 10:52:53 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mNovelty Load (0.9ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.9ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 10:53:34 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (2.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.0ms)
Completed 200 OK in 69ms (Views: 66.8ms | ActiveRecord: 0.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:53:52 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (6.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.8ms)
Completed 200 OK in 21ms (Views: 19.9ms | ActiveRecord: 1.0ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:58:29 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
Completed 500 Internal Server Error in 6ms

NameError - undefined local variable or method `load_and_authorize_resource' for #<Class:0x007f8f80e40798>:
  activerecord (4.0.0) lib/active_record/dynamic_matchers.rb:22:in `method_missing'
  app/models/novelty.rb:4:in `<class:Novelty>'
  app/models/novelty.rb:1:in `<top (required)>'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/dependencies.rb:494:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  app/controllers/novelties_controller.rb:7:in `index'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__4161589022135078777__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3085125902430523699__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70127159819880/variables" for 127.0.0.1 at 2013-08-20 10:58:30 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 10:59:26 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 25ms (ActiveRecord: 5.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:59:27 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (77.0ms)
  Rendered layouts/_navigation.html.erb (1.8ms)
Completed 200 OK in 93ms (Views: 91.6ms | ActiveRecord: 0.5ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 10:59:34 +0600
Processing by NoveltiesController#index as HTML
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:59:34 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.1ms)
  Rendered layouts/_navigation.html.erb (1.5ms)
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.5ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 10:59:42 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (2.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (76.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.8ms)
Completed 200 OK in 105ms (Views: 101.8ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 10:59:48 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rfFWXOSjFJvkEqHMXikRgy24VBMDhCChhCg+KIngj4k=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (2.2ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = 4[0m  [["current_sign_in_at", Tue, 20 Aug 2013 04:59:48 UTC +00:00], ["sign_in_count", 2], ["updated_at", Tue, 20 Aug 2013 04:59:48 UTC +00:00]]
  [1m[35m (0.7ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 105ms (ActiveRecord: 4.3ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 10:59:48 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.4ms)
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (30.7ms)
Completed 200 OK in 49ms (Views: 42.4ms | ActiveRecord: 5.8ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:00:02 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (43.7ms)
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (16.4ms)
Completed 200 OK in 75ms (Views: 65.6ms | ActiveRecord: 8.2ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 11:00:10 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (27.9ms)
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (9.5ms)
Completed 200 OK in 55ms (Views: 44.3ms | ActiveRecord: 7.0ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 11:01:11 +0600
Processing by NoveltiesController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.3ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (26.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 103ms (Views: 40.2ms | ActiveRecord: 12.0ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 11:01:41 +0600
Processing by NoveltiesController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (5.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 25.8ms | ActiveRecord: 2.1ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 11:01:45 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mNovelty Load (0.8ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "1"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (0.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 72ms (Views: 17.1ms | ActiveRecord: 2.1ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:01:48 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (5.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 19.8ms | ActiveRecord: 2.2ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:01:55 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.3ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (68.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 144ms (Views: 80.9ms | ActiveRecord: 11.0ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:02 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (1.2ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (1.4ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mRole Load (0.5ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (31.2ms)
  Rendered users/index.html.erb within layouts/application (148.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 179ms (Views: 164.4ms | ActiveRecord: 5.1ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:09 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"SGqpZ0WgRu40cjArzhcT2IgJACjZe5nJkT5KuXExFCI=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 44ms (ActiveRecord: 1.3ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:09 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.1ms)
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 18.7ms | ActiveRecord: 0.5ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:10 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.html.erb within layouts/application (10.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 103ms (Views: 101.8ms | ActiveRecord: 0.0ms)


Started POST "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:27 +0600
Processing by RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eVXtO9oMFXRjOnLA+EofGWG537d/mZjCxXNbDkGDCcc=", "user"=>{"name"=>"moder", "email"=>"vith77@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"ru"}
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'vith77@gmail.com' LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'db2AyBFjp9yhJqS6XyVM' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "created_at", "email", "encrypted_password", "name", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["confirmation_sent_at", Tue, 20 Aug 2013 05:02:27 UTC +00:00], ["confirmation_token", "db2AyBFjp9yhJqS6XyVM"], ["created_at", Tue, 20 Aug 2013 05:02:27 UTC +00:00], ["email", "vith77@gmail.com"], ["encrypted_password", "$2a$10$QM/BrMXHu0E8tr2nCrk4MebNa4Hy9bh9Vzb9oTOi.et817ABZqk7W"], ["name", "moder"], ["updated_at", Tue, 20 Aug 2013 05:02:27 UTC +00:00]]
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/devise-3.0.3/app/views/devise/mailer/confirmation_instructions.html.erb (0.9ms)

Sent mail to vith77@gmail.com (4995.9ms)
Date: Tue, 20 Aug 2013 11:02:28 +0600
From: please-change-me-at-config-initializers-devise@example.com
Reply-To: please-change-me-at-config-initializers-devise@example.com
To: vith77@gmail.com
Message-ID: <5212f8646875d_12913fc7c322a9f05084c@Mac-mini-VITALIY.local.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Welcome vith77@gmail.com!</p>

<p>You can confirm your account email through the link below:</p>

<p><a href="http://localhost:3000/users/confirmation?confirmation_token=db2AyBFjp9yhJqS6XyVM">Confirm my account</a></p>

  [1m[35m (0.7ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 5572ms (ActiveRecord: 3.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:02:33 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 59ms (Views: 57.9ms | ActiveRecord: 0.5ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 11:03:07 +0600
Processing by HomeController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 17.5ms | ActiveRecord: 0.5ms)


Started GET "/users/confirmation?confirmation_token=db2AyBFjp9yhJqS6XyVM" for 127.0.0.1 at 2013-08-20 11:05:21 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::ConfirmationsController#show as HTML
  Parameters: {"confirmation_token"=>"db2AyBFjp9yhJqS6XyVM"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'db2AyBFjp9yhJqS6XyVM' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.1ms)[0m  UPDATE "users" SET "confirmation_token" = $1, "confirmed_at" = $2, "updated_at" = $3 WHERE "users"."id" = 5  [["confirmation_token", nil], ["confirmed_at", Tue, 20 Aug 2013 05:05:22 UTC +00:00], ["updated_at", Tue, 20 Aug 2013 05:05:22 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = 5[0m  [["last_sign_in_at", Tue, 20 Aug 2013 05:05:22 UTC +00:00], ["current_sign_in_at", Tue, 20 Aug 2013 05:05:22 UTC +00:00], ["last_sign_in_ip", "127.0.0.1"], ["current_sign_in_ip", "127.0.0.1"], ["sign_in_count", 1], ["updated_at", Tue, 20 Aug 2013 05:05:22 UTC +00:00]]
  [1m[35m (0.6ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 124ms (ActiveRecord: 11.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:05:22 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (4.1ms)
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (89.6ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 465ms (Views: 457.0ms | ActiveRecord: 6.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:05:30 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (4.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 64ms (Views: 61.9ms | ActiveRecord: 1.8ms)


Started GET "/novelties" for 127.0.0.1 at 2013-08-20 11:05:37 +0600
Processing by NoveltiesController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 16ms (ActiveRecord: 1.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:05:37 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (4.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 23ms (Views: 20.3ms | ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "roles" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Tue, 20 Aug 2013 05:06:57 UTC +00:00], ["name", "moder"], ["updated_at", Tue, 20 Aug 2013 05:06:57 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:21 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"eVXtO9oMFXRjOnLA+EofGWG537d/mZjCxXNbDkGDCcc=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 116ms (ActiveRecord: 4.8ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:21 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (5.7ms)
  Rendered layouts/_navigation.html.erb (10.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 348ms (Views: 346.8ms | ActiveRecord: 0.6ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:25 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (70.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 92ms (Views: 89.9ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:31 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uLUbYcfTBbFMLIWxyJdBCd4BT/xo198Ux6mCS8Syunc=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (1.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Tue, 20 Aug 2013 04:59:48 UTC +00:00], ["current_sign_in_at", Tue, 20 Aug 2013 05:07:31 UTC +00:00], ["sign_in_count", 3], ["updated_at", Tue, 20 Aug 2013 05:07:31 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 96ms (ActiveRecord: 6.8ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:31 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.2ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (35.6ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 54ms (Views: 45.0ms | ActiveRecord: 8.0ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:34 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.9ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  Rendered users/_user.html.erb (24.8ms)
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.5ms)
  Rendered users/index.html.erb within layouts/application (39.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 64ms (Views: 53.4ms | ActiveRecord: 5.5ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:07:40 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
Completed 500 Internal Server Error in 25ms

ArgumentError - wrong number of arguments (2 for 1):
  activerecord (4.0.0) lib/active_record/persistence.rb:225:in `update'
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3585088588676963101__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4090778561881055366__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70218193592580/variables" for 127.0.0.1 at 2013-08-20 11:07:40 +0600


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:08:00 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  Rendered users/_user.html.erb (6.5ms)
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.2ms)
  Rendered users/index.html.erb within layouts/application (18.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 31.2ms | ActiveRecord: 4.8ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:08:03 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (0.9ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  Rendered users/_user.html.erb (9.2ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.3ms)
  Rendered users/index.html.erb within layouts/application (27.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 51ms (Views: 40.6ms | ActiveRecord: 5.9ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:08:10 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"2"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (17.2ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "5"]]
Completed 500 Internal Server Error in 25ms

ArgumentError - wrong number of arguments (2 for 1):
  activerecord (4.0.0) lib/active_record/persistence.rb:225:in `update'
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3585088588676963101__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4090778561881055366__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70218190914580/variables" for 127.0.0.1 at 2013-08-20 11:08:10 +0600


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:08:40 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (15.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (3.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.4ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  Rendered users/_user.html.erb (11.1ms)
  [1m[35mRole Load (0.5ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (6.5ms)
  Rendered users/index.html.erb within layouts/application (28.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 71ms (Views: 43.9ms | ActiveRecord: 22.0ms)


Started PUT "/users/4?locale=ru" for 127.0.0.1 at 2013-08-20 11:08:45 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"1"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "4"]]
Completed 500 Internal Server Error in 8ms

ArgumentError - wrong number of arguments (2 for 1):
  activerecord (4.0.0) lib/active_record/persistence.rb:225:in `update'
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3585088588676963101__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4090778561881055366__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70218192234660/variables" for 127.0.0.1 at 2013-08-20 11:08:45 +0600
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from irb_binding at (irb):7)
  [1m[36mRole Load (1.9ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'moder' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.9ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 4 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.8ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mRole Load (0.3ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."id" IN (1, 4)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "users_roles" ("user_id", "role_id") VALUES (4, 4)[0m
  [1m[35m (0.6ms)[0m  COMMIT


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:09:27 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.4ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  Rendered users/_user.html.erb (7.5ms)
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (4.2ms)
  Rendered users/index.html.erb within layouts/application (60.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 82ms (Views: 73.8ms | ActiveRecord: 3.9ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:09:30 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  Rendered users/_user.html.erb (6.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (5.5ms)
  Rendered users/index.html.erb within layouts/application (21.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 37.1ms | ActiveRecord: 4.1ms)
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 5]]
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from irb_binding at (irb):9)
  [1m[35mRole Load (0.9ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'moder' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 4 LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 4)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:10:14 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.3ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.4ms)
  Rendered users/index.html.erb within layouts/application (17.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 32.0ms | ActiveRecord: 3.7ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:10:19 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (5.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
Completed 500 Internal Server Error in 13ms

ArgumentError - wrong number of arguments (2 for 1):
  activerecord (4.0.0) lib/active_record/persistence.rb:225:in `update'
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3585088588676963101__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4090778561881055366__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70218219874520/variables" for 127.0.0.1 at 2013-08-20 11:10:19 +0600


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:11:24 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (1.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.8ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (88.0ms)
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.9ms)
  Rendered users/index.html.erb within layouts/application (128.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 600ms (Views: 453.3ms | ActiveRecord: 15.3ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:11:28 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
Completed 500 Internal Server Error in 10ms

ArgumentError - wrong number of arguments (2 for 1):
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099898618440/variables" for 127.0.0.1 at 2013-08-20 11:11:28 +0600


Started POST "/__better_errors/70099898618440/eval" for 127.0.0.1 at 2013-08-20 11:11:41 +0600


Started POST "/__better_errors/70099898618440/eval" for 127.0.0.1 at 2013-08-20 11:11:52 +0600
  [1m[36mUser Load (3.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Load (0.8ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mRole Load (1.9ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:17:15 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 101ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/users_controller.rb:17:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099876240180/variables" for 127.0.0.1 at 2013-08-20 11:17:15 +0600


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:17:26 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (14.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 27ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/users_controller.rb:17:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099907471380/variables" for 127.0.0.1 at 2013-08-20 11:17:26 +0600


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:17:43 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.8ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (7.5ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.3ms)
  Rendered users/index.html.erb within layouts/application (39.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 63ms (Views: 53.5ms | ActiveRecord: 5.6ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:17:48 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 11ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/users_controller.rb:17:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099899215040/variables" for 127.0.0.1 at 2013-08-20 11:17:48 +0600


Started POST "/__better_errors/70099899215040/eval" for 127.0.0.1 at 2013-08-20 11:19:14 +0600


Started POST "/__better_errors/70099899215040/eval" for 127.0.0.1 at 2013-08-20 11:19:26 +0600
  [1m[35mRole Load (1.2ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mRole Load (0.8ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:24:06 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
Completed 500 Internal Server Error in 97ms

ArgumentError - wrong number of arguments (2 for 1):
  app/controllers/users_controller.rb:16:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099906696100/variables" for 127.0.0.1 at 2013-08-20 11:24:07 +0600


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:08 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "5"]]
Completed 404 Not Found in 96ms

ActiveRecord::RecordNotFound - Couldn't find Role without an ID:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:266:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:62:in `ids_writer'
  activerecord (4.0.0) lib/active_record/associations/builder/collection_association.rb:84:in `role_ids='
  app/controllers/users_controller.rb:17:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1724437137050451989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099875906780/variables" for 127.0.0.1 at 2013-08-20 11:25:08 +0600


Started POST "/__better_errors/70099875906780/eval" for 127.0.0.1 at 2013-08-20 11:25:23 +0600


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:45 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mRole Load (0.9ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/users?locale=ru
Completed 302 Found in 77ms (ActiveRecord: 9.8ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:46 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.8ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (8.1ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (6.9ms)
  Rendered users/index.html.erb within layouts/application (27.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (4.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 100ms (Views: 91.0ms | ActiveRecord: 4.8ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:51 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"1"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (19.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRole Load (1.6ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (7.6ms)[0m  [1mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = 5 AND "users_roles"."role_id" IN (4)[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/users?locale=ru
Completed 302 Found in 51ms (ActiveRecord: 37.7ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:51 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.5ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (6.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.3ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (4.6ms)
  Rendered users/index.html.erb within layouts/application (18.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 31.3ms | ActiveRecord: 3.5ms)


Started PUT "/users/5?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:56 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (10.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (5.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mRole Load (0.8ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  DELETE FROM "users_roles" WHERE "users_roles"."user_id" = 5 AND "users_roles"."role_id" IN (1)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 4)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/users?locale=ru
Completed 302 Found in 35ms (ActiveRecord: 21.4ms)


Started GET "/users?locale=ru" for 127.0.0.1 at 2013-08-20 11:25:56 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.3ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (6.0ms)
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.3ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (4.5ms)
  Rendered users/index.html.erb within layouts/application (18.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 33.5ms | ActiveRecord: 3.5ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 11:26:11 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"K2wvYwa15FQP/3eoE64jx0zZA/wgBzF4d03q1P2Nhn4=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 103ms (ActiveRecord: 1.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:26:12 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation.html.erb (12.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 37.6ms | ActiveRecord: 0.5ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:26:14 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.6ms)
  Rendered devise/sessions/new.html.erb within layouts/application (16.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 35ms (Views: 32.4ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:26:19 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mAFUpaUIMP5WPr9Pw861Qx8Y0qlV/RvuFbAjPh5SjhQ=", "user"=>{"email"=>"vith77@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith77@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = 5[0m  [["current_sign_in_at", Tue, 20 Aug 2013 05:26:19 UTC +00:00], ["sign_in_count", 2], ["updated_at", Tue, 20 Aug 2013 05:26:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 154ms (ActiveRecord: 3.2ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:26:19 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (4.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 18.3ms | ActiveRecord: 1.6ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:27:17 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (5.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 26ms (Views: 23.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:27:20 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:27:20 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.6ms)
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (4.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.1ms | ActiveRecord: 2.1ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:28:06 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (87.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (13.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 116ms (Views: 107.4ms | ActiveRecord: 7.4ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:28:10 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.8ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (35.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 144ms (Views: 126.1ms | ActiveRecord: 7.2ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 11:28:12 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mNovelty Load (0.8ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "1"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 17.2ms | ActiveRecord: 2.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:29:43 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.3ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (70.3ms)
Completed 500 Internal Server Error in 155ms

NoMethodError - undefined method `can' for #<#<Class:0x007f82d0795bd0>:0x007f82d07949d8>:
  app/views/layouts/application.html.erb:49:in `_app_views_layouts_application_html_erb__3963822292796725552_70099910059320'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__883806302293413172__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099894143580/variables" for 127.0.0.1 at 2013-08-20 11:29:44 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:30:03 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (6.9ms)
Completed 500 Internal Server Error in 40ms

NoMethodError - undefined method `can' for #<User:0x007f82caf53a30>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  rolify (3.2.0) lib/rolify/role.rb:73:in `method_missing'
  app/views/layouts/application.html.erb:49:in `_app_views_layouts_application_html_erb__3963822292796725552_70099893811920'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__883806302293413172__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099906291480/variables" for 127.0.0.1 at 2013-08-20 11:30:04 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:30:27 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (6.2ms)
Completed 500 Internal Server Error in 36ms

NoMethodError - undefined method `can?' for #<User:0x007f82cf192338>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  rolify (3.2.0) lib/rolify/role.rb:73:in `method_missing'
  app/views/layouts/application.html.erb:49:in `_app_views_layouts_application_html_erb__3963822292796725552_70099906451720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__883806302293413172__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3043308919466327049__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70099864569960/variables" for 127.0.0.1 at 2013-08-20 11:30:27 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:30:36 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 28.2ms | ActiveRecord: 3.1ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 11:30:40 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"9Ni1hU+KNjyIVJljmrFyJe8DtFIxP6rZh4MmyYQGeAc=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 63ms (ActiveRecord: 1.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:30:40 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 22ms (Views: 20.3ms | ActiveRecord: 0.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:33:13 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (40.5ms)
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 69ms (Views: 61.3ms | ActiveRecord: 6.3ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:33:16 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.3ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (24.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 45ms (Views: 37.0ms | ActiveRecord: 3.1ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 11:33:18 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (0.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 16.2ms | ActiveRecord: 0.5ms)


Started GET "/ru/novelties/1/edit" for 127.0.0.1 at 2013-08-20 11:33:21 +0600
Processing by NoveltiesController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:33:21 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 17.1ms | ActiveRecord: 0.5ms)


Started DELETE "/ru/novelties/1" for 127.0.0.1 at 2013-08-20 11:33:26 +0600
Processing by NoveltiesController#destroy as HTML
  Parameters: {"authenticity_token"=>"MYEB4QJLM4/xsw+cXaDEZ1qXn0pMTZX66G+qYoz0bIo=", "locale"=>"ru", "id"=>"1"}
  [1m[36mNovelty Load (0.7ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:33:26 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 20.2ms | ActiveRecord: 0.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:33:31 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 28.6ms | ActiveRecord: 1.0ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:46:48 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (117.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 600ms (Views: 503.0ms | ActiveRecord: 12.2ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:46:52 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:46:52 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 25ms (Views: 23.6ms | ActiveRecord: 0.6ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:46:55 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (75.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 97ms (Views: 94.0ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:47:02 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MYEB4QJLM4/xsw+cXaDEZ1qXn0pMTZX66G+qYoz0bIo=", "user"=>{"email"=>"vith77@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith77@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 5  [["last_sign_in_at", Tue, 20 Aug 2013 05:26:19 UTC +00:00], ["current_sign_in_at", Tue, 20 Aug 2013 05:47:02 UTC +00:00], ["sign_in_count", 3], ["updated_at", Tue, 20 Aug 2013 05:47:02 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 95ms (ActiveRecord: 4.2ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:47:02 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 74ms (Views: 66.5ms | ActiveRecord: 6.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:47:05 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (6.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 22.8ms | ActiveRecord: 3.0ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:47:07 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (107.1ms)
  Rendered novelties/new.html.erb within layouts/application (109.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 166ms (Views: 156.9ms | ActiveRecord: 2.5ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:47:28 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iPSauBtxn40DybOP8iJX/EYwdDUAPNjnNctWML6fKtM=", "novelty"=>{"title"=>"Еще одна", "content"=>"Выставка", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"1", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283299793700/variables" for 127.0.0.1 at 2013-08-20 11:47:28 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:47:32 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (14.8ms)
  Rendered novelties/new.html.erb within layouts/application (15.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 42ms (Views: 31.8ms | ActiveRecord: 2.7ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:47:35 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iPSauBtxn40DybOP8iJX/EYwdDUAPNjnNctWML6fKtM=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283263541800/variables" for 127.0.0.1 at 2013-08-20 11:47:35 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:47:42 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (5.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 21.1ms | ActiveRecord: 3.3ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:47:43 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 80ms (Views: 67.9ms | ActiveRecord: 3.5ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:48:04 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (32.7ms)
  Rendered novelties/new.html.erb within layouts/application (33.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 152ms (Views: 49.4ms | ActiveRecord: 10.0ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:48:08 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iPSauBtxn40DybOP8iJX/EYwdDUAPNjnNctWML6fKtM=", "novelty"=>{"title"=>"ццв", "content"=>"цвцв", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 6ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283310628960/variables" for 127.0.0.1 at 2013-08-20 11:48:08 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:48:17 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (17.6ms)
  Rendered novelties/new.html.erb within layouts/application (18.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 47ms (Views: 35.6ms | ActiveRecord: 2.3ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:48:29 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iPSauBtxn40DybOP8iJX/EYwdDUAPNjnNctWML6fKtM=", "novelty"=>{"title"=>"аууа", "content"=>"цуаца", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"1", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283263992980/variables" for 127.0.0.1 at 2013-08-20 11:48:29 +0600


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-20 11:49:08 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"iPSauBtxn40DybOP8iJX/EYwdDUAPNjnNctWML6fKtM=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:49:08 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.7ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:49:10 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/sessions/new.html.erb within layouts/application (47.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 66ms (Views: 64.8ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-20 11:49:17 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"D5MhLz1dNheE+QqvKw8iqGfV+0BVbXbx+u5tZMEiQUI=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Tue, 20 Aug 2013 05:07:31 UTC +00:00], ["current_sign_in_at", Tue, 20 Aug 2013 05:49:18 UTC +00:00], ["sign_in_count", 4], ["updated_at", Tue, 20 Aug 2013 05:49:18 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 88ms (ActiveRecord: 2.3ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-20 11:49:18 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 22.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:49:20 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (5.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 20.3ms | ActiveRecord: 2.0ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:49:22 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (61.0ms)
  Rendered novelties/new.html.erb within layouts/application (62.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 84ms (Views: 77.1ms | ActiveRecord: 1.7ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:49:27 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"ewwe", "content"=>"ewwe", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"1", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283299978280/variables" for 127.0.0.1 at 2013-08-20 11:49:27 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:49:30 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (55.2ms)
  Rendered novelties/new.html.erb within layouts/application (56.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 79ms (Views: 71.5ms | ActiveRecord: 1.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:49:40 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"weew", "content"=>"ewewe", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"1", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283299564020/variables" for 127.0.0.1 at 2013-08-20 11:49:40 +0600


Started POST "/__better_errors/70283299564020/eval" for 127.0.0.1 at 2013-08-20 11:49:55 +0600


Started POST "/__better_errors/70283299564020/eval" for 127.0.0.1 at 2013-08-20 11:50:08 +0600


Started POST "/__better_errors/70283299564020/eval" for 127.0.0.1 at 2013-08-20 11:50:15 +0600


Started POST "/__better_errors/70283299564020/eval" for 127.0.0.1 at 2013-08-20 11:50:20 +0600


Started POST "/__better_errors/70283299564020/variables" for 127.0.0.1 at 2013-08-20 11:52:00 +0600


Started POST "/__better_errors/70283299564020/variables" for 127.0.0.1 at 2013-08-20 11:52:04 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:52:50 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (19.7ms)
  Rendered novelties/new.html.erb within layouts/application (21.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 50ms (Views: 38.4ms | ActiveRecord: 2.0ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:53:08 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (22.4ms)
  Rendered novelties/new.html.erb within layouts/application (23.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 40.0ms | ActiveRecord: 1.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:53:14 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"2323", "content"=>"32", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 15ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283272987820/variables" for 127.0.0.1 at 2013-08-20 11:53:14 +0600


Started POST "/__better_errors/70283272987820/eval" for 127.0.0.1 at 2013-08-20 11:53:25 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:53:33 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (15.4ms)
  Rendered novelties/new.html.erb within layouts/application (16.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 32.6ms | ActiveRecord: 1.5ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:53:39 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"22e2e", "content"=>"e2ee", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 22ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__4271194443230186049__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2449272145542499967__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70283310862340/variables" for 127.0.0.1 at 2013-08-20 11:53:39 +0600


Started POST "/__better_errors/70283310862340/eval" for 127.0.0.1 at 2013-08-20 11:54:06 +0600


Started POST "/__better_errors/70283310862340/eval" for 127.0.0.1 at 2013-08-20 11:54:36 +0600


Started POST "/__better_errors/70283310862340/eval" for 127.0.0.1 at 2013-08-20 11:54:56 +0600


Started POST "/__better_errors/70283310862340/eval" for 127.0.0.1 at 2013-08-20 11:55:08 +0600


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:55:47 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"22e2e", "content"=>"e2ee", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 28ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2122385812663571193__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1310267261422108472__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70138787444720/variables" for 127.0.0.1 at 2013-08-20 11:55:47 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:56:22 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (116.4ms)
  Rendered novelties/new.html.erb within layouts/application (120.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 626ms (Views: 482.7ms | ActiveRecord: 13.3ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:56:28 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"ee", "content"=>"ee", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 4ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107594725060/variables" for 127.0.0.1 at 2013-08-20 11:56:28 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:03 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (68.3ms)
  Rendered novelties/new.html.erb within layouts/application (69.6ms)
Completed 500 Internal Server Error in 130ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107632474120'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107632474120'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107632413600'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:03 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (21.6ms)
  Rendered novelties/new.html.erb within layouts/application (22.3ms)
Completed 500 Internal Server Error in 36ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107608168900'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107608168900'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107610671040/variables" for 127.0.0.1 at 2013-08-20 11:57:04 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:57:18 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.8ms)[0m  SELECT "novelties".* FROM "novelties"
default_url_options is passed options: {}

  Rendered novelties/index.html.erb within layouts/application (7.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 42ms (Views: 30.4ms | ActiveRecord: 2.4ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:21 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (51.6ms)
  Rendered novelties/new.html.erb within layouts/application (52.4ms)
Completed 500 Internal Server Error in 61ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107632474120'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107632474120'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107632413600'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:21 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (14.3ms)
  Rendered novelties/new.html.erb within layouts/application (15.1ms)
Completed 500 Internal Server Error in 26ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107608168900'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107608168900'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107610012460/variables" for 127.0.0.1 at 2013-08-20 11:57:21 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:44 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (19.3ms)
  Rendered novelties/new.html.erb within layouts/application (20.4ms)
Completed 500 Internal Server Error in 33ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107609553580'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107609553580'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107589521940/variables" for 127.0.0.1 at 2013-08-20 11:57:44 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:48 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (45.4ms)
  Rendered novelties/new.html.erb within layouts/application (46.1ms)
Completed 500 Internal Server Error in 55ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107594555960'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107594555960'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107632413600'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:48 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (12.6ms)
  Rendered novelties/new.html.erb within layouts/application (13.6ms)
Completed 500 Internal Server Error in 27ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107609553580'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107609553580'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107610518100/variables" for 127.0.0.1 at 2013-08-20 11:57:48 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:57:59 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (16.2ms)
  Rendered novelties/new.html.erb within layouts/application (17.2ms)
Completed 500 Internal Server Error in 28ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107609583460'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107609583460'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107589529480/variables" for 127.0.0.1 at 2013-08-20 11:58:00 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:58:13 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (51.4ms)
  Rendered novelties/new.html.erb within layouts/application (52.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 77ms (Views: 68.9ms | ActiveRecord: 1.1ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:58:17 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"sdsd", "content"=>"dsd"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 4ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107633984040/variables" for 127.0.0.1 at 2013-08-20 11:58:17 +0600


Started POST "/__better_errors/70107633984040/eval" for 127.0.0.1 at 2013-08-20 11:58:29 +0600


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:59:27 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"sdsd", "content"=>"dsd"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 4ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107585039560/variables" for 127.0.0.1 at 2013-08-20 11:59:27 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:59:29 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (14.9ms)
  Rendered novelties/new.html.erb within layouts/application (16.3ms)
Completed 500 Internal Server Error in 25ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107594703240'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107594703240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107632413600'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:59:29 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/_form.html.erb (50.6ms)
  Rendered novelties/new.html.erb within layouts/application (51.2ms)
Completed 500 Internal Server Error in 61ms

RuntimeError - Association :user not found:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:179:in `association'
  app/views/novelties/_form.html.erb:9:in `block in _app_views_novelties__form_html_erb__2107048401415027719_70107632279360'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/novelties/_form.html.erb:1:in `_app_views_novelties__form_html_erb__2107048401415027719_70107632279360'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/novelties/new.html.erb:3:in `_app_views_novelties_new_html_erb__3459973901345336288_70107588309860'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107619456920/variables" for 127.0.0.1 at 2013-08-20 11:59:30 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:59:34 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  Rendered novelties/index.html.erb within layouts/application (3.5ms)
Completed 500 Internal Server Error in 15ms

NoMethodError - undefined method `user' for #<Novelty:0x007f86633bc450>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  app/views/novelties/index.html.erb:24:in `block in _app_views_novelties_index_html_erb___3482820561153289769_70107583507660'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/novelties/index.html.erb:18:in `_app_views_novelties_index_html_erb___3482820561153289769_70107583507660'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107583724280/variables" for 127.0.0.1 at 2013-08-20 11:59:34 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:59:46 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.3ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (27.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 143ms (Views: 40.9ms | ActiveRecord: 10.3ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 11:59:50 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (57.6ms)
  Rendered novelties/new.html.erb within layouts/application (58.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 82ms (Views: 74.8ms | ActiveRecord: 1.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 11:59:53 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 9ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107584322740/variables" for 127.0.0.1 at 2013-08-20 11:59:53 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:00:33 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (72.0ms)
  Rendered novelties/new.html.erb within layouts/application (73.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 154ms (Views: 99.1ms | ActiveRecord: 10.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:00:36 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.6ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (47.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 67ms (Views: 64.3ms | ActiveRecord: 2.4ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:00:37 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (14.6ms)
  Rendered novelties/new.html.erb within layouts/application (15.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 34.0ms | ActiveRecord: 1.7ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:00:38 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["content", ""], ["created_at", Tue, 20 Aug 2013 06:00:38 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", false], ["title", ""], ["updated_at", Tue, 20 Aug 2013 06:00:38 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/3
Completed 302 Found in 11ms (ActiveRecord: 2.6ms)


Started GET "/ru/novelties/3" for 127.0.0.1 at 2013-08-20 12:00:38 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"3"}
  [1m[35mNovelty Load (0.7ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "3"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 26.2ms | ActiveRecord: 1.8ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:00:41 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (49.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 70ms (Views: 67.1ms | ActiveRecord: 1.9ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:00:56 +0600

ActionController::RoutingError - undefined local variable or method `load_and_authorize_resourse' for NoveltiesController:Class:
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:69:in `rescue in controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:64:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107610456600/variables" for 127.0.0.1 at 2013-08-20 12:00:56 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:01:59 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (27.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 150ms (Views: 40.8ms | ActiveRecord: 10.7ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:02:01 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (14.9ms)
  Rendered novelties/new.html.erb within layouts/application (15.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 34.7ms | ActiveRecord: 1.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:02:06 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"e22e", "content"=>"e2e", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>"5"}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107584745120/variables" for 127.0.0.1 at 2013-08-20 12:02:06 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:02:11 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (67.0ms)
  Rendered novelties/new.html.erb within layouts/application (68.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 107ms (Views: 85.1ms | ActiveRecord: 3.2ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:03:13 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 20ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107584098300/variables" for 127.0.0.1 at 2013-08-20 12:03:13 +0600


Started GET "/" for 127.0.0.1 at 2013-08-20 12:03:17 +0600
Processing by HomeController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 32.0ms | ActiveRecord: 0.5ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:05:05 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"wew", "content"=>"ew", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["content", "ew"], ["created_at", Tue, 20 Aug 2013 06:05:05 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", false], ["title", "wew"], ["updated_at", Tue, 20 Aug 2013 06:05:05 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.6ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/4
Completed 302 Found in 110ms (ActiveRecord: 7.2ms)


Started GET "/ru/novelties/4" for 127.0.0.1 at 2013-08-20 12:05:05 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"4"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "4"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 20.3ms | ActiveRecord: 5.2ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:05:07 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 23.0ms | ActiveRecord: 2.0ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:05:13 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (74.7ms)
  Rendered novelties/new.html.erb within layouts/application (75.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 156ms (Views: 92.4ms | ActiveRecord: 9.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:05:16 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"wewwewe", "content"=>"ewewew", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["content", "ewewew"], ["created_at", Tue, 20 Aug 2013 06:05:16 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", false], ["title", "wewwewe"], ["updated_at", Tue, 20 Aug 2013 06:05:16 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.5ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/5
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)


Started GET "/ru/novelties/5" for 127.0.0.1 at 2013-08-20 12:05:16 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"5"}
  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (3.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 20.4ms | ActiveRecord: 5.4ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:05:18 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 23.1ms | ActiveRecord: 2.0ms)


Started GET "/ru/novelties/3/edit" for 127.0.0.1 at 2013-08-20 12:09:05 +0600
Processing by NoveltiesController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"3"}
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (16.2ms)
  Rendered novelties/edit.html.erb within layouts/application (17.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 155ms (Views: 78.1ms | ActiveRecord: 9.9ms)


Started PATCH "/ru/novelties/3" for 127.0.0.1 at 2013-08-20 12:09:06 +0600
Processing by NoveltiesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>"4"}, "commit"=>"Сохранить Novelty", "locale"=>"ru", "id"=>"3"}
  [1m[36mNovelty Load (1.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "3"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/3
Completed 302 Found in 18ms (ActiveRecord: 2.8ms)


Started GET "/ru/novelties/3" for 127.0.0.1 at 2013-08-20 12:09:06 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"3"}
  [1m[35mNovelty Load (0.7ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (0.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 26ms (Views: 16.5ms | ActiveRecord: 1.8ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:09:08 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 23.6ms | ActiveRecord: 1.9ms)


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:09:09 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (60.3ms)
  Rendered novelties/new.html.erb within layouts/application (61.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 84ms (Views: 77.1ms | ActiveRecord: 1.4ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:09:11 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"", "content"=>"", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
Completed 500 Internal Server Error in 5ms

ActiveModel::ForbiddenAttributesError - ActiveModel::ForbiddenAttributesError:
  activemodel (4.0.0) lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:21:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  cancan (1.6.10) lib/cancan/controller_resource.rb:85:in `build_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:66:in `load_resource_instance'
  cancan (1.6.10) lib/cancan/controller_resource.rb:32:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107583589340/variables" for 127.0.0.1 at 2013-08-20 12:09:11 +0600


Started GET "/ru/novelties/new" for 127.0.0.1 at 2013-08-20 12:14:15 +0600
Processing by NoveltiesController#new as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  Rendered novelties/_form.html.erb (46.1ms)
  Rendered novelties/new.html.erb within layouts/application (47.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 166ms (Views: 64.5ms | ActiveRecord: 9.6ms)


Started POST "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:14:18 +0600
Processing by NoveltiesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "novelty"=>{"title"=>"dww", "content"=>"wdwd", "publish_date(3i)"=>"20", "publish_date(2i)"=>"8", "publish_date(1i)"=>"2013", "published"=>"0", "user_id"=>""}, "commit"=>"Создать Novelty", "locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "novelties" ("content", "created_at", "publish_date", "published", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["content", "wdwd"], ["created_at", Tue, 20 Aug 2013 06:14:18 UTC +00:00], ["publish_date", Tue, 20 Aug 2013], ["published", false], ["title", "dww"], ["updated_at", Tue, 20 Aug 2013 06:14:18 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties/6
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)


Started GET "/ru/novelties/6" for 127.0.0.1 at 2013-08-20 12:14:18 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"6"}
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "6"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (0.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 17.2ms | ActiveRecord: 1.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:14:20 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (10.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 25.7ms | ActiveRecord: 1.9ms)


Started DELETE "/ru/novelties/3" for 127.0.0.1 at 2013-08-20 12:14:24 +0600
Processing by NoveltiesController#destroy as HTML
  Parameters: {"authenticity_token"=>"feuyxCTvzG1KbHZuHyJVmluCSGkXNYTpibV+3dMeUqU=", "locale"=>"ru", "id"=>"3"}
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "novelties" WHERE "novelties"."id" = $1  [["id", 3]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/novelties
Completed 302 Found in 10ms (ActiveRecord: 2.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:14:24 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (10.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 25.1ms | ActiveRecord: 1.9ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:18:07 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
Completed 500 Internal Server Error in 10ms

NoMethodError - undefined method `per_page=' for #<Class:0x007f8666697550>:
  activerecord (4.0.0) lib/active_record/dynamic_matchers.rb:22:in `method_missing'
  app/models/novelty.rb:3:in `<class:Novelty>'
  app/models/novelty.rb:1:in `<top (required)>'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  cancan (1.6.10) lib/cancan/controller_resource.rb:147:in `resource_class'
  cancan (1.6.10) lib/cancan/controller_resource.rb:187:in `resource_base'
  cancan (1.6.10) lib/cancan/controller_resource.rb:77:in `load_collection?'
  cancan (1.6.10) lib/cancan/controller_resource.rb:33:in `load_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  cancan (1.6.10) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  activesupport (4.0.0) lib/active_support/callbacks.rb:427:in `_run__2029298487849471440__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4418672368979578319__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70107610351760/variables" for 127.0.0.1 at 2013-08-20 12:18:07 +0600
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties"[0m


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:18:41 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (53.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 513ms (Views: 374.4ms | ActiveRecord: 14.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:21:50 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (100.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 538ms (Views: 389.3ms | ActiveRecord: 16.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:22:28 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (10.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 27.9ms | ActiveRecord: 2.8ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:35:43 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (90.4ms)
Completed 500 Internal Server Error in 456ms

Sprockets::FileNotFound - couldn't find file 'bootstrap'
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/application.js:15):
  sprockets (2.10.0) lib/sprockets/context.rb:106:in `resolve'
  sprockets (2.10.0) lib/sprockets/context.rb:146:in `require_asset'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:217:in `process_require_directive'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:167:in `block in process_directives'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:165:in `process_directives'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:99:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb___1984835674665987234_70216451913500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:433:in `_run__2946607952668680575__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1588026375514936071__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70216451678600/variables" for 127.0.0.1 at 2013-08-20 12:35:43 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:37:22 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (10.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (4.6ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 393ms (Views: 379.7ms | ActiveRecord: 3.0ms)


Started GET "/ru/novelties/1/edit" for 127.0.0.1 at 2013-08-20 12:37:33 +0600
Processing by NoveltiesController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mNovelty Load (0.7ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  Rendered novelties/_form.html.erb (195.2ms)
  Rendered novelties/edit.html.erb within layouts/application (197.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 222ms (Views: 214.0ms | ActiveRecord: 2.7ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:38:25 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (85.1ms)
Completed 500 Internal Server Error in 413ms

Sprockets::FileNotFound - couldn't find file 'twitter/bootstrap'
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/application.js:15):
  sprockets (2.10.0) lib/sprockets/context.rb:106:in `resolve'
  sprockets (2.10.0) lib/sprockets/context.rb:146:in `require_asset'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:217:in `process_require_directive'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:167:in `block in process_directives'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:165:in `process_directives'
  sprockets (2.10.0) lib/sprockets/directive_processor.rb:99:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1724393262267853377_70120693523360'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:433:in `_run__1010660242617387989__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3707799648005873009__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70120693738800/variables" for 127.0.0.1 at 2013-08-20 12:38:26 +0600


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:38:42 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 215ms (Views: 202.5ms | ActiveRecord: 3.3ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 12:44:01 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 43ms (Views: 29.2ms | ActiveRecord: 3.1ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:06 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 35ms (Views: 25.6ms | ActiveRecord: 2.7ms)


Started GET "/ru/novelties?page=1" for 127.0.0.1 at 2013-08-20 12:44:07 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"1", "locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 23.3ms | ActiveRecord: 2.7ms)


Started GET "/ru/novelties?page=3" for 127.0.0.1 at 2013-08-20 12:44:09 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"3", "locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 4[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (6.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 20.9ms | ActiveRecord: 2.9ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:10 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 32ms (Views: 23.5ms | ActiveRecord: 2.3ms)


Started GET "/ru/novelties?page=1" for 127.0.0.1 at 2013-08-20 12:44:11 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"1", "locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (7.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 31ms (Views: 22.6ms | ActiveRecord: 2.2ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:13 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 76ms (Views: 68.2ms | ActiveRecord: 2.3ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:24 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[35mUser Load (2.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (85.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 516ms (Views: 372.8ms | ActiveRecord: 16.1ms)


Started GET "/ru/novelties?page=1" for 127.0.0.1 at 2013-08-20 12:44:29 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"1", "locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 35ms (Views: 25.9ms | ActiveRecord: 2.9ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:30 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 23.6ms | ActiveRecord: 2.9ms)


Started GET "/ru/novelties?page=3" for 127.0.0.1 at 2013-08-20 12:44:32 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"3", "locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 4
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (45.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 69ms (Views: 60.3ms | ActiveRecord: 2.8ms)


Started GET "/ru/novelties?page=2" for 127.0.0.1 at 2013-08-20 12:44:34 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"2", "locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 2
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 23.6ms | ActiveRecord: 2.7ms)


Started GET "/ru/novelties?page=1" for 127.0.0.1 at 2013-08-20 12:44:35 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"1", "locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (10.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 30.7ms | ActiveRecord: 2.9ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:04:25 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 32.6ms | ActiveRecord: 0.6ms)


Started GET "/ru/novelties?page=1" for 127.0.0.1 at 2013-08-20 13:51:06 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"page"=>"1", "locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (9.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 26.3ms | ActiveRecord: 2.3ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:51:13 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.7ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:52:39 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 73ms (Views: 70.9ms | ActiveRecord: 1.9ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:52:43 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.8ms)
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 21.5ms | ActiveRecord: 2.2ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:54:04 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 24.7ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:55:06 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 29.5ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:55:14 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 32ms (Views: 29.3ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:56:08 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.6ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 123ms (Views: 119.9ms | ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:57:08 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (2.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 25.3ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:58:28 +0600
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered home/index.html.erb within layouts/application (3.2ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.3ms | ActiveRecord: 1.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 13:59:15 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 24.9ms | ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:00:01 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 108ms (Views: 106.5ms | ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:00:17 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 96ms (Views: 94.1ms | ActiveRecord: 1.3ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:01:11 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:02:48 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 31.9ms | ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:03:10 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 23.1ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:03:19 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:04:08 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 26.1ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:06:56 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 25.8ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:08:10 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 29.3ms | ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:10:52 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 97ms (Views: 95.1ms | ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:16:50 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 28.4ms | ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:20:49 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 1.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-20 14:21:08 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (102.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 127ms (Views: 122.8ms | ActiveRecord: 1.1ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-20 14:21:33 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (12.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 37.7ms | ActiveRecord: 1.1ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-20 14:21:39 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (8.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 27.6ms | ActiveRecord: 1.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-20 14:21:49 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 92ms (Views: 87.2ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:21:51 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 22ms (Views: 20.0ms | ActiveRecord: 1.0ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 14:22:03 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.4ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (8.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 32ms (Views: 23.2ms | ActiveRecord: 2.3ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-20 14:22:40 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (11.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 45ms (Views: 33.7ms | ActiveRecord: 2.4ms)


Started GET "/" for 127.0.0.1 at 2013-08-20 14:22:43 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.5ms)
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 22ms (Views: 19.9ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 07:33:33 +0600
  [1m[36mActiveRecord::SchemaMigration Load (57.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (2.4ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 973ms (Views: 887.9ms | ActiveRecord: 52.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 07:34:55 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 23.7ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 07:35:45 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 23.9ms | ActiveRecord: 0.0ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-21 07:40:30 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35m (8.1ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (32.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (148.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (831.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 933ms (Views: 722.2ms | ActiveRecord: 204.2ms)


Started GET "/ru/novelties/1" for 127.0.0.1 at 2013-08-21 07:40:34 +0600
Processing by NoveltiesController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mNovelty Load (23.1ms)[0m  SELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered novelties/show.html.erb within layouts/application (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 25.6ms | ActiveRecord: 23.1ms)


Started GET "/ru/novelties/1/edit" for 127.0.0.1 at 2013-08-21 07:40:39 +0600
Processing by NoveltiesController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mNovelty Load (0.5ms)[0m  [1mSELECT "novelties".* FROM "novelties" WHERE "novelties"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 7ms (ActiveRecord: 0.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 07:40:39 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.5ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 45.5ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 07:41:34 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (253.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 311ms (Views: 295.6ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 07:44:50 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 37ms (Views: 35.5ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 07:45:06 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (137.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 614ms (Views: 539.5ms | ActiveRecord: 5.9ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 07:45:10 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 33.9ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:45:14 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.html.erb within layouts/application (17.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 56ms (Views: 54.8ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:46:20 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (14.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 38.4ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:47:18 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (13.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 39.8ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:50:32 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (16.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 44ms (Views: 39.8ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:50:43 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (9.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 34.7ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=en" for 127.0.0.1 at 2013-08-21 07:51:00 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.7ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (10.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 75ms (Views: 73.5ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=en" for 127.0.0.1 at 2013-08-21 07:51:16 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (19.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 45ms (Views: 43.6ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=en" for 127.0.0.1 at 2013-08-21 07:51:18 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.7ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (11.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 38.3ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=en" for 127.0.0.1 at 2013-08-21 07:52:06 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.8ms)
  Rendered devise/registrations/new.en.html.erb within layouts/application (60.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.en.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 140ms (Views: 130.8ms | ActiveRecord: 5.4ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 07:52:15 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (9.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 33.2ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 09:17:33 +0600
  [1m[36mActiveRecord::SchemaMigration Load (13.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (2.8ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (435.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (4.0ms)
  Rendered layouts/_messages.html.erb (1.0ms)
Completed 200 OK in 1285ms (Views: 1206.1ms | ActiveRecord: 24.3ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 09:21:35 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (13.8ms)
  Rendered layouts/_admin_menu.html.erb (2.8ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 42ms (Views: 41.2ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 09:21:48 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.9ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (12.7ms)
Completed 500 Internal Server Error in 94ms

ArgumentError - wrong number of arguments (0 for 2+):
  cancan (1.6.10) lib/cancan/controller_additions.rb:380:in `can?'
  actionpack (4.0.0) lib/abstract_controller/helpers.rb:53:in `can?'
  app/views/layouts/application.html.erb:48:in `_app_views_layouts_application_html_erb__3310521769811124872_70298909152280'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/responder.rb:233:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/responder.rb:161:in `to_html'
  actionpack (4.0.0) lib/action_controller/metal/responder.rb:154:in `respond'
  actionpack (4.0.0) lib/action_controller/metal/responder.rb:147:in `call'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:330:in `respond_with'
  devise (3.0.3) app/controllers/devise/registrations_controller.rb:8:in `new'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:453:in `_run__2112543958784152937__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3249542070689572335__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70298920551240/variables" for 127.0.0.1 at 2013-08-21 09:21:48 +0600


Started GET "/users/sign_up?locale=ru" for 127.0.0.1 at 2013-08-21 09:28:52 +0600
Processing by RegistrationsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.6ms)
  Rendered devise/registrations/new.ru.html.erb within layouts/application (82.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 107ms (Views: 101.7ms | ActiveRecord: 2.4ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 09:28:56 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (31.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 62ms (Views: 59.6ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:07 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3Pieo+LNkynsuo9Rp5oI5kXfKxbpN4bRqjCzIvLm1sQ=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (56.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (63.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Tue, 20 Aug 2013 05:49:18 UTC +00:00], ["current_sign_in_at", Wed, 21 Aug 2013 03:29:07 UTC +00:00], ["sign_in_count", 5], ["updated_at", Wed, 21 Aug 2013 03:29:07 UTC +00:00]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 243ms (ActiveRecord: 121.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:07 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.4ms)
  [1m[35mUser Load (17.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (6.5ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (42.9ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (8.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 153ms (Views: 79.3ms | ActiveRecord: 72.2ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:17 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Yac/6hb/757wO08u94wuzrus5AyYBjhIzbbVBVVjdis=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 65ms (ActiveRecord: 1.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:17 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 16.2ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:21 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (7.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:32 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cDlN2uDmec98uTu7v5lioDbJaKhbLu94Zu1+Fx16r4o=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Wed, 21 Aug 2013 03:29:07 UTC +00:00], ["current_sign_in_at", Wed, 21 Aug 2013 03:29:32 UTC +00:00], ["sign_in_count", 6], ["updated_at", Wed, 21 Aug 2013 03:29:32 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 87ms (ActiveRecord: 2.1ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:32 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 22.2ms | ActiveRecord: 2.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:29:52 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (4.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 27.4ms | ActiveRecord: 2.7ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:30:43 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (3.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 31ms (Views: 27.8ms | ActiveRecord: 2.6ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:35:21 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.8ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (3.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 35.5ms | ActiveRecord: 3.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:35:35 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (3.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 27.3ms | ActiveRecord: 2.8ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:35:49 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 30.0ms | ActiveRecord: 2.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-21 09:36:35 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 29.1ms | ActiveRecord: 2.1ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 09:36:49 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.7ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 130ms (Views: 126.7ms | ActiveRecord: 2.0ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 09:37:24 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 15.7ms | ActiveRecord: 0.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 09:57:48 +0600
  [1m[36mActiveRecord::SchemaMigration Load (24.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
Completed 401 Unauthorized in 52ms


Started GET "/users/sign_in" for 127.0.0.1 at 2013-08-21 09:57:51 +0600
Processing by Devise::SessionsController#new as HTML
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (3.1ms)
  Rendered devise/sessions/new.html.erb within layouts/application (204.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (1.2ms)
Completed 200 OK in 1700ms (Views: 1639.4ms | ActiveRecord: 17.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-21 09:57:56 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mGv91avik1q0malVVu2N3gPIz+AL40XeoZHzZT/sLGQ=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (67.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (64.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Wed, 21 Aug 2013 03:29:32 UTC +00:00], ["current_sign_in_at", Wed, 21 Aug 2013 03:57:56 UTC +00:00], ["sign_in_count", 7], ["updated_at", Wed, 21 Aug 2013 03:57:56 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/users/edit?locale=ru
Completed 302 Found in 300ms (ActiveRecord: 132.7ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 09:57:57 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (12.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (28.9ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (23.0ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (49.8ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (26.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 339ms (Views: 244.1ms | ActiveRecord: 91.3ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 09:58:26 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.0ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 141ms (Views: 53.5ms | ActiveRecord: 8.5ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:03:16 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (50.0ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 140ms (Views: 92.9ms | ActiveRecord: 9.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:03:48 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (82.2ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[36mRole Load (1.3ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1[0m
  [1m[35mRole Exists (3.8ms)[0m  SELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1  [["user_id", 4]]
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (8.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 554ms (Views: 478.2ms | ActiveRecord: 15.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:03:54 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.3ms)
DEPRECATION WARNING: This dynamic method is deprecated. Please use e.g. Post.find_or_create_by(name: 'foo') instead. (called from is_stuff? at /Users/vith/Desktop/projects/rails/photohome/app/models/user.rb:12)
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT 1
  [1m[36mRole Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = 1 LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 80ms (Views: 74.8ms | ActiveRecord: 2.6ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:15:10 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 124ms (Views: 41.8ms | ActiveRecord: 7.2ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:15:25 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (12.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 86ms (Views: 82.1ms | ActiveRecord: 1.4ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:15:33 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.3ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (34.3ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:15:33 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.7ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (35.0ms)


Started GET "/user_profile/4" for 127.0.0.1 at 2013-08-21 10:16:21 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/user_profile_controller.rb:2: syntax error, unexpected ':', expecting keyword_end
	layout: :user_profile_layout
	       ^:
  app/controllers/user_profile_controller.rb:2:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__649976370531392285__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70123609240440/variables" for 127.0.0.1 at 2013-08-21 10:16:21 +0600


Started GET "/user_profile/4" for 127.0.0.1 at 2013-08-21 10:16:34 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/user_profile_controller.rb:2: syntax error, unexpected ':', expecting keyword_end
	layout: :user_profile_layout
	       ^:
  app/controllers/user_profile_controller.rb:2:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__649976370531392285__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70123561415660/variables" for 127.0.0.1 at 2013-08-21 10:16:34 +0600


Started GET "/user_profile/4" for 127.0.0.1 at 2013-08-21 10:16:54 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/application (0.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 75ms (Views: 65.1ms | ActiveRecord: 8.8ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:17:05 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (35.0ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:17:05 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (34.4ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:17:13 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (9.8ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 33.0ms | ActiveRecord: 1.5ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:17:38 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (49.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 126ms (Views: 80.6ms | ActiveRecord: 7.3ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:17:43 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (27.7ms)


Started GET "/user_profile?locale=ru&user_id=4" for 127.0.0.1 at 2013-08-21 10:17:43 +0600

ActionController::RoutingError (No route matches [GET] "/user_profile"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.7ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (37.5ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:18:01 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (84.2ms)
  [1m[36m (4.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (6.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 556ms (Views: 479.4ms | ActiveRecord: 12.0ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:18:08 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/application (0.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 29ms (Views: 25.6ms | ActiveRecord: 1.4ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:18:32 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (8.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 88ms (Views: 39.8ms | ActiveRecord: 7.4ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:18:35 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
Completed 500 Internal Server Error in 7ms

NameError - Could not render layout: undefined local variable or method `user_profile_layout' for #<UserProfileController:0x007fecbcf6fb20>:
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:408:in `rescue in _default_layout'
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:405:in `_default_layout'
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:383:in `block in _layout_for_option'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:88:in `resolve_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:71:in `block in find_layout'
  actionpack (4.0.0) lib/action_view/lookup_context.rb:234:in `with_layout_format'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:18:in `with_layout_format'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:71:in `find_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:55:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1400686470036142350__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__381880368285875465__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:18:35 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
Completed 500 Internal Server Error in 53ms

NameError - Could not render layout: undefined local variable or method `user_profile_layout' for #<UserProfileController:0x007fecbfa00a10>:
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:408:in `rescue in _default_layout'
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:405:in `_default_layout'
  actionpack (4.0.0) lib/abstract_controller/layouts.rb:383:in `block in _layout_for_option'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:88:in `resolve_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:71:in `block in find_layout'
  actionpack (4.0.0) lib/action_view/lookup_context.rb:228:in `with_layout_format'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:18:in `with_layout_format'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:71:in `find_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:55:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1400686470036142350__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__381880368285875465__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70327376580200/variables" for 127.0.0.1 at 2013-08-21 10:18:35 +0600


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:19:36 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (4.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 75ms (Views: 66.7ms | ActiveRecord: 7.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:21:08 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.0ms)
Completed 200 OK in 120ms (Views: 111.7ms | ActiveRecord: 7.5ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:21:43 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.0ms)
Completed 200 OK in 34ms (Views: 31.6ms | ActiveRecord: 1.4ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:22:13 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 28.8ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:22:31 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 27.1ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:23:39 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 35ms (Views: 32.1ms | ActiveRecord: 1.3ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:24:35 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
ERROR: compiling _app_views_layouts_user_profile_layout_html_erb___4214247050189475218_70327398179100 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:98: syntax error, unexpected '<', expecting ')'
        <div class="span9">
         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:99: syntax error, unexpected '<'
          <div class="hero-unit">
           ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:100: syntax error, unexpected '<'
            <h1>Hello, world!</h1>
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:100: syntax error, unexpected ',', expecting ')'
            <h1>Hello, world!</h1>
                      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:101: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected '<'
            <p><a href="#" class="btn btn-...
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected keyword_class, expecting ')'
...           <p><a href="#" class="btn btn-primary btn-large">...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...n-primary btn-large">Learn more &raquo;</a></p>
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected '<', expecting ')'
... btn-large">Learn more &raquo;</a></p>
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:103: syntax error, unexpected '<'
          </div>
           ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:106: unknown regexp option - h
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:106: syntax error, unexpected tINTEGER, expecting ')'
              <h2>Heading</h2>
                             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p>Donec id elit non mi porta gravida at...
                         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...metus. Fusce dapibus, tellus ac cursus commodo, tortor mauri...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...c cursus commodo, tortor mauris condimentum nibh, ut ferment...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
... condimentum nibh, ut fermentum massa justo sit amet risus. ...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:111: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:112: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:116: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:117: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:120: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:120: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:122: syntax error, unexpected '<'
            <div class="span4">
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:123: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:124: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:128: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:129: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:133: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:134: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:137: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:137: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:138: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:138: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:139: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:139: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:147: unknown regexp options - ftr
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: syntax error, unexpected '<'
    </div> <!-- /container -->
     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: unknown regexp options - ctar
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:152: unknown regexp options - htl
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:153: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:153: syntax error, unexpected end-of-input, expecting ')'
Function body:           def _app_views_layouts_user_profile_layout_html_erb___4214247050189475218_70327398179100(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "layouts/user_profile_layout";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append='<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Photohome</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
 
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
 
 <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>';@output_buffer.append=( content_for?(:title) ? yield(:title) : "Photohome" );@output_buffer.safe_append='</title>
    <meta name="description" content="';@output_buffer.append=( content_for?(:description) ? yield(:description) : "Photohome" );@output_buffer.safe_append='">
    ';@output_buffer.append=( stylesheet_link_tag "application", :media => "all" );@output_buffer.safe_append='
    ';@output_buffer.append=( javascript_include_tag "application" );@output_buffer.safe_append='
    ';@output_buffer.append=( csrf_meta_tags );@output_buffer.safe_append='
    ';@output_buffer.append=( yield(:head) );@output_buffer.safe_append='
  </head>


  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">Photohome</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Фотографии</a></li>
              <li><a href="#about">Конкурсы</a></li>
              <li><a href="#contact">Статьи</a></li>
              <li><a href="#contact">Новости</a></li>
              

              ';@output_buffer.append=( render 'layouts/admin_menu' if current_user && current_user.is_stuff? );@output_buffer.safe_append='

            </ul>

    <nav class="pull-right">
        <!-- <div class="container"> -->
          ';@output_buffer.append=( render 'layouts/navigation' );@output_buffer.safe_append='
        <!-- </div> -->
      </nav>
          

          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">

    ';@output_buffer.append=(render 'layouts/messages');@output_buffer.safe_append='

    

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Sidebar</li>
              <li class="active"><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li class="nav-header">Sidebar</li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li class="nav-header">Sidebar</li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->

        ';@output_buffer.append=(render 'layouts/user_sidebar");@output_buffer.safe_append='

        <div class="span9">
          <div class="hero-unit">
            <h1>Hello, world!</h1>
            <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
            <p><a href="#" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
          </div>
          <div class="row-fluid">
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
          </div><!--/row-->
          <div class="row-fluid">
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->

    

      <hr>

      <footer>
        <p>&copy; Company 2013</p>
      </footer>

    </div> <!-- /container -->

  </body>
</html>
';@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:413:in `_run__1400686470036142350__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__381880368285875465__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
Completed 500 Internal Server Error in 92ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:98: syntax error, unexpected '<', expecting ')'
        <div class="span9">
         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:99: syntax error, unexpected '<'
          <div class="hero-unit">
           ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:100: syntax error, unexpected '<'
            <h1>Hello, world!</h1>
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:100: syntax error, unexpected ',', expecting ')'
            <h1>Hello, world!</h1>
                      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:101: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected '<'
            <p><a href="#" class="btn btn-...
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected keyword_class, expecting ')'
...           <p><a href="#" class="btn btn-primary btn-large">...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...n-primary btn-large">Learn more &raquo;</a></p>
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: syntax error, unexpected '<', expecting ')'
... btn-large">Learn more &raquo;</a></p>
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:102: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:103: syntax error, unexpected '<'
          </div>
           ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:106: unknown regexp option - h
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:106: syntax error, unexpected tINTEGER, expecting ')'
              <h2>Heading</h2>
                             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p>Donec id elit non mi porta gravida at...
                         ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...metus. Fusce dapibus, tellus ac cursus commodo, tortor mauri...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...c cursus commodo, tortor mauris condimentum nibh, ut ferment...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:107: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
... condimentum nibh, ut fermentum massa justo sit amet risus. ...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:108: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:109: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:111: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:112: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:113: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:114: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:116: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:117: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:118: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:119: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:120: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:120: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:122: syntax error, unexpected '<'
            <div class="span4">
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:123: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:124: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:125: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:126: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:128: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:129: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:130: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:131: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:133: syntax error, unexpected '<'
              <h2>Heading</h2>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:134: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected '<'
              <p><a class="btn" href="#">View details &raquo;</a></p>
               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected tIDENTIFIER, expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                    ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: syntax error, unexpected '<', expecting ')'
              <p><a class="btn" href="#">View details &raquo;</a></p>
                                                              ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:135: unknown regexp option - p
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: syntax error, unexpected '<'
            </div><!--/span-->
             ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:136: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:137: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:137: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:138: unknown regexp options - pa
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:138: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:139: unknown regexp options - rw
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:139: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:147: unknown regexp options - ftr
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: syntax error, unexpected '<'
    </div> <!-- /container -->
     ^
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: unknown regexp options - ctar
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:149: syntax error, unexpected '\n', expecting keyword_do_LAMBDA or tLAMBEG
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:152: unknown regexp options - htl
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:153: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/layouts/user_profile_layout.html.erb:153: syntax error, unexpected end-of-input, expecting ')':
  app/views/layouts/user_profile_layout.html.erb:98:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1400686470036142350__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__381880368285875465__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70327353921000/variables" for 127.0.0.1 at 2013-08-21 10:24:36 +0600


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:24:50 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 38ms (Views: 36.0ms | ActiveRecord: 1.3ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:26:16 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.0ms)
Completed 200 OK in 30ms (Views: 27.8ms | ActiveRecord: 1.2ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:27:47 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 1.0ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 10:27:50 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (10.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.7ms | ActiveRecord: 1.2ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:29:27 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.1ms)
Completed 200 OK in 36ms (Views: 34.2ms | ActiveRecord: 1.2ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:29:45 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.2ms)
Completed 200 OK in 32ms (Views: 29.8ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:29:56 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 106ms (Views: 104.0ms | ActiveRecord: 1.3ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:30:06 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (8.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 45ms (Views: 42.5ms | ActiveRecord: 1.3ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:30:29 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 28.9ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:30:49 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 22.7ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:32:12 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 32ms (Views: 29.8ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:32:47 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.0ms)
Completed 200 OK in 29ms (Views: 27.5ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:33:34 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 26ms (Views: 24.7ms | ActiveRecord: 1.0ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:33:48 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (49.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 75ms (Views: 73.6ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 10:34:22 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 29ms (Views: 27.1ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 10:52:52 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.4ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 25.8ms | ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 11:15:33 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 23ms (Views: 20.2ms | ActiveRecord: 1.5ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 11:41:23 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (1.4ms)
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (37.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (6.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (4.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 464ms (Views: 399.8ms | ActiveRecord: 45.6ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePhotos (20130821055713)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (261.3ms)[0m  [1mCREATE TABLE "photos" ("id" serial primary key, "title" character varying(255), "user_id" integer, "image" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (34.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130821055713"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 11:57:41 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (1.7ms)
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (4.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (7.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 621ms (Views: 586.9ms | ActiveRecord: 12.8ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 12:05:49 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (1.5ms)
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (42.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (5.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 489ms (Views: 413.9ms | ActiveRecord: 51.8ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 12:06:16 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (4.7ms)
Completed 200 OK in 37ms (Views: 35.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:06:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  Rendered photos/index.html.erb within layouts/application (57.9ms)
Completed 500 Internal Server Error in 67ms

NameError - undefined local variable or method `new_photo_path' for #<#<Class:0x007fbf5f187a88>:0x007fbf5f187218>:
  app/views/photos/index.html.erb:31:in `_app_views_photos_index_html_erb__1052059587680667324_70229955457000'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:06:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  Rendered photos/index.html.erb within layouts/application (14.5ms)
Completed 500 Internal Server Error in 17ms

NameError - undefined local variable or method `new_photo_path' for #<#<Class:0x007fbf5f187a88>:0x007fbf5dee5740>:
  app/views/photos/index.html.erb:31:in `_app_views_photos_index_html_erb__1052059587680667324_70229945712360'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229964764940/variables" for 127.0.0.1 at 2013-08-21 12:06:19 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:09:18 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/application (3.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 34.9ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:10:02 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 130ms (Views: 114.1ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:10:08 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/_form.html.erb (87.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (88.6ms)
Completed 500 Internal Server Error in 92ms

NoMethodError - undefined method `photos_path' for #<#<Class:0x007fbf61db1f50>:0x007fbf5c0a4150>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229979689260'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229929852340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:10:08 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/_form.html.erb (17.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (19.1ms)
Completed 500 Internal Server Error in 21ms

NoMethodError - undefined method `photos_path' for #<#<Class:0x007fbf61db1f50>:0x007fbf5dc73228>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229944710280'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229944438720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229945674320/variables" for 127.0.0.1 at 2013-08-21 12:10:08 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:10:29 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/_form.html.erb (12.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (14.3ms)
Completed 500 Internal Server Error in 17ms

NoMethodError - undefined method `photos_path' for #<#<Class:0x007fbf61db1f50>:0x007fbf5deb4898>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229944710280'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229945610340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229964724160/variables" for 127.0.0.1 at 2013-08-21 12:10:30 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:10:36 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/_form.html.erb (51.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (53.3ms)
Completed 500 Internal Server Error in 56ms

NoMethodError - undefined method `photos_path' for #<#<Class:0x007fbf61db1f50>:0x007fbf60312550>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229944710280'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229929074080/variables" for 127.0.0.1 at 2013-08-21 12:10:36 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:10:55 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/_form.html.erb (47.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (48.0ms)
Completed 500 Internal Server Error in 50ms

ActiveModel::MissingAttributeError - can't write unknown attribute `builder':
  activerecord (4.0.0) lib/active_record/attribute_methods/write.rb:45:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:70:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:317:in `[]='
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:14:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229975714240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229929050660/variables" for 127.0.0.1 at 2013-08-21 12:10:56 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:12:26 +0600

ActionController::RoutingError (No route matches [GET] "/ru/users/4/photos/new"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (3.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (41.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:12:32 +0600

ActionController::RoutingError (No route matches [GET] "/ru/users/4/photos"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (30.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:12:33 +0600

ActionController::RoutingError (No route matches [GET] "/ru/users/4/photos"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (41.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-21 12:13:04 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (6.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 104ms (Views: 94.7ms | ActiveRecord: 8.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:13:07 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (3.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 36ms (Views: 26.6ms | ActiveRecord: 3.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:13:49 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (2.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 29ms (Views: 26.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:13:53 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (1.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.3ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:13:54 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/_form.html.erb (4.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (6.1ms)
Completed 500 Internal Server Error in 9ms

ActiveModel::MissingAttributeError - can't write unknown attribute `builder':
  activerecord (4.0.0) lib/active_record/attribute_methods/write.rb:45:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:70:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:317:in `[]='
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:14:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229976223020'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229976190240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:13:54 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered photos/_form.html.erb (3.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (4.0ms)
Completed 500 Internal Server Error in 7ms

ActiveModel::MissingAttributeError - can't write unknown attribute `builder':
  activerecord (4.0.0) lib/active_record/attribute_methods/write.rb:45:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:70:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:317:in `[]='
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:14:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229975714240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229978123860/variables" for 127.0.0.1 at 2013-08-21 12:13:54 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:14:05 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/_form.html.erb (68.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (69.6ms)
Completed 500 Internal Server Error in 72ms

NoMethodError - undefined method `photos_path' for #<#<Class:0x007fbf619ea110>:0x007fbf6033bc70>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229964777940'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229944892640/variables" for 127.0.0.1 at 2013-08-21 12:14:05 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:14:24 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/_form.html.erb (4.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (5.0ms)
Completed 500 Internal Server Error in 7ms

ActiveModel::MissingAttributeError - can't write unknown attribute `builder':
  activerecord (4.0.0) lib/active_record/attribute_methods/write.rb:45:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:70:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:317:in `[]='
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:14:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229954782520'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229945595520/variables" for 127.0.0.1 at 2013-08-21 12:14:25 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:14:34 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered photos/_form.html.erb (4.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (5.0ms)
Completed 500 Internal Server Error in 7ms

ActiveModel::MissingAttributeError - can't write unknown attribute `html':
  activerecord (4.0.0) lib/active_record/attribute_methods/write.rb:45:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:70:in `write_attribute'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:317:in `[]='
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:416:in `form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229945939320'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229964337500/variables" for 127.0.0.1 at 2013-08-21 12:14:34 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:16:11 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/_form.html.erb (52.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (52.9ms)
Completed 500 Internal Server Error in 55ms

NoMethodError - undefined method `photo_user_path' for #<#<Class:0x007fbf619ea110>:0x007fbf60371348>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:452:in `apply_form_for_options!'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:426:in `form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229964874160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229943996580/variables" for 127.0.0.1 at 2013-08-21 12:16:12 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:16:37 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered photos/_form.html.erb (4.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (5.1ms)
Completed 500 Internal Server Error in 8ms

ArgumentError - First argument in form cannot contain nil or be empty:
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:424:in `form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229963592620'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229954799480/variables" for 127.0.0.1 at 2013-08-21 12:16:37 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:16:51 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (21.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (22.0ms)
Completed 500 Internal Server Error in 24ms

NoMethodError - undefined method `error_notification' for #<ActionView::Helpers::FormBuilder:0x007fbf5df469f0>:
  app/views/photos/_form.html.erb:2:in `block in _app_views_photos__form_html_erb___2037784119439351212_70229945720880'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2037784119439351212_70229945720880'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___2958727611015241164_70229964726160'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229964905820/variables" for 127.0.0.1 at 2013-08-21 12:16:52 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:17:03 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (89.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (91.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 116ms (Views: 113.6ms | ActiveRecord: 1.2ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:17:36 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"My first", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fbf5d88de88 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-3053-e5f85k>, @original_filename="nadya5.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"nadya5.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 06:17:36 UTC +00:00], ["image", "nadya5.jpg"], ["title", "My first"], ["updated_at", Wed, 21 Aug 2013 06:17:36 UTC +00:00], ["user_id", 4]]
  [1m[36m (14.2ms)[0m  [1mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 77ms

NoMethodError - undefined method `photo_url' for #<PhotosController:0x007fbf5d860c80>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/url_for.rb:159:in `url_for'
  actionpack (4.0.0) lib/action_controller/metal/redirecting.rb:100:in `_compute_redirect_to_location'
  turbolinks (1.3.0) lib/turbolinks.rb:15:in `_compute_redirect_to_location_with_xhr_referer'
  actionpack (4.0.0) lib/action_controller/metal/redirecting.rb:70:in `redirect_to'
  actionpack (4.0.0) lib/action_controller/metal/flash.rb:40:in `redirect_to'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:61:in `block in redirect_to'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:60:in `redirect_to'
  app/controllers/photos_controller.rb:33:in `block (2 levels) in create'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:191:in `respond_to'
  app/controllers/photos_controller.rb:31:in `create'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229927840660/variables" for 127.0.0.1 at 2013-08-21 12:17:36 +0600


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:20:14 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"My first", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fbf5f0ffc50 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-3053-1x01osl>, @original_filename="nadya5.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"nadya5.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 21 Aug 2013 06:20:14 UTC +00:00], ["image", "nadya5.jpg"], ["title", "My first"], ["updated_at", Wed, 21 Aug 2013 06:20:14 UTC +00:00], ["user_id", 4]]
  [1m[35m (28.9ms)[0m  COMMIT
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/2
Completed 302 Found in 153ms (ActiveRecord: 35.1ms)


Started GET "/ru/users/4/photos/2" for 127.0.0.1 at 2013-08-21 12:20:14 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"2"}
  [1m[35mPhoto Load (1.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "2"]]
  Rendered photos/show.html.erb within layouts/user_profile_layout (14.1ms)
Completed 500 Internal Server Error in 21ms

NoMethodError - undefined method `edit_photo_path' for #<#<Class:0x007fbf61882e58>:0x007fbf61882d40>:
  app/views/photos/show.html.erb:18:in `_app_views_photos_show_html_erb__364398781479352151_70229975892640'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229955163240/variables" for 127.0.0.1 at 2013-08-21 12:20:14 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:20:59 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (12.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (6.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 83ms (Views: 75.6ms | ActiveRecord: 6.9ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-21 12:21:01 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (10.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 32.3ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:21:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/index.html.erb within layouts/user_profile_layout (55.1ms)
Completed 500 Internal Server Error in 57ms

NoMethodError - undefined method `user_photo' for #<#<Class:0x007fbf61882e58>:0x007fbf61909368>:
  app/views/photos/index.html.erb:21:in `block in _app_views_photos_index_html_erb__1052059587680667324_70229976176620'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/photos/index.html.erb:16:in `_app_views_photos_index_html_erb__1052059587680667324_70229976176620'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:21:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered photos/index.html.erb within layouts/user_profile_layout (57.1ms)
Completed 500 Internal Server Error in 60ms

NoMethodError - undefined method `user_photo' for #<#<Class:0x007fbf61882e58>:0x007fbf60404f80>:
  app/views/photos/index.html.erb:21:in `block in _app_views_photos_index_html_erb__1052059587680667324_70229965174240'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/photos/index.html.erb:16:in `_app_views_photos_index_html_erb__1052059587680667324_70229965174240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229942769260/variables" for 127.0.0.1 at 2013-08-21 12:21:04 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:21:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (54.6ms)
Completed 500 Internal Server Error in 58ms

NoMethodError - undefined method `edit_photo_path' for #<#<Class:0x007fbf61882e58>:0x007fbf5df561e8>:
  app/views/photos/index.html.erb:22:in `block in _app_views_photos_index_html_erb__1052059587680667324_70229945941460'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/photos/index.html.erb:16:in `_app_views_photos_index_html_erb__1052059587680667324_70229945941460'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229942688020/variables" for 127.0.0.1 at 2013-08-21 12:21:30 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:21:45 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (57.0ms)
Completed 500 Internal Server Error in 59ms

NoMethodError - undefined method `photo_path' for #<#<Class:0x007fbf61882e58>:0x007fbf5df4d7f0>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:87:in `url_for'
  actionpack (4.0.0) lib/action_view/helpers/url_helper.rb:180:in `link_to'
  app/views/photos/index.html.erb:23:in `block in _app_views_photos_index_html_erb__1052059587680667324_70229945921600'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/photos/index.html.erb:16:in `_app_views_photos_index_html_erb__1052059587680667324_70229945921600'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229942475800/variables" for 127.0.0.1 at 2013-08-21 12:21:45 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:22:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.3ms)
Completed 500 Internal Server Error in 11ms

ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"photos", :locale=>:ru, :user_id=>#<User id: 4, email: "vith@yandex.ru", encrypted_password: "$2a$10$GM8MmnFWwcsQ.zmccxhJe.0x2qug6UPXKCpdBYiaXh0d...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 7, current_sign_in_at: "2013-08-21 03:57:56", last_sign_in_at: "2013-08-21 03:29:32", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", created_at: "2013-08-20 04:08:45", updated_at: "2013-08-21 03:57:56", name: "vit", confirmation_token: nil, confirmed_at: "2013-08-20 04:10:01", confirmation_sent_at: "2013-08-20 04:08:45", unconfirmed_email: nil>, :id=>nil, :format=>nil} missing required keys: [:id]:
  actionpack (4.0.0) lib/action_dispatch/journey/formatter.rb:35:in `generate'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:576:in `generate'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:606:in `generate'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:642:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/url_for.rb:155:in `url_for'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:83:in `url_for'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:209:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:249:in `block (2 levels) in define_url_helper'
  app/views/photos/index.html.erb:23:in `block in _app_views_photos_index_html_erb__1052059587680667324_70229945904220'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:13:in `each'
  app/views/photos/index.html.erb:16:in `_app_views_photos_index_html_erb__1052059587680667324_70229945904220'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__72999368068343776__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2404049210837213989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70229965192860/variables" for 127.0.0.1 at 2013-08-21 12:22:04 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:24:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 69ms (Views: 66.3ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:24:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 36ms (Views: 34.0ms | ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 12:27:29 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.3ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:47:54 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (89.3ms)
  [1m[35m (19.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (24.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (5.1ms)
  Rendered layouts/_messages.html.erb (1.0ms)
  Rendered layouts/_user_sidebar.html.erb (1.6ms)
Completed 200 OK in 1100ms (Views: 959.0ms | ActiveRecord: 33.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:48:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 76ms (Views: 72.8ms | ActiveRecord: 2.0ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:48:57 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.5ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (6.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (39.9ms)


Started GET "/uploads/photo/image/2/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:48:57 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/2/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (44.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (78.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:49:13 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 37.9ms | ActiveRecord: 1.9ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:49:13 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (6.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (32.1ms)


Started GET "/uploads/photo/image/2/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:49:13 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/2/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (73.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:49:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 39ms (Views: 35.7ms | ActiveRecord: 2.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:50:02 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (101.4ms)
  [1m[35m (4.1ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (6.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.1ms)
Completed 200 OK in 508ms (Views: 464.8ms | ActiveRecord: 16.2ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:50:03 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (48.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (86.6ms)


Started GET "/uploads/photo/image/2/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:50:03 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/2/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (33.7ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:50:09 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (6.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (36.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:50:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (61.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 103ms (Views: 86.5ms | ActiveRecord: 9.9ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:50:58 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (37.8ms)


Started GET "/uploads/photo/image/2/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:50:58 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/2/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (35.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:51:00 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (342.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (358.2ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (38.0ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 442ms (Views: 439.3ms | ActiveRecord: 1.8ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:51:22 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"ee", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd4492fd3f0 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-cmzw8l>, @original_filename="Scan-130120-0002.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Scan-130120-0002.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
Completed 500 Internal Server Error in 28ms

NoMethodError - undefined method `scale' for #<ImageUploader::Uploader70274884177400:0x007fd4493696b8>:
  carrierwave (0.9.0) lib/carrierwave/uploader/processing.rb:85:in `block in process!'
  carrierwave (0.9.0) lib/carrierwave/uploader/processing.rb:81:in `process!'
  carrierwave (0.9.0) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
  carrierwave (0.9.0) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
  carrierwave (0.9.0) lib/carrierwave/uploader/cache.rb:122:in `cache!'
  carrierwave (0.9.0) lib/carrierwave/uploader/versions.rb:273:in `block in cache_versions!'
  carrierwave (0.9.0) lib/carrierwave/uploader/versions.rb:258:in `cache_versions!'
  carrierwave (0.9.0) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
  carrierwave (0.9.0) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
  carrierwave (0.9.0) lib/carrierwave/uploader/cache.rb:122:in `cache!'
  carrierwave (0.9.0) lib/carrierwave/mount.rb:327:in `cache'
  carrierwave (0.9.0) lib/carrierwave/mount.rb:179:in `image='
  carrierwave (0.9.0) lib/carrierwave/orm/activerecord.rb:38:in `image='
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:42:in `_assign_attribute'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:29:in `block in assign_attributes'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:23:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/core.rb:192:in `initialize'
  activerecord (4.0.0) lib/active_record/inheritance.rb:27:in `new'
  app/controllers/photos_controller.rb:29:in `create'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274896986540/variables" for 127.0.0.1 at 2013-08-21 12:51:22 +0600


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:51:44 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"ee", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd4494f4cd0 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-19qsx1>, @original_filename="Scan-130120-0002.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Scan-130120-0002.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (20.1ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 21 Aug 2013 06:51:44 UTC +00:00], ["image", "Scan-130120-0002.jpg"], ["title", "ee"], ["updated_at", Wed, 21 Aug 2013 06:51:44 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/3
Completed 302 Found in 294ms (ActiveRecord: 26.8ms)


Started GET "/ru/users/4/photos/3" for 127.0.0.1 at 2013-08-21 12:51:44 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"3"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 56ms (Views: 46.9ms | ActiveRecord: 5.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:51:47 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.3ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 34ms (Views: 31.1ms | ActiveRecord: 1.8ms)


Started GET "/uploads/photo/image/2/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:51:48 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/2/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (6.3ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (42.0ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:51:48 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (31.5ms)


Started DELETE "/ru/users/4/photos/2" for 127.0.0.1 at 2013-08-21 12:51:53 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"2"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 2]]
  [1m[36m (87.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 100ms

NameError - undefined local variable or method `photos_url' for #<PhotosController:0x007fd44f259560>:
  app/controllers/photos_controller.rb:61:in `block (2 levels) in destroy'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:191:in `respond_to'
  app/controllers/photos_controller.rb:60:in `destroy'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274919078220/variables" for 127.0.0.1 at 2013-08-21 12:51:53 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:52:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (61.1ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 159ms (Views: 142.2ms | ActiveRecord: 9.9ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:52:51 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.4ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (32.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:52:53 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 25.1ms | ActiveRecord: 1.6ms)


Started GET "/uploads/photo/image/1/thumb_nadya5.jpg" for 127.0.0.1 at 2013-08-21 12:52:53 +0600

ActionController::RoutingError (No route matches [GET] "/uploads/photo/image/1/thumb_nadya5.jpg"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.5ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.3ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (32.5ms)


Started DELETE "/ru/users/4/photos/1" for 127.0.0.1 at 2013-08-21 12:52:55 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"1"}
  [1m[35mPhoto Load (2.1ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "1"]]
  [1m[36m (2.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/1
Completed 302 Found in 24ms (ActiveRecord: 6.6ms)


Started GET "/ru/users/4/photos/1" for 127.0.0.1 at 2013-08-21 12:52:55 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"1"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "1"]]
Completed 404 Not Found in 2ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=1:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274918125520/variables" for 127.0.0.1 at 2013-08-21 12:52:55 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:53:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:53:08 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 31.9ms | ActiveRecord: 1.1ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:53:40 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"my first", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd44b0185c0 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-1agkr63>, @original_filename="Imag0129.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0129.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 06:53:40 UTC +00:00], ["image", "Imag0129.JPG"], ["title", "my first"], ["updated_at", Wed, 21 Aug 2013 06:53:40 UTC +00:00], ["user_id", 4]]
  [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/4
Completed 302 Found in 153ms (ActiveRecord: 4.7ms)


Started GET "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:53:40 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "4"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 24.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:53:41 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.8ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 38.7ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/3" for 127.0.0.1 at 2013-08-21 12:54:06 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"3"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "3"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/3" for 127.0.0.1 at 2013-08-21 12:54:35 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"3"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 22.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:54:40 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "4"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 24ms (Views: 21.4ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 12:54:50 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.6ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 36ms (Views: 33.0ms | ActiveRecord: 1.7ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:55:21 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd449506778 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-1yu14be>, @original_filename="Imag0060.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0060.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (27.2ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 21 Aug 2013 06:55:22 UTC +00:00], ["image", "Imag0060.JPG"], ["title", "Отпуск 2013"], ["updated_at", Wed, 21 Aug 2013 06:55:22 UTC +00:00], ["user_id", 4]]
  [1m[35m (26.4ms)[0m  COMMIT
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/5
Completed 302 Found in 406ms (ActiveRecord: 61.0ms)


Started GET "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:55:22 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (6.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 46ms (Views: 38.6ms | ActiveRecord: 5.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:55:25 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.1ms | ActiveRecord: 1.9ms)


Started DELETE "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:55:31 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[35mPhoto Load (6.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "4"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 4]]
  [1m[36m (65.5ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/4
Completed 302 Found in 82ms (ActiveRecord: 73.6ms)


Started GET "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:55:31 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "4"]]
Completed 404 Not Found in 2ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=4:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274869609760/variables" for 127.0.0.1 at 2013-08-21 12:55:31 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:56:01 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (13.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (23.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 55ms (Views: 38.6ms | ActiveRecord: 15.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:56:02 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 40ms (Views: 38.2ms | ActiveRecord: 1.4ms)


Started DELETE "/ru/users/4/photos/3" for 127.0.0.1 at 2013-08-21 12:56:09 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"3"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "3"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 3]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/3
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/3" for 127.0.0.1 at 2013-08-21 12:56:09 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"3"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "3"]]
Completed 404 Not Found in 2ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=3:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274870423440/variables" for 127.0.0.1 at 2013-08-21 12:56:09 +0600


Started GET "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:56:48 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "4"]]
Completed 404 Not Found in 3ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=4:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/4" for 127.0.0.1 at 2013-08-21 12:56:48 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "4"]]
Completed 404 Not Found in 2ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=4:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274887619120/variables" for 127.0.0.1 at 2013-08-21 12:56:48 +0600


Started GET "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:56:54 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 33ms (Views: 29.5ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:56:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 24ms (Views: 22.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:56:58 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 24ms (Views: 21.6ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/5/edit" for 127.0.0.1 at 2013-08-21 12:57:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (56.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (349.5ms)
Completed 500 Internal Server Error in 386ms

NoMethodError - undefined method `photo_path' for #<#<Class:0x007fd44b62b1d8>:0x007fd44d9d3810>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:87:in `url_for'
  actionpack (4.0.0) lib/action_view/helpers/url_helper.rb:180:in `link_to'
  app/views/photos/edit.html.erb:5:in `_app_views_photos_edit_html_erb__643098639605144899_70274905969380'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/5/edit" for 127.0.0.1 at 2013-08-21 12:57:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (16.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (71.1ms)
Completed 500 Internal Server Error in 75ms

NoMethodError - undefined method `photo_path' for #<#<Class:0x007fd44b62b1d8>:0x007fd44b7487c8>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:87:in `url_for'
  actionpack (4.0.0) lib/action_view/helpers/url_helper.rb:180:in `link_to'
  app/views/photos/edit.html.erb:5:in `_app_views_photos_edit_html_erb__643098639605144899_70274887864240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274886043060/variables" for 127.0.0.1 at 2013-08-21 12:57:01 +0600


Started GET "/ru/users/4/photos/5/edit" for 127.0.0.1 at 2013-08-21 12:57:11 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (21.4ms)
Completed 500 Internal Server Error in 25ms

NoMethodError - undefined method `photo_path' for #<#<Class:0x007fd44b62b1d8>:0x007fd44b3dab68>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:87:in `url_for'
  actionpack (4.0.0) lib/action_view/helpers/url_helper.rb:180:in `link_to'
  app/views/photos/edit.html.erb:5:in `_app_views_photos_edit_html_erb__643098639605144899_70274905969380'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/5/edit" for 127.0.0.1 at 2013-08-21 12:57:11 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (58.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (70.3ms)
Completed 500 Internal Server Error in 73ms

NoMethodError - undefined method `photo_path' for #<#<Class:0x007fd44b62b1d8>:0x007fd4493dad68>:
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
  actionpack (4.0.0) lib/action_dispatch/routing/polymorphic_routes.rb:135:in `polymorphic_path'
  actionpack (4.0.0) lib/action_view/routing_url_for.rb:87:in `url_for'
  actionpack (4.0.0) lib/action_view/helpers/url_helper.rb:180:in `link_to'
  app/views/photos/edit.html.erb:5:in `_app_views_photos_edit_html_erb__643098639605144899_70274887864240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274897004520/variables" for 127.0.0.1 at 2013-08-21 12:57:12 +0600


Started GET "/ru/users/4/photos/5/edit" for 127.0.0.1 at 2013-08-21 12:57:47 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (15.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (17.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 44ms (Views: 39.8ms | ActiveRecord: 1.5ms)
  [1m[36mPhoto Load (3.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", 3]]


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:58:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (4.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 23.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:58:44 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (4.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 24ms (Views: 22.5ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:58:47 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.1ms | ActiveRecord: 1.4ms)
  [1m[35mPhoto Load (0.9ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 12:59:29 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (5.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 32ms (Views: 29.7ms | ActiveRecord: 1.6ms)


Started DELETE "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:59:37 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[35mPhoto Load (1.2ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36m (2.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 5]]
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/5
Completed 302 Found in 16ms (ActiveRecord: 7.2ms)


Started GET "/ru/users/4/photos/5" for 127.0.0.1 at 2013-08-21 12:59:37 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"5"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "5"]]
Completed 404 Not Found in 2ms

ActiveRecord::RecordNotFound - Couldn't find Photo with id=5:
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:198:in `raise_record_not_found_exception!'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:284:in `find_one'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:268:in `find_with_ids'
  activerecord (4.0.0) lib/active_record/relation/finder_methods.rb:35:in `find'
  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:122:in `find'
  activerecord (4.0.0) lib/active_record/querying.rb:3:in `find'
  app/controllers/photos_controller.rb:69:in `set_photo'
  activesupport (4.0.0) lib/active_support/callbacks.rb:417:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274897419780/variables" for 127.0.0.1 at 2013-08-21 12:59:37 +0600
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started POST "/__better_errors/70274897419780/eval" for 127.0.0.1 at 2013-08-21 13:00:17 +0600


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 13:00:48 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.2ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (41.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 81ms (Views: 65.7ms | ActiveRecord: 8.3ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 13:00:50 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (64.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (65.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.9ms)
Completed 200 OK in 92ms (Views: 89.0ms | ActiveRecord: 2.1ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 13:01:03 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"my first", "user_id"=>"4", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd44b213898 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-1s3buhs>, @original_filename="Imag0114.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0114.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 07:01:04 UTC +00:00], ["image", "Imag0114.JPG"], ["title", "my first"], ["updated_at", Wed, 21 Aug 2013 07:01:04 UTC +00:00], ["user_id", 4]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/6
Completed 302 Found in 165ms (ActiveRecord: 7.3ms)


Started GET "/ru/users/4/photos/6" for 127.0.0.1 at 2013-08-21 13:01:04 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"6"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "6"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 23.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 13:01:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (5.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.7ms | ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 14:01:33 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.5ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 56.7ms | ActiveRecord: 0.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:08:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 29.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:08:40 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 35ms (Views: 32.7ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:09:44 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 30ms (Views: 27.5ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:09:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 36ms (Views: 33.6ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:09:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 41ms (Views: 38.9ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 14:18:27 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 30.0ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:22:06 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.2ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (102.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 142ms (Views: 125.5ms | ActiveRecord: 10.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 14:22:10 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 30.3ms | ActiveRecord: 1.1ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:22:24 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd44b139918 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-1rqo3c8>, @original_filename="Imag0119.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0119.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 21 Aug 2013 08:22:24 UTC +00:00], ["image", "Imag0119.JPG"], ["title", "Отпуск 2013"], ["updated_at", Wed, 21 Aug 2013 08:22:24 UTC +00:00], ["user_id", 4]]
  [1m[35m (5.5ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/7
Completed 302 Found in 177ms (ActiveRecord: 6.9ms)


Started GET "/ru/users/4/photos/7" for 127.0.0.1 at 2013-08-21 14:22:24 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "7"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 29ms (Views: 25.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:22:27 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 32ms (Views: 29.5ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/7/edit" for 127.0.0.1 at 2013-08-21 14:22:34 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "7"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 29.0ms | ActiveRecord: 1.4ms)
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m


Started GET "/ru/users/4/photos/7/edit" for 127.0.0.1 at 2013-08-21 14:30:26 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "7"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (51.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (52.8ms)
Completed 500 Internal Server Error in 57ms

NoMethodError - undefined method `remove_avatar' for #<Photo:0x007fd4495bc398>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  actionpack (4.0.0) lib/action_view/helpers/tags/base.rb:28:in `value'
  actionpack (4.0.0) lib/action_view/helpers/tags/checkable.rb:10:in `input_checked?'
  actionpack (4.0.0) lib/action_view/helpers/tags/check_box.rb:19:in `render'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:930:in `check_box'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:1649:in `check_box'
  app/views/photos/_form.html.erb:13:in `block in _app_views_photos__form_html_erb__4104141922426966575_70274870310720'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb__4104141922426966575_70274870310720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb__643098639605144899_70274869066740'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__971507036208285635__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2509453475008363032__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70274870668560/variables" for 127.0.0.1 at 2013-08-21 14:30:26 +0600


Started GET "/ru/users/4/photos/7/edit" for 127.0.0.1 at 2013-08-21 14:30:55 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "7"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (13.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 44ms (Views: 40.4ms | ActiveRecord: 1.6ms)


Started PATCH "/ru/users/4/photos/7" for 127.0.0.1 at 2013-08-21 14:31:00 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013", "remove_image"=>"1"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "7"]]
Unpermitted parameters: remove_image
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/7
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/7" for 127.0.0.1 at 2013-08-21 14:31:00 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "7"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 29ms (Views: 25.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:31:06 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (5.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 73ms (Views: 70.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/7/edit" for 127.0.0.1 at 2013-08-21 14:31:13 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "7"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 33ms (Views: 29.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:33:31 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (5.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/6/edit" for 127.0.0.1 at 2013-08-21 14:33:33 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"6"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "6"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (6.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (7.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.6ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/6" for 127.0.0.1 at 2013-08-21 14:33:40 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"my first", "remove_image"=>"1"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"6"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "6"]]
Unpermitted parameters: remove_image
  [1m[36m (18.0ms)[0m  [1mBEGIN[0m
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36mUser Load (3.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/6
Completed 302 Found in 44ms (ActiveRecord: 35.2ms)


Started GET "/ru/users/4/photos/6" for 127.0.0.1 at 2013-08-21 14:33:40 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"6"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "6"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:33:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 25.2ms | ActiveRecord: 1.5ms)


Started DELETE "/ru/users/4/photos/6" for 127.0.0.1 at 2013-08-21 14:33:47 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"6"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "6"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 6]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/4/users/6/photos
Completed 302 Found in 8ms (ActiveRecord: 2.1ms)


Started GET "/4/users/6/photos" for 127.0.0.1 at 2013-08-21 14:33:47 +0600

ActionController::RoutingError (No route matches [GET] "/4/users/6/photos"):
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.5ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (36.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:34:01 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 30.9ms | ActiveRecord: 1.6ms)


Started DELETE "/ru/users/4/photos/7" for 127.0.0.1 at 2013-08-21 14:34:51 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"7"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "7"]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 7]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos
Completed 302 Found in 114ms (ActiveRecord: 6.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:34:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (2.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 39ms (Views: 33.0ms | ActiveRecord: 4.9ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 14:34:53 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (6.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (7.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 31ms (Views: 29.0ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 14:35:10 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.6ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 36ms (Views: 33.2ms | ActiveRecord: 1.1ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:36:05 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd44b2c49b8 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-2opu30>, @original_filename="Imag0109.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0109.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 08:36:05 UTC +00:00], ["image", "Imag0109.JPG"], ["title", "Отпуск 2013"], ["updated_at", Wed, 21 Aug 2013 08:36:05 UTC +00:00], ["user_id", 4]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 203ms (ActiveRecord: 7.8ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-21 14:36:05 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 23.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:36:11 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (4.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-21 14:36:16 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (6.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 26.9ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-21 14:36:19 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-21 14:36:19 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:36:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (4.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 23.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 14:36:38 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (5.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (6.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 24.8ms | ActiveRecord: 1.2ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:36:58 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"Отпуск 2013-2", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd44b2ceb98 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-70319-tttd2i>, @original_filename="Imag0102.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0102.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 21 Aug 2013 08:36:58 UTC +00:00], ["image", "Imag0102.JPG"], ["title", "Отпуск 2013-2"], ["updated_at", Wed, 21 Aug 2013 08:36:58 UTC +00:00], ["user_id", 4]]
  [1m[35m (22.0ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 291ms (ActiveRecord: 23.3ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-21 14:36:58 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 121ms (Views: 24.7ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:37:01 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 24.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-21 14:37:07 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 62ms (Views: 59.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:37:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 36ms (Views: 34.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:37:27 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 43ms (Views: 39.9ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:46:52 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 38ms (Views: 35.2ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:47:07 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 39ms (Views: 36.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:47:22 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 38ms (Views: 35.0ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:47:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 38ms (Views: 35.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:53:03 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 85ms (Views: 82.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:53:17 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 35ms (Views: 32.4ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:53:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 33ms (Views: 30.8ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:53:55 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (49.6ms)
Completed 500 Internal Server Error in 89ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml): found character that cannot start any token while scanning for the next token at line 2 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___778590044183022668_70239096248880'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4452624774489158137__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3470779611676570966__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70239094252300/variables" for 127.0.0.1 at 2013-08-21 14:53:56 +0600
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:54:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (14.5ms)
Completed 500 Internal Server Error in 23ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml: #<Errno::ENOENT: No such file or directory - /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___778590044183022668_70239096248880'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4452624774489158137__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3470779611676570966__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70239095008380/variables" for 127.0.0.1 at 2013-08-21 14:54:19 +0600
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-21 14:54:31 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (2.0ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (52.8ms)
  [1m[35m (39.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 458ms (Views: 406.2ms | ActiveRecord: 49.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:54:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (16.5ms)
Completed 500 Internal Server Error in 19ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml: #<Errno::ENOENT: No such file or directory - /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___778590044183022668_70239096050520'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4452624774489158137__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3470779611676570966__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:54:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (63.8ms)
Completed 500 Internal Server Error in 66ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml: #<Errno::ENOENT: No such file or directory - /Users/vith/Desktop/projects/rails/photohome/config/locales/photo.ru.yml>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___778590044183022668_70239096248880'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4452624774489158137__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3470779611676570966__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70239102435700/variables" for 127.0.0.1 at 2013-08-21 14:54:38 +0600
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:54:52 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (49.3ms)
Completed 500 Internal Server Error in 87ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 26 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273582727780/variables" for 127.0.0.1 at 2013-08-21 14:54:52 +0600
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:55:26 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (116.9ms)
  [1m[36m (4.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 484ms (Views: 461.6ms | ActiveRecord: 15.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:55:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (132.9ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 179ms (Views: 160.7ms | ActiveRecord: 9.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:55:50 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (63.1ms)
Completed 500 Internal Server Error in 71ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 26 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273557999440/variables" for 127.0.0.1 at 2013-08-21 14:55:50 +0600
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:56:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (54.4ms)
Completed 500 Internal Server Error in 62ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 25 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273582053240/variables" for 127.0.0.1 at 2013-08-21 14:56:37 +0600
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:56:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (57.6ms)
Completed 500 Internal Server Error in 66ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 25 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273580169960/variables" for 127.0.0.1 at 2013-08-21 14:56:52 +0600
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:56:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (59.5ms)
Completed 500 Internal Server Error in 69ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 25 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273556072900/variables" for 127.0.0.1 at 2013-08-21 14:56:59 +0600
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:57:15 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (111.9ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 153ms (Views: 135.1ms | ActiveRecord: 11.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:57:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (119.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 160ms (Views: 143.5ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:57:57 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (59.3ms)
Completed 500 Internal Server Error in 67ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 26 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273575692920/variables" for 127.0.0.1 at 2013-08-21 14:57:57 +0600
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:58:05 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (14.4ms)
Completed 500 Internal Server Error in 22ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 26 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  app/views/photos/index.html.erb:1:in `_app_views_photos_index_html_erb___4113314682053593049_70273552653800'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273597069540/variables" for 127.0.0.1 at 2013-08-21 14:58:05 +0600
  [1m[35mPhoto Load (0.2ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:58:29 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (115.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 155ms (Views: 138.5ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:58:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (115.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 156ms (Views: 139.9ms | ActiveRecord: 9.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:58:59 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (118.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 158ms (Views: 141.1ms | ActiveRecord: 10.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 14:59:29 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (123.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 164ms (Views: 147.0ms | ActiveRecord: 9.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:00:32 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (121.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 164ms (Views: 146.8ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:01:16 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (118.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 160ms (Views: 143.3ms | ActiveRecord: 9.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:01:42 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (126.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 206ms (Views: 189.0ms | ActiveRecord: 10.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-21 15:03:05 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.5ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 35ms (Views: 33.6ms | ActiveRecord: 0.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:04:48 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 35ms (Views: 32.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:04:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 86ms (Views: 83.6ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:05:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (111.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 201ms (Views: 135.8ms | ActiveRecord: 9.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:05:29 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (113.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.4ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 156ms (Views: 138.4ms | ActiveRecord: 10.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:05:49 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (113.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 154ms (Views: 138.2ms | ActiveRecord: 9.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:09:13 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (115.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 159ms (Views: 138.7ms | ActiveRecord: 12.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:09:36 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 40ms (Views: 37.1ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:10:44 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (114.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 155ms (Views: 138.1ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:11:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
ERROR: compiling _app_views_photos_index_html_erb___4113314682053593049_70273552506120 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting ')'
...nd=( link_to t('.new'),:class "btn btn-primary", new_user_ph...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected ',', expecting ')'
...new'),:class "btn btn-primary", new_user_photo_path(current_...
...                               ^
Function body:           def _app_views_photos_index_html_erb___4113314682053593049_70273552506120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append='<h1>';@output_buffer.append=(t '.title' );@output_buffer.safe_append='</h1>

<table>
  <thead>
    <tr>
      <th class="span5">Title</th>
      <th>Image</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
';     @photos.each do |photo| 
@output_buffer.safe_append='      <tr>
        <td>';@output_buffer.append=( photo.title );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( image_tag photo.image_url(:thumb) );@output_buffer.safe_append='</td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-folder-open"), user_photo_path(current_user,photo));@output_buffer.safe_append='
        </td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-pencil"), edit_user_photo_path(current_user,photo) );@output_buffer.safe_append='</td>
        <td>
        ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-minus"), user_photo_path(current_user,photo), method: :delete, data: { confirm: 'Are you sure?' } );@output_buffer.safe_append='
        </td>
      </tr>
';     end 
@output_buffer.safe_append='  </tbody>
</table>

<br>

';@output_buffer.append=( link_to t('.new'),:class "btn btn-primary", new_user_photo_path(current_user) );@output_buffer.safe_append='
';@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/index.html.erb within layouts/user_profile_layout (3.0ms)
Completed 500 Internal Server Error in 12ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting ')'
...nd=( link_to t('.new'),:class "btn btn-primary", new_user_ph...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected ',', expecting ')'
...new'),:class "btn btn-primary", new_user_photo_path(current_...
...                               ^:
  app/views/photos/index.html.erb:34:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273552599560/variables" for 127.0.0.1 at 2013-08-21 15:11:56 +0600
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:13:22 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
ERROR: compiling _app_views_photos_index_html_erb___4113314682053593049_70273598012880 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting =>
...to_path(current_user),{:class "btn btn-primary"} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected '}', expecting ')'
...ser),{:class "btn btn-primary"} );@output_buffer.safe_append...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:36: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:38: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos_index_html_erb___4113314682053593049_70273598012880(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append='<h1>';@output_buffer.append=(t '.title' );@output_buffer.safe_append='</h1>

<table>
  <thead>
    <tr>
      <th class="span5">Title</th>
      <th>Image</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
';     @photos.each do |photo| 
@output_buffer.safe_append='      <tr>
        <td>';@output_buffer.append=( photo.title );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( image_tag photo.image_url(:thumb) );@output_buffer.safe_append='</td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-folder-open"), user_photo_path(current_user,photo));@output_buffer.safe_append='
        </td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-pencil"), edit_user_photo_path(current_user,photo) );@output_buffer.safe_append='</td>
        <td>
        ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-minus"), user_photo_path(current_user,photo), method: :delete, data: { confirm: 'Are you sure?' } );@output_buffer.safe_append='
        </td>
      </tr>
';     end 
@output_buffer.safe_append='  </tbody>
</table>

<br>

';@output_buffer.append=( link_to t('.new'), new_user_photo_path(current_user),{:class "btn btn-primary"} );@output_buffer.safe_append='
';@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/index.html.erb within layouts/user_profile_layout (47.4ms)
Completed 500 Internal Server Error in 50ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting =>
...to_path(current_user),{:class "btn btn-primary"} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected '}', expecting ')'
...ser),{:class "btn btn-primary"} );@output_buffer.safe_append...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:36: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:38: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/index.html.erb:34:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273555364000/variables" for 127.0.0.1 at 2013-08-21 15:13:23 +0600
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos"[0m


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:13:23 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
ERROR: compiling _app_views_photos_index_html_erb___4113314682053593049_70273598012880 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting =>
...to_path(current_user),{:class "btn btn-primary"} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected '}', expecting ')'
...ser),{:class "btn btn-primary"} );@output_buffer.safe_append...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:36: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:38: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos_index_html_erb___4113314682053593049_70273598012880(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append='<h1>';@output_buffer.append=(t '.title' );@output_buffer.safe_append='</h1>

<table>
  <thead>
    <tr>
      <th class="span5">Title</th>
      <th>Image</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
';     @photos.each do |photo| 
@output_buffer.safe_append='      <tr>
        <td>';@output_buffer.append=( photo.title );@output_buffer.safe_append='</td>
        <td>';@output_buffer.append=( image_tag photo.image_url(:thumb) );@output_buffer.safe_append='</td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-folder-open"), user_photo_path(current_user,photo));@output_buffer.safe_append='
        </td>
        <td>
         ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-pencil"), edit_user_photo_path(current_user,photo) );@output_buffer.safe_append='</td>
        <td>
        ';@output_buffer.append=(link_to content_tag(:span,"",class: "ui-icon ui-icon-minus"), user_photo_path(current_user,photo), method: :delete, data: { confirm: 'Are you sure?' } );@output_buffer.safe_append='
        </td>
      </tr>
';     end 
@output_buffer.safe_append='  </tbody>
</table>

<br>

';@output_buffer.append=( link_to t('.new'), new_user_photo_path(current_user),{:class "btn btn-primary"} );@output_buffer.safe_append='
';@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/index.html.erb within layouts/user_profile_layout (4.2ms)
Completed 500 Internal Server Error in 7ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected tSTRING_BEG, expecting =>
...to_path(current_user),{:class "btn btn-primary"} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:34: syntax error, unexpected '}', expecting ')'
...ser),{:class "btn btn-primary"} );@output_buffer.safe_append...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:36: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/index.html.erb:38: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/index.html.erb:34:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4436856018843650490__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4291777254457511208__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70273552712280/variables" for 127.0.0.1 at 2013-08-21 15:13:24 +0600
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:13:38 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (111.7ms)
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 151ms (Views: 138.9ms | ActiveRecord: 11.0ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 15:13:44 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (79.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (81.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.9ms)
  Rendered layouts/_messages.html.erb (0.8ms)
  Rendered layouts/_user_sidebar.html.erb (1.5ms)
Completed 200 OK in 115ms (Views: 111.9ms | ActiveRecord: 1.6ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:13:57 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"#2", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fd3acf70f30 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-71306-1ecdlm9>, @original_filename="Imag0106.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0106.JPG\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 09:13:58 UTC +00:00], ["image", "Imag0106.JPG"], ["title", "#2"], ["updated_at", Wed, 21 Aug 2013 09:13:58 UTC +00:00], ["user_id", 4]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/10
Completed 302 Found in 221ms (ActiveRecord: 9.5ms)


Started GET "/ru/users/4/photos/10" for 127.0.0.1 at 2013-08-21 15:13:58 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"10"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "10"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (5.8ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 31ms (Views: 26.8ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:14:00 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.8ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 31ms (Views: 28.1ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:20:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (123.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 165ms (Views: 149.0ms | ActiveRecord: 9.5ms)


Started DELETE "/ru/users/4/photos/10" for 127.0.0.1 at 2013-08-21 15:21:18 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "locale"=>"ru", "user_id"=>"4", "id"=>"10"}
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "10"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos
Completed 302 Found in 12ms (ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:21:18 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.1ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 36ms (Views: 32.4ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 15:24:21 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.3ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 38ms (Views: 35.0ms | ActiveRecord: 2.0ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to ActsAsTaggableOnMigration (20130821095541)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.3ms)[0m  [1mCREATE TABLE "tags" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (4.5ms)[0m  CREATE TABLE "taggings" ("id" serial primary key, "tag_id" integer, "taggable_id" integer, "taggable_type" character varying(255), "tagger_id" integer, "tagger_type" character varying(255), "context" character varying(128), "created_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_taggings_on_tag_id" ON "taggings" ("tag_id")[0m
  [1m[35m (1.7ms)[0m  CREATE INDEX "index_taggings_on_taggable_id_and_taggable_type_and_context" ON "taggings" ("taggable_id", "taggable_type", "context")
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20130821095541"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (4.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Wed, 21 Aug 2013 10:04:34 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'portrait' OR lower(name) = 'children')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'portrait' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "portrait"]]
  [1m[35mActsAsTaggableOn::Tag Exists (0.5ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'children' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "children"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 1 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:04:35 UTC +00:00], ["tag_id", 1], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 2 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:04:35 UTC +00:00], ["tag_id", 2], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.6ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (50.4ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 16:41:25 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
Completed 500 Internal Server Error in 33ms

RuntimeError - `attr_accessible` is extracted out of Rails into a gem. Please use new recommended protection model for params(strong_parameters) or add `protected_attributes` to your Gemfile to use old one.:
  activemodel (4.0.0) lib/active_model/deprecated_mass_assignment_security.rb:14:in `attr_accessible'
  app/models/photo.rb:6:in `<class:Photo>'
  app/models/photo.rb:1:in `<top (required)>'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/dependencies.rb:494:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  app/controllers/photos_controller.rb:19:in `new'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3553177991468447222__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3606444460765098244__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 16:41:25 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
Completed 500 Internal Server Error in 16ms

RuntimeError - `attr_accessible` is extracted out of Rails into a gem. Please use new recommended protection model for params(strong_parameters) or add `protected_attributes` to your Gemfile to use old one.:
  activemodel (4.0.0) lib/active_model/deprecated_mass_assignment_security.rb:14:in `attr_accessible'
  app/models/photo.rb:6:in `<class:Photo>'
  app/models/photo.rb:1:in `<top (required)>'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/dependencies.rb:494:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  app/controllers/photos_controller.rb:19:in `new'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3553177991468447222__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3606444460765098244__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70323433024640/variables" for 127.0.0.1 at 2013-08-21 16:41:25 +0600
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 16:42:00 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (172.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (176.4ms)
  [1m[36m (4.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 744ms (Views: 693.2ms | ActiveRecord: 17.9ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-21 16:42:25 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.4ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 39ms (Views: 36.7ms | ActiveRecord: 1.6ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:42:46 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fde951f0a60 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130821-72337-1xu62gc>, @original_filename="Imag0118.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0118.JPG\"\r\nContent-Type: image/jpeg\r\n">, "theme_tokens"=>"portrait,demo"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
Unpermitted parameters: theme_tokens
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "photos" ("created_at", "image", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 21 Aug 2013 10:42:46 UTC +00:00], ["image", "Imag0118.JPG"], ["title", "1"], ["updated_at", Wed, 21 Aug 2013 10:42:46 UTC +00:00], ["user_id", 4]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 173ms (ActiveRecord: 9.2ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:42:46 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (47.9ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 72ms (Views: 67.6ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:42:48 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (1.4ms)
Completed 200 OK in 36ms (Views: 33.8ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:44:22 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (45.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (47.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 110ms (Views: 73.4ms | ActiveRecord: 10.7ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:44:26 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "theme_tokens"=>"portrait,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
Unpermitted parameters: theme_tokens
  [1m[35m (19.4ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 36ms (ActiveRecord: 22.5ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:44:26 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.6ms)
  [1m[36m (40.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 66ms (Views: 23.1ms | ActiveRecord: 41.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:44:28 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.0ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:44:30 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (6.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (7.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 25.8ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:45:38 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "theme_tokens"=>"portrait,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (1.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 105ms (ActiveRecord: 8.8ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:45:38 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (5.7ms)
  [1m[35m (3.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 417ms (Views: 405.8ms | ActiveRecord: 9.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:45:41 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (22.5ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 87ms (Views: 84.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:45:43 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (36.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (38.2ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 61ms (Views: 57.8ms | ActiveRecord: 1.8ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:46:12 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "theme_tokens"=>"portrait,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 93ms (ActiveRecord: 6.8ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:46:12 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 82ms (Views: 75.1ms | ActiveRecord: 5.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:46:14 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.8ms)
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 26.7ms | ActiveRecord: 2.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:46:18 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (1.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (14.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 44ms (Views: 37.7ms | ActiveRecord: 4.1ms)
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:47:07 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "theme_tokens"=>"portrait,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mSQL (2.4ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 11[0m  [["updated_at", Wed, 21 Aug 2013 10:47:07 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (38.9ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '1' OR lower(name) = '2')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = '1' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "1"]]
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = '2' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "2"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 3 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 11 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:47:07 UTC +00:00], ["tag_id", 3], ["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 4 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 11 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:47:07 UTC +00:00], ["tag_id", 4], ["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 329ms (ActiveRecord: 59.3ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:47:07 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (47.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 86ms (Views: 79.5ms | ActiveRecord: 4.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:47:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.2ms | ActiveRecord: 1.6ms)
  [1m[36mPhoto Load (1.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:47:51 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (45.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (46.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 107ms (Views: 73.2ms | ActiveRecord: 9.3ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:47:56 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyn2TDElFYLeIwIOOUs9KohiigwJ1GepQywFyEBp/yU=", "photo"=>{"title"=>"1", "theme_tokens"=>"portrait,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (1.1ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35m (7.8ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 11  [["updated_at", Wed, 21 Aug 2013 10:47:56 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'portrait' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.5ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'demo' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "demo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (4, 3)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (4, 3)
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 4]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 1 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 11 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:47:56 UTC +00:00], ["tag_id", 1], ["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 5 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 11 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Wed, 21 Aug 2013 10:47:56 UTC +00:00], ["tag_id", 5], ["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 127ms (ActiveRecord: 20.4ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-21 16:47:56 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-21 16:47:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (41.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 63ms (Views: 61.0ms | ActiveRecord: 1.3ms)
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:49:07 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (54.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (55.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 77ms (Views: 74.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-21 16:49:21 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 36ms (Views: 32.4ms | ActiveRecord: 1.7ms)
  [1m[36m (0.9ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (2.5ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'demo') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags"[0m
  [1m[35m (0.6ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.5ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m


Started GET "/photo_ajax/theme_tokens" for 127.0.0.1 at 2013-08-21 17:08:45 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotoAjaxController#theme_tokens as HTML
Completed 406 Not Acceptable in 19ms

ActionController::UnknownFormat - ActionController::UnknownFormat:
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:372:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3509368871669026591__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2221080636235335477__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70174701531160/variables" for 127.0.0.1 at 2013-08-21 17:08:45 +0600


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-21 17:08:52 +0600
Processing by PhotoAjaxController#theme_tokens as JS
  [1m[35m (0.6ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (2.7ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 72ms (Views: 6.1ms | ActiveRecord: 9.1ms)
  [1m[35m (0.8ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.5ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-22 08:50:54 +0600
  [1m[36mActiveRecord::SchemaMigration Load (80.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotoAjaxController#theme_tokens as JS
  [1m[35m (46.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1061.7ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 1779ms (Views: 8.1ms | ActiveRecord: 1185.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (4.3ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-22 08:54:39 +0600
Processing by PhotoAjaxController#theme_tokens as JS
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 3.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.9ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id


Started GET "/" for 127.0.0.1 at 2013-08-22 08:55:25 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (18.1ms)
Completed 500 Internal Server Error in 1177ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb___1805368658123939530_70276011751240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__2475359809464867954__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4004118074659506194__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70276055454740/variables" for 127.0.0.1 at 2013-08-22 08:55:26 +0600
  [1m[35mUser Load (5.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.9ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-22 09:08:00 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/photo_ajax_controller.rb:14: syntax error, unexpected keyword_end, expecting '}'
  	end	
  	   ^:
  app/controllers/photo_ajax_controller.rb:14:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103039101960/variables" for 127.0.0.1 at 2013-08-22 09:08:00 +0600
  [1m[36m (0.7ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-22 09:08:59 +0600
Processing by PhotoAjaxController#theme_tokens as JS
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (2.5ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 88ms (Views: 0.4ms | ActiveRecord: 7.9ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 09:09:55 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (1.4ms)
Completed 500 Internal Server Error in 351ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb___940221280868999784_70103012978140'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1541214130748268379__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103060252580/variables" for 127.0.0.1 at 2013-08-22 09:09:56 +0600
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"


Started GET "/" for 127.0.0.1 at 2013-08-22 09:10:20 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (5.6ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 732ms (Views: 730.8ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 09:10:25 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (3.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (398.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 474ms (Views: 469.7ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 09:10:31 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7WBMdpgxlP+9DGAAgAcFVNPz+K9YUTval0yCvqSBm6U=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (23.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (63.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4[0m  [["last_sign_in_at", Wed, 21 Aug 2013 03:57:56 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 03:10:31 UTC +00:00], ["sign_in_count", 8], ["updated_at", Thu, 22 Aug 2013 03:10:31 UTC +00:00]]
  [1m[35m (0.8ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 205ms (ActiveRecord: 87.7ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 09:10:31 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (60.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (19.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 211ms (Views: 130.4ms | ActiveRecord: 79.3ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 09:10:38 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.9ms)
Completed 200 OK in 73ms (Views: 70.5ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 09:10:40 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (21.1ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 75ms (Views: 55.6ms | ActiveRecord: 4.3ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:10:42 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (71.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (73.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 113ms (Views: 110.5ms | ActiveRecord: 1.6ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 09:10:59 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"", "theme_tokens"=>"demo"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (29.8ms)[0m  INSERT INTO "photos" ("created_at", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Thu, 22 Aug 2013 03:10:59 UTC +00:00], ["title", ""], ["updated_at", Thu, 22 Aug 2013 03:10:59 UTC +00:00], ["user_id", 4]]
  [1m[36mActsAsTaggableOn::Tag Load (14.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (16.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 12], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 5 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 12 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 03:11:00 UTC +00:00], ["tag_id", 5], ["taggable_id", 12], ["taggable_type", "Photo"]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/12
Completed 302 Found in 327ms (ActiveRecord: 70.0ms)


Started GET "/ru/users/4/photos/12" for 127.0.0.1 at 2013-08-22 09:11:00 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (6.3ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 61ms (Views: 57.5ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 09:11:02 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.7ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:11:11 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (6.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:11:19 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (12.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (13.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 75ms (Views: 73.0ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:14:12 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 259ms (Views: 256.5ms | ActiveRecord: 1.2ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 09:14:16 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=dem" for 127.0.0.1 at 2013-08-22 09:14:21 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"dem"}
  [1m[35m (0.6ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=demo" for 127.0.0.1 at 2013-08-22 09:14:21 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"demo"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=por" for 127.0.0.1 at 2013-08-22 09:14:28 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"por"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:17:02 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (8.7ms)
Completed 500 Internal Server Error in 215ms

ExecJS::RuntimeError - SyntaxError: unexpected IDENTIFIER
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103068608800/variables" for 127.0.0.1 at 2013-08-22 09:17:02 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:17:17 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (13.2ms)
Completed 500 Internal Server Error in 172ms

ExecJS::RuntimeError - SyntaxError: unexpected IDENTIFIER
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103069753540/variables" for 127.0.0.1 at 2013-08-22 09:17:17 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:18:24 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (12.6ms)
Completed 500 Internal Server Error in 171ms

ExecJS::RuntimeError - SyntaxError: unexpected IDENTIFIER
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103069786940/variables" for 127.0.0.1 at 2013-08-22 09:18:25 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:18:39 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 209ms (Views: 206.3ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:18:51 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.9ms)
Completed 500 Internal Server Error in 269ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103013913740/variables" for 127.0.0.1 at 2013-08-22 09:18:51 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:18:59 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.2ms)
Completed 500 Internal Server Error in 211ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103013834680/variables" for 127.0.0.1 at 2013-08-22 09:18:59 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:19:37 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.4ms)
Completed 500 Internal Server Error in 204ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103013404500/variables" for 127.0.0.1 at 2013-08-22 09:19:38 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:19:48 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.1ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (12.6ms)
Completed 500 Internal Server Error in 206ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103015664860/variables" for 127.0.0.1 at 2013-08-22 09:19:48 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:20:25 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (14.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (15.7ms)
Completed 500 Internal Server Error in 174ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103070020680/variables" for 127.0.0.1 at 2013-08-22 09:20:26 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:20:39 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (13.1ms)
Completed 500 Internal Server Error in 167ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103069788160/variables" for 127.0.0.1 at 2013-08-22 09:20:39 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:22:39 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.5ms)
Completed 500 Internal Server Error in 170ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103069849580/variables" for 127.0.0.1 at 2013-08-22 09:22:40 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:22:46 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (11.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (12.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 303ms (Views: 299.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:23:22 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.6ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (8.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 248ms (Views: 245.9ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:23:45 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.7ms)
Completed 500 Internal Server Error in 202ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103013500220/variables" for 127.0.0.1 at 2013-08-22 09:23:45 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:24:20 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.5ms)
Completed 500 Internal Server Error in 235ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103017853580/variables" for 127.0.0.1 at 2013-08-22 09:24:20 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:24:41 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.6ms)
Completed 500 Internal Server Error in 159ms

ExecJS::RuntimeError - SyntaxError: unexpected INDENT
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb__2239822510739335635_70103013303980'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3303870232343717380__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2090561006008747169__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70103069970120/variables" for 127.0.0.1 at 2013-08-22 09:24:41 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:25:03 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 258ms (Views: 255.2ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:26:01 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 254ms (Views: 251.7ms | ActiveRecord: 1.2ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 09:26:06 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 09:26:19 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:28:44 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (8.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 258ms (Views: 256.3ms | ActiveRecord: 1.1ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 09:28:48 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=por" for 127.0.0.1 at 2013-08-22 09:28:53 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"por"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (3.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (1.1ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:33:28 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 332ms (Views: 330.0ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:34:13 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 259ms (Views: 256.5ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:34:49 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.3ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (11.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 36ms (Views: 33.5ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 09:36:22 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 31.6ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 09:36:46 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (45.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 76ms (Views: 73.8ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:36:49 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 59ms (Views: 54.6ms | ActiveRecord: 2.7ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:37:38 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (70.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (72.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 97ms (Views: 92.3ms | ActiveRecord: 2.9ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:38:08 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 71ms (Views: 67.2ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:38:31 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 36.8ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:39:12 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 38ms (Views: 33.4ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:39:14 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 30.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:42:49 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 31ms (Views: 27.5ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:48:08 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (1.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (4.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (240.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (244.9ms)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 932ms (Views: 862.9ms | ActiveRecord: 22.7ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:50:09 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
ERROR: compiling _app_views_photos__form_html_erb__1240439059752529542_70192114274460 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:9: syntax error, unexpected '<', expecting ')'
  </div>
   ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:14: unknown regexp options - dv
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:16: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:16: syntax error, unexpected end-of-input, expecting ')'
Function body:           def _app_views_photos__form_html_erb__1240439059752529542_70192114274460(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/_form";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append=  simple_form_for([current_user,@photo]) do |f| @output_buffer.safe_append='
  ';@output_buffer.append=( f.error_notification );@output_buffer.safe_append='

  <div class="form-inputs">
    ';@output_buffer.append=( f.input :title );@output_buffer.safe_append='
    ';@output_buffer.append=( f.file_field :image );@output_buffer.safe_append='
    ';@output_buffer.append=(# f.input :theme_tokens, :input_html => {data: {load: @photo.theme_list}} );@output_buffer.safe_append='
    ';@output_buffer.append=( f.input :theme_tokens, :input_html => {data: {load: [{id: 1,name: :vit},{id: 2 name: :hello}] } );@output_buffer.safe_append='
  </div>

  
  <div class="form-actions">
    ';@output_buffer.append=( f.button :submit );@output_buffer.safe_append='
  </div>

'; end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:278:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:47:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:143:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/_form.html.erb (13.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.5ms)
Completed 500 Internal Server Error in 21ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:9: syntax error, unexpected '<', expecting ')'
  </div>
   ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:14: unknown regexp options - dv
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:16: unterminated string meets end of file
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:16: syntax error, unexpected end-of-input, expecting ')':
  app/views/photos/_form.html.erb:9:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70192114409360/variables" for 127.0.0.1 at 2013-08-22 09:50:10 +0600


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:50:18 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
ERROR: compiling _app_views_photos__form_html_erb__1240439059752529542_70192090212500 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected tIDENTIFIER, expecting '}'
...[{id: 1,name: :vit},{id: 2 name: :hello}] } );@output_buffer...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos__form_html_erb__1240439059752529542_70192090212500(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/_form";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append=  simple_form_for([current_user,@photo]) do |f| @output_buffer.safe_append='
  ';@output_buffer.append=( f.error_notification );@output_buffer.safe_append='

  <div class="form-inputs">
    ';@output_buffer.append=( f.input :title );@output_buffer.safe_append='
    ';@output_buffer.append=( f.file_field :image );@output_buffer.safe_append='
    ';@output_buffer.append=( f.input :theme_tokens, :input_html => {data: {load: [{id: 1,name: :vit},{id: 2 name: :hello}] } );@output_buffer.safe_append='
  </div>

  
  <div class="form-actions">
    ';@output_buffer.append=( f.button :submit );@output_buffer.safe_append='
  </div>

'; end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:278:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:47:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:143:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/_form.html.erb (3.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (4.1ms)
Completed 500 Internal Server Error in 8ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected tIDENTIFIER, expecting '}'
...[{id: 1,name: :vit},{id: 2 name: :hello}] } );@output_buffer...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/_form.html.erb:7:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70192090296160/variables" for 127.0.0.1 at 2013-08-22 09:50:18 +0600


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:50:44 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
ERROR: compiling _app_views_photos__form_html_erb__1240439059752529542_70192104079060 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected ')', expecting '}'
...put_html => {data: {load:  3} );@output_buffer.safe_append='
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos__form_html_erb__1240439059752529542_70192104079060(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/_form";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append=  simple_form_for([current_user,@photo]) do |f| @output_buffer.safe_append='
  ';@output_buffer.append=( f.error_notification );@output_buffer.safe_append='

  <div class="form-inputs">
    ';@output_buffer.append=( f.input :title );@output_buffer.safe_append='
    ';@output_buffer.append=( f.file_field :image );@output_buffer.safe_append='
    ';@output_buffer.append=( f.input :theme_tokens, :input_html => {data: {load:  3} );@output_buffer.safe_append='
  </div>

  
  <div class="form-actions">
    ';@output_buffer.append=( f.button :submit );@output_buffer.safe_append='
  </div>

'; end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:278:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:47:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:143:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/_form.html.erb (4.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (5.4ms)
Completed 500 Internal Server Error in 10ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected ')', expecting '}'
...put_html => {data: {load:  3} );@output_buffer.safe_append='
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/_form.html.erb:7:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70192104686120/variables" for 127.0.0.1 at 2013-08-22 09:50:45 +0600


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:50:57 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (13.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.9ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 48ms (Views: 44.2ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:51:09 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
ERROR: compiling _app_views_photos__form_html_erb__1240439059752529542_70192080758240 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected tIDENTIFIER, expecting '}'
...[{id: 1,name: :vit},{id: 2 name: :hello}]     }} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos__form_html_erb__1240439059752529542_70192080758240(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/_form";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append=  simple_form_for([current_user,@photo]) do |f| @output_buffer.safe_append='
  ';@output_buffer.append=( f.error_notification );@output_buffer.safe_append='

  <div class="form-inputs">
    ';@output_buffer.append=( f.input :title );@output_buffer.safe_append='
    ';@output_buffer.append=( f.file_field :image );@output_buffer.safe_append='
    ';@output_buffer.append=( f.input :theme_tokens, :input_html => {data: {load:  [{id: 1,name: :vit},{id: 2 name: :hello}]     }} );@output_buffer.safe_append='
  </div>

  
  <div class="form-actions">
    ';@output_buffer.append=( f.button :submit );@output_buffer.safe_append='
  </div>

'; end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:278:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:47:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:143:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/_form.html.erb (4.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (5.3ms)
Completed 500 Internal Server Error in 10ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected tIDENTIFIER, expecting '}'
...[{id: 1,name: :vit},{id: 2 name: :hello}]     }} );@output_b...
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/_form.html.erb:7:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb___518693448503164199_70192122539500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__4574705239995508281__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3666436267729598190__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70192090327040/variables" for 127.0.0.1 at 2013-08-22 09:51:10 +0600


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:51:39 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.7ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 78ms (Views: 73.8ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:51:48 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.2ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 43ms (Views: 39.7ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:52:08 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.4ms)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 37ms (Views: 33.5ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:52:23 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.3ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 37ms (Views: 33.1ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:52:33 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 305ms (Views: 301.6ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 09:52:42 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (13.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 82ms (Views: 78.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:11:44 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (1.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (170.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (174.8ms)
  [1m[35m (3.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 667ms (Views: 603.8ms | ActiveRecord: 16.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:11:47 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.1ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 40ms (Views: 37.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:11:50 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 77ms (Views: 72.9ms | ActiveRecord: 2.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:12:58 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.2ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 37ms (Views: 33.8ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:15:10 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (80.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (81.7ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 107ms (Views: 97.9ms | ActiveRecord: 7.0ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:15:32 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (56.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (57.9ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 251ms (Views: 246.4ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:15:41 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 293ms (Views: 289.3ms | ActiveRecord: 2.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:17:15 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 262ms (Views: 257.4ms | ActiveRecord: 2.5ms)
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT "tags".id FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:20:30 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
ERROR: compiling _app_views_photos__form_html_erb___3174680289079934489_70357232803200 RAISED /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected ')', expecting '}'
...|t| {id: t.id,name: t.name}}} );@output_buffer.safe_append='
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_photos__form_html_erb___3174680289079934489_70357232803200(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "photos/_form";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append=  simple_form_for([current_user,@photo]) do |f| @output_buffer.safe_append='
  ';@output_buffer.append=( f.error_notification );@output_buffer.safe_append='

  <div class="form-inputs">
    ';@output_buffer.append=( f.input :title );@output_buffer.safe_append='
    ';@output_buffer.append=( f.file_field :image );@output_buffer.safe_append='
    ';@output_buffer.append=( f.input :theme_tokens, :input_html => {data: {load: @photo.themes.map {|t| {id: t.id,name: t.name}}} );@output_buffer.safe_append='
  </div>

  
  <div class="form-actions">
    ';@output_buffer.append=( f.button :submit );@output_buffer.safe_append='
  </div>

'; end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `module_eval'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:299:in `compile'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:248:in `block in compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `synchronize'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:236:in `compile!'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:142:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/partial_renderer.rb:278:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:47:in `render_partial'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb__3664437060353997067_70357232512140'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:143:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:161:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/template.rb:141:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/template_renderer.rb:17:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_view/renderer/renderer.rb:23:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:127:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:120:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:97:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:40:in `render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:189:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:423:in `_run__3999391984522252141__process_action__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `block in instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/notifications.rb:159:in `instrument'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/base.rb:136:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/abstract_controller/rendering.rb:44:in `process'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:195:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_controller/metal.rb:231:in `block in action'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:48:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:71:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `each'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/journey/router.rb:59:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:655:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/flash.rb:241:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/cookies.rb:486:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/query_cache.rb:36:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activerecord-4.0.0/lib/active_record/migration.rb:369:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:373:in `_run__3633356661420034516__call__callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/callbacks.rb:80:in `run_callbacks'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/better_errors-0.9.0/lib/better_errors/middleware.rb:56:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:38:in `call_app'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `block in call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:25:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/tagged_logging.rb:67:in `tagged'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/rack/logger.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/activesupport-4.0.0/lib/active_support/cache/strategy/local_cache.rb:83:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/actionpack-4.0.0/lib/action_dispatch/middleware/static.rb:64:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/engine.rb:511:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/railties-4.0.0/lib/rails/application.rb:97:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
/Users/vith/.rvm/gems/ruby-2.0.0-p247@photohome/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered photos/_form.html.erb (6.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (7.4ms)
Completed 500 Internal Server Error in 11ms

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:7: syntax error, unexpected ')', expecting '}'
...|t| {id: t.id,name: t.name}}} );@output_buffer.safe_append='
...                               ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:15: syntax error, unexpected keyword_end, expecting ')'
'; end 
      ^
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:17: syntax error, unexpected keyword_ensure, expecting ')'
/Users/vith/Desktop/projects/rails/photohome/app/views/photos/_form.html.erb:19: syntax error, unexpected keyword_end, expecting ')':
  app/views/photos/_form.html.erb:7:in `'
  actionpack (4.0.0) lib/action_view/template.rb:299:in `compile'
  actionpack (4.0.0) lib/action_view/template.rb:248:in `block in compile!'
  actionpack (4.0.0) lib/action_view/template.rb:236:in `compile!'
  actionpack (4.0.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/edit.html.erb:3:in `_app_views_photos_edit_html_erb__3664437060353997067_70357232512140'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3999391984522252141__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3633356661420034516__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70357239846480/variables" for 127.0.0.1 at 2013-08-22 10:20:30 +0600
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:21:11 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (17.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (19.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 45ms (Views: 39.4ms | ActiveRecord: 2.9ms)


Started GET "/photo_ajax/theme_tokens?q=new" for 127.0.0.1 at 2013-08-22 10:21:22 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"new"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.9ms)


Started GET "/photo_ajax/theme_tokens?q=n" for 127.0.0.1 at 2013-08-22 10:21:33 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"n"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,8,11,12)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:22:43 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"2"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (2.0ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 04:22:43 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = '2')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (2, 1)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (2, 1)
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 2]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 4 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 04:22:43 UTC +00:00], ["tag_id", 4], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 216ms (ActiveRecord: 11.1ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:22:43 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 25.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:22:46 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:22:48 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 30.4ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:22:52 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (45.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (46.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 70ms (Views: 65.9ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:22:55 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 29.5ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:22:57 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 66ms (Views: 62.9ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:22:59 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 89ms (Views: 84.5ms | ActiveRecord: 2.3ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 10:23:11 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"1", "theme_tokens"=>"5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 11[0m  [["updated_at", Thu, 22 Aug 2013 04:23:11 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = '5' LIMIT 1[0m
  [1m[35mSQL (19.4ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "5"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (5, 1)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (6, 5)[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 5]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 6]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 6 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 11 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 04:23:11 UTC +00:00], ["tag_id", 6], ["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 52ms (ActiveRecord: 26.7ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 10:23:11 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 61ms (Views: 57.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:23:15 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:23:18 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 33ms (Views: 29.8ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:23:27 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (33.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 73ms (Views: 69.2ms | ActiveRecord: 2.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:23:32 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:23:34 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 33ms (Views: 29.9ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:23:50 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (2.2ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (3.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (200.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (205.2ms)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 623ms (Views: 555.7ms | ActiveRecord: 23.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:23:55 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (51.2ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 78ms (Views: 75.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:23:56 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 37ms (Views: 32.6ms | ActiveRecord: 2.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:24:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 32ms (Views: 28.4ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:24:08 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (8.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.3ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 32ms (Views: 30.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:24:21 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.8ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 28.6ms | ActiveRecord: 2.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:24:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:24:36 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (58.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (59.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 81ms (Views: 79.2ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:25:15 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (12.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 37.7ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:25:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (50.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 80ms (Views: 77.8ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 10:26:02 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 24.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:26:03 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:26:05 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 32ms (Views: 28.5ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:31:13 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (118.7ms)
  [1m[35m (4.2ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 612ms (Views: 564.5ms | ActiveRecord: 16.3ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:31:15 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (87.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (89.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 115ms (Views: 105.9ms | ActiveRecord: 7.1ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:31:18 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.4ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 43ms (Views: 38.9ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:31:23 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.1ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 31ms (Views: 28.8ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:31:25 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (13.6ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 38.6ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 10:31:27 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (53.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (54.6ms)
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 78ms (Views: 73.7ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 10:32:41 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 43ms (Views: 38.9ms | ActiveRecord: 2.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:32:44 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 88ms (Views: 85.5ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 10:32:47 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 39ms (Views: 35.5ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:32:50 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:32:51 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 27.7ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:32:53 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 37ms (Views: 35.1ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:32:54 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (7.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 37ms (Views: 33.2ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:32:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 91ms (Views: 88.7ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:33:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 42ms (Views: 37.5ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:33:02 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 37.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:33:03 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (9.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 31ms (Views: 29.1ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:33:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 28.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 10:33:10 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (7.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 31ms (Views: 28.3ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:33:14 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 76ms (Views: 73.1ms | ActiveRecord: 1.7ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:33:17 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>""}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (2.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 04:33:17 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (1.0ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (4)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (8)[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 8]]
  [1m[36m (18.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 73ms (ActiveRecord: 27.3ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:33:17 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 31ms (Views: 28.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:33:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.8ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 42ms (Views: 39.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:33:22 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 38ms (Views: 34.8ms | ActiveRecord: 1.8ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 10:33:25 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.7ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.2ms)


Started GET "/photo_ajax/theme_tokens?q=po" for 127.0.0.1 at 2013-08-22 10:33:27 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"po"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=p" for 127.0.0.1 at 2013-08-22 10:33:29 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"p"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=por" for 127.0.0.1 at 2013-08-22 10:33:33 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"por"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=port" for 127.0.0.1 at 2013-08-22 10:33:34 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"port"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=portr" for 127.0.0.1 at 2013-08-22 10:33:35 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portr"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=portra" for 127.0.0.1 at 2013-08-22 10:33:36 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portra"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=portrait" for 127.0.0.1 at 2013-08-22 10:33:37 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portrait"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:33:43 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"5,6"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 04:33:43 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = '5' OR lower(name) = '6')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = '6' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "6"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 6 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 04:33:43 UTC +00:00], ["tag_id", 6], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 7 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 04:33:43 UTC +00:00], ["tag_id", 7], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 167ms (ActiveRecord: 8.6ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 10:33:43 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 23.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:33:45 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 10:33:48 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 1.6ms)
  [1m[36mPhoto Load (1.2ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT "tags".id FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" WHERE "tags"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" IN (SELECT "taggings"."id" FROM "taggings" INNER JOIN "tags" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tag_id" IN (7, 6) AND (taggings.context = ('themes')))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 1 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mPhoto Load (1.0ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE "tags"."id" IN (1, 2)[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" IN (SELECT "taggings"."id" FROM "taggings" INNER JOIN "tags" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tag_id" IN (7, 6) AND (taggings.context = ('themes')))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 1 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:40:37 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (61.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (62.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 114ms (Views: 90.1ms | ActiveRecord: 11.0ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:40:39 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"e2e2", "theme_tokens"=>""}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered text template (0.0ms)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "photos" ("created_at", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Thu, 22 Aug 2013 04:40:39 UTC +00:00], ["title", "e2e2"], ["updated_at", Thu, 22 Aug 2013 04:40:39 UTC +00:00], ["user_id", 4]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 13], ["taggable_type", "Photo"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to 
Completed 500 Internal Server Error in 111ms

AbstractController::DoubleRenderError - Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".:
  actionpack (4.0.0) lib/action_controller/metal/redirecting.rb:67:in `redirect_to'
  actionpack (4.0.0) lib/action_controller/metal/flash.rb:40:in `redirect_to'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:61:in `block in redirect_to'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:60:in `redirect_to'
  app/controllers/photos_controller.rb:37:in `block (2 levels) in create'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:191:in `respond_to'
  app/controllers/photos_controller.rb:35:in `create'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__1802239295947931618__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2437215952478622858__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70165595020600/variables" for 127.0.0.1 at 2013-08-22 10:40:40 +0600


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 10:41:02 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[35m (0.3ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8,13)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 3.5ms)


Started GET "/photo_ajax/theme_tokens?q=look" for 127.0.0.1 at 2013-08-22 10:41:05 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"look"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8,13)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:41:11 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"e2e2", "theme_tokens"=>"5"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered text template (0.0ms)
Completed 200 OK in 141ms (Views: 0.6ms | ActiveRecord: 3.9ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:43:49 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"e2e2", "theme_tokens"=>"5"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.8ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:43:53 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (15.2ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (16.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 56ms (Views: 49.8ms | ActiveRecord: 4.8ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 10:43:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8,13)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 10:43:56 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8,13)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:00 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"eee", "theme_tokens"=>"5"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (26.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered text template (0.0ms)
Completed 200 OK in 33ms (Views: 0.7ms | ActiveRecord: 26.9ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 10:44:09 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (26.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (28.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 73ms (Views: 70.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:11 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 31.0ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 10:44:12 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 28.9ms | ActiveRecord: 4.0ms)


Started GET "/photo_ajax/theme_tokens?q=dwdw" for 127.0.0.1 at 2013-08-22 10:44:15 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"dwdw"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(9,12,11,8,13)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.6ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 10:44:17 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013-2", "theme_tokens"=>"5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 04:44:17 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 6 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 04:44:17 UTC +00:00], ["tag_id", 6], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 24ms (ActiveRecord: 5.1ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 10:44:17 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (55.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 115ms (Views: 112.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.8ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 31ms (Views: 28.7ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:26 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 39.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:29 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:34 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.5ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:44:36 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (60.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (62.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 86ms (Views: 83.0ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:44:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:45:50 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (116.0ms)
  [1m[35m (4.2ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (6.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 599ms (Views: 544.8ms | ActiveRecord: 16.0ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:45:53 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (91.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (93.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 125ms (Views: 116.0ms | ActiveRecord: 7.5ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:46:41 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.9ms)
Completed 500 Internal Server Error in 220ms

ExecJS::RuntimeError - SyntaxError: unexpected ->
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb___1112086797071514802_70143571296720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3191472520863119807__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2943051348036486989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70143572777080/variables" for 127.0.0.1 at 2013-08-22 10:46:41 +0600


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:47:07 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (1.0ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.1ms)
Completed 500 Internal Server Error in 210ms

ExecJS::RuntimeError - SyntaxError: unexpected ->
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb___1112086797071514802_70143571296720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3191472520863119807__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2943051348036486989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70143572942380/variables" for 127.0.0.1 at 2013-08-22 10:47:07 +0600


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 10:48:21 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.5ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 262ms (Views: 256.2ms | ActiveRecord: 3.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 10:48:24 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 38ms (Views: 35.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:48:26 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (44.9ms)
Completed 200 OK in 82ms (Views: 77.8ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:48:30 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 45ms (Views: 40.7ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:49:44 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (3.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 332ms (Views: 323.6ms | ActiveRecord: 5.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:57:45 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (64.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (66.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 92ms (Views: 86.2ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 10:59:12 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 37ms (Views: 32.9ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:00:07 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 38ms (Views: 33.1ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:00:43 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 41ms (Views: 37.0ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:01:17 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (43.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 118ms (Views: 113.8ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:01:36 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 113ms (Views: 109.9ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:02:02 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 114ms (Views: 110.5ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:02:26 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.2ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 255ms (Views: 250.4ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:02:57 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 38ms (Views: 35.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:03:15 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (15.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 124ms (Views: 119.9ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:03:48 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 118ms (Views: 114.7ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:03:52 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 32ms (Views: 30.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:03:53 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 34ms (Views: 30.3ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:08:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 114ms (Views: 110.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:08:27 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 52ms (Views: 48.8ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:08:40 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 116ms (Views: 112.2ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:11:25 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.9ms)
Completed 500 Internal Server Error in 159ms

ExecJS::RuntimeError - SyntaxError: reserved word "function"
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb___1112086797071514802_70143571296720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3191472520863119807__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2943051348036486989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70143563538880/variables" for 127.0.0.1 at 2013-08-22 11:11:26 +0600


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:12:25 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.4ms)
Completed 500 Internal Server Error in 167ms

ExecJS::RuntimeError - SyntaxError: reserved word "function"
  (in /Users/vith/Desktop/projects/rails/photohome/app/assets/javascripts/photos.js.coffee):
  execjs (1.4.0) lib/execjs/external_runtime.rb:66:in `extract_result'
  execjs (1.4.0) lib/execjs/external_runtime.rb:28:in `block in exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
  execjs (1.4.0) lib/execjs/external_runtime.rb:27:in `exec'
  execjs (1.4.0) lib/execjs/external_runtime.rb:19:in `eval'
  execjs (1.4.0) lib/execjs/external_runtime.rb:33:in `call'
  coffee-script (2.2.0) lib/coffee_script.rb:57:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  sprockets (2.10.0) lib/sprockets/context.rb:197:in `block in evaluate'
  sprockets (2.10.0) lib/sprockets/context.rb:194:in `evaluate'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:12:in `initialize'
  sprockets (2.10.0) lib/sprockets/base.rb:374:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:395:in `circular_call_protection'
  sprockets (2.10.0) lib/sprockets/base.rb:373:in `build_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:94:in `block in build_asset'
  sprockets (2.10.0) lib/sprockets/caching.rb:58:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:44:in `block in init_with'
  sprockets (2.10.0) lib/sprockets/processed_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/bundled_asset.rb:37:in `init_with'
  sprockets (2.10.0) lib/sprockets/asset.rb:24:in `from_hash'
  sprockets (2.10.0) lib/sprockets/caching.rb:54:in `cache_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:93:in `build_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:287:in `find_asset'
  sprockets (2.10.0) lib/sprockets/index.rb:61:in `find_asset'
  sprockets (2.10.0) lib/sprockets/environment.rb:75:in `find_asset'
  sprockets (2.10.0) lib/sprockets/base.rb:295:in `[]'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:141:in `lookup_asset_for_path'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:90:in `block in javascript_include_tag'
  sprockets-rails (2.0.0) lib/sprockets/rails/helper.rb:89:in `javascript_include_tag'
  app/views/layouts/user_profile_layout.html.erb:24:in `_app_views_layouts_user_profile_layout_html_erb___1112086797071514802_70143571296720'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__3191472520863119807__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2943051348036486989__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70143562662280/variables" for 127.0.0.1 at 2013-08-22 11:12:25 +0600


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:12:43 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 301ms (Views: 295.3ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:12:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 36ms (Views: 33.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/12/edit" for 127.0.0.1 at 2013-08-22 11:13:00 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "12"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 12], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 29.8ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:01 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 32ms (Views: 29.5ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:03 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (15.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 44ms (Views: 41.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:26 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (143.7ms)
  [1m[35m (4.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 570ms (Views: 522.6ms | ActiveRecord: 17.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:36 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (16.4ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 84ms (Views: 81.4ms | ActiveRecord: 2.1ms)


Started DELETE "/ru/users/4/photos/12" for 127.0.0.1 at 2013-08-22 11:13:46 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "locale"=>"ru", "user_id"=>"4", "id"=>"12"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "12"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tagging Load (1.0ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 12], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 7]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.9ms)[0m  SELECT "taggings".* FROM "taggings" INNER JOIN "tags" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 12], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos
Completed 302 Found in 47ms (ActiveRecord: 10.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:46 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 34ms (Views: 32.0ms | ActiveRecord: 1.7ms)


Started DELETE "/ru/users/4/photos/13" for 127.0.0.1 at 2013-08-22 11:13:50 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "locale"=>"ru", "user_id"=>"4", "id"=>"13"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "13"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tagging Load (0.4ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2[0m  [["taggable_id", 13], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.5ms)[0m  SELECT "taggings".* FROM "taggings" INNER JOIN "tags" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 13], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos
Completed 302 Found in 9ms (ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:13:50 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:13:58 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (44.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (45.5ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 68ms (Views: 65.8ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:14:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.5ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 32ms (Views: 29.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:14:05 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 42ms (Views: 38.5ms | ActiveRecord: 2.7ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:14:13 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 45ms (Views: 40.9ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:15:40 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (111.0ms)
  [1m[35m (4.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 606ms (Views: 557.4ms | ActiveRecord: 17.3ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 11:15:43 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (92.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (94.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 122ms (Views: 113.2ms | ActiveRecord: 7.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:15:47 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.6ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:15:48 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (44.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (46.2ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 69ms (Views: 66.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:17:05 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (10.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (13.1ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 306ms (Views: 303.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:17:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 27.8ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:17:09 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (7.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (8.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 31ms (Views: 29.5ms | ActiveRecord: 1.0ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 11:17:12 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.8ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 11:17:13 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=po" for 127.0.0.1 at 2013-08-22 11:21:19 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"po"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=6" for 127.0.0.1 at 2013-08-22 11:21:23 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"6"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:21:32 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"1", "theme_tokens"=>"6,7"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered text template (0.0ms)
Completed 200 OK in 61ms (Views: 1.5ms | ActiveRecord: 0.7ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:21:39 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (2.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (20.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (22.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (4.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 67ms (Views: 62.2ms | ActiveRecord: 3.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:21:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 38ms (Views: 35.6ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:21:45 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 39ms (Views: 34.0ms | ActiveRecord: 3.1ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 11:21:49 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"6"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (5.9ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (25.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (6.9ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 05:21:49 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = '6')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (6)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.5ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (10)
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 10]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 247ms (ActiveRecord: 45.3ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 11:21:49 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.3ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:21:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 33ms (Views: 31.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:21:54 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 34ms (Views: 30.1ms | ActiveRecord: 2.5ms)


Started GET "/photo_ajax/theme_tokens?q=he" for 127.0.0.1 at 2013-08-22 11:22:28 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"he"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=hello" for 127.0.0.1 at 2013-08-22 11:22:29 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"hello"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:26:33 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (56.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (58.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (48.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 166ms (Views: 124.4ms | ActiveRecord: 15.4ms)


Started GET "/photo_ajax/theme_tokens?q=l" for 127.0.0.1 at 2013-08-22 11:26:37 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/photo_ajax_controller.rb:22: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/photo_ajax_controller.rb:22:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__926275379354570843__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=loo" for 127.0.0.1 at 2013-08-22 11:26:37 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/photo_ajax_controller.rb:22: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/photo_ajax_controller.rb:22:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__926275379354570843__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=loom" for 127.0.0.1 at 2013-08-22 11:26:39 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/photo_ajax_controller.rb:22: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/photo_ajax_controller.rb:22:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__926275379354570843__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=loom" for 127.0.0.1 at 2013-08-22 11:26:41 +0600

SyntaxError - /Users/vith/Desktop/projects/rails/photohome/app/controllers/photo_ajax_controller.rb:22: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/photo_ajax_controller.rb:22:in `'
  activesupport (4.0.0) lib/active_support/dependencies.rb:423:in `block in load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:615:in `new_constants_in'
  activesupport (4.0.0) lib/active_support/dependencies.rb:422:in `load_file'
  activesupport (4.0.0) lib/active_support/dependencies.rb:323:in `require_or_load'
  activesupport (4.0.0) lib/active_support/dependencies.rb:462:in `load_missing_constant'
  activesupport (4.0.0) lib/active_support/dependencies.rb:183:in `const_missing'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.0) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.0) lib/active_support/dependencies.rb:534:in `get'
  activesupport (4.0.0) lib/active_support/dependencies.rb:565:in `constantize'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__926275379354570843__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=o" for 127.0.0.1 at 2013-08-22 11:27:04 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"o"}
  [1m[35m (0.3ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.5ms)


Started GET "/photo_ajax/theme_tokens?q=odd" for 127.0.0.1 at 2013-08-22 11:27:06 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"odd"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=od" for 127.0.0.1 at 2013-08-22 11:27:08 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"od"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens" for 127.0.0.1 at 2013-08-22 11:27:48 +0600
Processing by PhotoAjaxController#theme_tokens as HTML
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 406 Not Acceptable in 19ms

ActionController::UnknownFormat - ActionController::UnknownFormat:
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:372:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__3732802297314057191__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__926275379354570843__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70264727461320/variables" for 127.0.0.1 at 2013-08-22 11:27:48 +0600


Started GET "/photo_ajax/theme_tokens.js" for 127.0.0.1 at 2013-08-22 11:27:56 +0600
Processing by PhotoAjaxController#theme_tokens as JS
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens.js?q=hello" for 127.0.0.1 at 2013-08-22 11:28:05 +0600
Processing by PhotoAjaxController#theme_tokens as JS
  Parameters: {"q"=>"hello"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" ASC LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 05:31:11 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'portrait' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (7)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (11)
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 11]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 1 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 05:31:12 UTC +00:00], ["tag_id", 1], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 5 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 05:31:12 UTC +00:00], ["tag_id", 5], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.7ms)[0m  COMMIT


Started GET "/" for 127.0.0.1 at 2013-08-22 11:32:26 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.7ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 51ms (Views: 50.0ms | ActiveRecord: 0.0ms)
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name like %)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ..." = $2 AND (taggings.context = ('themes')) AND (name like %)
                                                                     ^
: SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name like %)
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name like %)  [["taggable_id", 8], ["taggable_type", "Photo"]]
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ..." = $2 AND (taggings.context = ('themes')) AND (name like %)
                                                                     ^
: SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name like %)
  [1m[36mActsAsTaggableOn::Tag Load (1.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "tags"."name" = 'demo' AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name=demo)  [["taggable_id", 8], ["taggable_type", "Photo"]]
PG::UndefinedColumn: ERROR:  column "demo" does not exist
LINE 1: ...pe" = $2 AND (taggings.context = ('themes')) AND (name=demo)
                                                                  ^
: SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name=demo)
  [1m[36mActsAsTaggableOn::Tag Load (1.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name=%)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
PG::UndefinedFunction: ERROR:  operator does not exist: character varying =%
LINE 1: ..._type" = $2 AND (taggings.context = ('themes')) AND (name=%)
                                                                    ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name=%)
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name = %)  [["taggable_id", 8], ["taggable_type", "Photo"]]
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...ype" = $2 AND (taggings.context = ('themes')) AND (name = %)
                                                                     ^
: SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes')) AND (name = %)
  [1m[36m (0.8ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id
  [1m[36m (0.7ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...AS taggings ON taggings.tag_id = tags.id WHERE (name like %)
                                                                     ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %)
  [1m[36m (0.9ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (tags.name=%)
PG::UndefinedFunction: ERROR:  operator does not exist: character varying =%
LINE 1: ...AS taggings ON taggings.tag_id = tags.id WHERE (tags.name=%)
                                                                    ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (tags.name=%)
  [1m[36m (0.8ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (42.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')
  [1m[36m (0.9ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (tags.name LIKE 'port')
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.9ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'dem')
  [1m[36m (0.9ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.taggable_id = 8 AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')
  [1m[36m (0.8ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:53:13 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (53.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (54.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 163ms (Views: 77.7ms | ActiveRecord: 15.2ms)


Started GET "/photo_ajax/theme_tokens?q=m" for 127.0.0.1 at 2013-08-22 11:53:17 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"m"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=moo" for 127.0.0.1 at 2013-08-22 11:53:18 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"moo"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=a" for 127.0.0.1 at 2013-08-22 11:53:29 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"a"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=aoo" for 127.0.0.1 at 2013-08-22 11:53:30 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"aoo"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:54:08 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (56.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (57.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 173ms (Views: 83.9ms | ActiveRecord: 13.5ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 11:54:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'd')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=doo" for 127.0.0.1 at 2013-08-22 11:54:15 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"doo"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'doo')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=dook" for 127.0.0.1 at 2013-08-22 11:54:15 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"dook"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.5ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'dook')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 11:54:21 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"demo,portrait,<<<dook>>>"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (3.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8[0m  [["updated_at", Thu, 22 Aug 2013 05:54:21 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (4.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'demo' OR lower(name) = 'portrait' OR lower(name) = '<<<dook>>>')
  [1m[36mActsAsTaggableOn::Tag Exists (18.1ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = '<<<dook>>>' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "<<<dook>>>"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (1.0ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 8 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 05:54:21 UTC +00:00], ["tag_id", 8], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 88ms (ActiveRecord: 33.9ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 11:54:21 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 22.9ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:54:27 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 11:54:28 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 29.5ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:54:47 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 26.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:54:48 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (9.5ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (10.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 46ms (Views: 43.4ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=po" for 127.0.0.1 at 2013-08-22 11:54:54 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"po"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'po')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=por" for 127.0.0.1 at 2013-08-22 11:54:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"por"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'por')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=port" for 127.0.0.1 at 2013-08-22 11:54:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"port"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'port')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=portr" for 127.0.0.1 at 2013-08-22 11:54:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portr"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'portr')
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=portra" for 127.0.0.1 at 2013-08-22 11:54:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portra"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'portra')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=portrait" for 127.0.0.1 at 2013-08-22 11:54:58 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"portrait"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'portrait')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=m" for 127.0.0.1 at 2013-08-22 11:55:02 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"m"}
  [1m[36m (0.3ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'm')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=moon" for 127.0.0.1 at 2013-08-22 11:55:02 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"moon"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'moon')
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:55:05 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"moo", "theme_tokens"=>"1,<<<moon>>>"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[36mUser Load (3.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered text template (0.0ms)
Completed 200 OK in 29ms (Views: 0.8ms | ActiveRecord: 3.8ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 11:55:36 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (2.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/_form.html.erb (17.6ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (19.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 58ms (Views: 53.6ms | ActiveRecord: 3.0ms)


Started GET "/photo_ajax/theme_tokens?q=n" for 127.0.0.1 at 2013-08-22 11:56:44 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"n"}
  [1m[35m (0.3ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'n')[0m
Completed 200 OK in 65ms (Views: 0.2ms | ActiveRecord: 3.9ms)


Started GET "/photo_ajax/theme_tokens?q=nk" for 127.0.0.1 at 2013-08-22 11:56:46 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"nk"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'nk')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=he" for 127.0.0.1 at 2013-08-22 11:56:50 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"he"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'he')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=hello" for 127.0.0.1 at 2013-08-22 11:56:51 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"hello"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'hello')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 11:56:54 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"noon", "theme_tokens"=>"<<<nk>>>,<<<hello>>>"}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  Rendered text template (0.0ms)
Completed 200 OK in 91ms (Views: 0.6ms | ActiveRecord: 5.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:06:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (4.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 119ms (Views: 93.4ms | ActiveRecord: 12.8ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 12:06:10 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (15.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 85ms (Views: 78.5ms | ActiveRecord: 4.8ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 12:06:13 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'd')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 12:06:13 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'de')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=demo" for 127.0.0.1 at 2013-08-22 12:06:15 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"demo"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'demo')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:06:18 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013-2", "theme_tokens"=>"5,5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (10.7ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 06:06:18 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (4.0ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Load (10.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 64ms (ActiveRecord: 31.8ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:06:18 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.3ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 12:06:21 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (8.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (9.8ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 36ms (Views: 31.8ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 12:07:56 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (1.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (35.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (243.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (248.0ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 700ms (Views: 599.0ms | ActiveRecord: 53.9ms)


Started GET "/photo_ajax/theme_tokens?q=dee" for 127.0.0.1 at 2013-08-22 12:08:00 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"dee"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'dee')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=deem" for 127.0.0.1 at 2013-08-22 12:08:01 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"deem"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'deem')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:08:03 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013-2", "theme_tokens"=>"5,<<<deem>>>"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (2.9ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 06:08:23 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5' OR lower(name) = '<<<deem>>>')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = '<<<deem>>>' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "<<<deem>>>"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (1.0ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 9 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 06:08:23 UTC +00:00], ["tag_id", 9], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5' OR lower(name) = '<<<deem>>>')
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 19948ms (ActiveRecord: 13.5ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:08:23 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 25.3ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:09:14 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (1.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (92.1ms)
  [1m[35m (4.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.6ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 531ms (Views: 469.4ms | ActiveRecord: 16.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:09:17 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (67.8ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 93ms (Views: 90.8ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 12:09:19 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (92.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (94.7ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 121ms (Views: 111.5ms | ActiveRecord: 7.4ms)


Started GET "/photo_ajax/theme_tokens?q=n" for 127.0.0.1 at 2013-08-22 12:09:23 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"n"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'n')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=noon" for 127.0.0.1 at 2013-08-22 12:09:24 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"noon"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'noon')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:09:26 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013-2", "theme_tokens"=>"5,noon"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (9.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (7.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
Completed 401 Unauthorized in 13803ms


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:10:00 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013-2", "theme_tokens"=>"5,noon"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (1.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (3.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (2.3ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 06:10:00 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5' OR lower(name) = 'noon')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'noon' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "noon"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.9ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (9)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (16)[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 16]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 10 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 06:10:00 UTC +00:00], ["tag_id", 10], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = '5' OR lower(name) = 'noon')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 377ms (ActiveRecord: 28.0ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 12:10:00 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (5.8ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.7ms)
  Rendered layouts/_user_sidebar.html.erb (1.8ms)
Completed 200 OK in 393ms (Views: 384.1ms | ActiveRecord: 6.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:10:03 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 90ms (Views: 87.6ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 12:10:05 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (84.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (85.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 109ms (Views: 104.4ms | ActiveRecord: 3.0ms)


Started GET "/photo_ajax/theme_tokens?q=tr" for 127.0.0.1 at 2013-08-22 12:10:10 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tr"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'tr')
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started GET "/photo_ajax/theme_tokens?q=tra" for 127.0.0.1 at 2013-08-22 12:10:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tra"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'tra')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=trav" for 127.0.0.1 at 2013-08-22 12:10:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"trav"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'trav')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=travel" for 127.0.0.1 at 2013-08-22 12:10:12 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"travel"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,8,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'travel')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:10:15 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"demo,portrait,travel"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (1.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (2.6ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 06:10:15 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (20.3ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'demo' OR lower(name) = 'portrait' OR lower(name) = 'travel')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (4.9ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'travel' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "travel"]]
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (8)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (15)
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 15]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 11 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 06:10:15 UTC +00:00], ["tag_id", 11], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'demo' OR lower(name) = 'portrait' OR lower(name) = 'travel')
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 82ms (ActiveRecord: 38.7ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:10:15 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.6ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 23.4ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:10:17 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 12:10:19 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (9.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (10.1ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 32ms (Views: 28.6ms | ActiveRecord: 2.6ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:10:24 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"travel,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (4.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8[0m  [["updated_at", Thu, 22 Aug 2013 06:10:24 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (30.1ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo')
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (1.2ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (1)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (13)[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 13]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 72ms (ActiveRecord: 42.5ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:10:24 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 27ms (Views: 23.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:10:25 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.5ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 12:10:27 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (10.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (11.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 34ms (Views: 30.5ms | ActiveRecord: 2.0ms)


Started GET "/photo_ajax/theme_tokens?q=tr" for 127.0.0.1 at 2013-08-22 12:10:40 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tr"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'tr')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=tra" for 127.0.0.1 at 2013-08-22 12:10:41 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tra"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'tra')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=t" for 127.0.0.1 at 2013-08-22 12:10:44 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"t"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 't')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 12:10:45 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'de')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=dem" for 127.0.0.1 at 2013-08-22 12:10:46 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"dem"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'dem')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=demo" for 127.0.0.1 at 2013-08-22 12:10:47 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"demo"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'demo')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 12:10:48 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like 'd')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 12:11:24 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (62.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (64.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (50.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 173ms (Views: 134.2ms | ActiveRecord: 13.8ms)


Started GET "/photo_ajax/theme_tokens?q=t" for 127.0.0.1 at 2013-08-22 12:11:27 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"t"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'t'%)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...aggings ON taggings.tag_id = tags.id WHERE (name like %'t'%)
                                                                 ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'t'%)
Completed 500 Internal Server Error in 4ms

PG::SyntaxError - ERROR:  syntax error at or near "%"
LINE 1: ...aggings ON taggings.tag_id = tags.id WHERE (name like %'t'%)
                                                                 ^
:
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:885:in `select'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `block in select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:76:in `cache_sql'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `select_all'
  activerecord (4.0.0) lib/active_record/querying.rb:36:in `find_by_sql'
  activerecord (4.0.0) lib/active_record/relation.rb:585:in `exec_queries'
  activerecord (4.0.0) lib/active_record/relation.rb:471:in `load'
  activerecord (4.0.0) lib/active_record/relation.rb:220:in `to_a'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:12:in `map'
  app/controllers/photo_ajax_controller.rb:11:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1554374865445163145__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__106597732694629024__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=tr" for 127.0.0.1 at 2013-08-22 12:11:28 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tr"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'tr'%)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...ggings ON taggings.tag_id = tags.id WHERE (name like %'tr'%)
                                                                ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'tr'%)
Completed 500 Internal Server Error in 3ms

PG::SyntaxError - ERROR:  syntax error at or near "%"
LINE 1: ...ggings ON taggings.tag_id = tags.id WHERE (name like %'tr'%)
                                                                ^
:
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:885:in `select'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `block in select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:76:in `cache_sql'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `select_all'
  activerecord (4.0.0) lib/active_record/querying.rb:36:in `find_by_sql'
  activerecord (4.0.0) lib/active_record/relation.rb:585:in `exec_queries'
  activerecord (4.0.0) lib/active_record/relation.rb:471:in `load'
  activerecord (4.0.0) lib/active_record/relation.rb:220:in `to_a'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:12:in `map'
  app/controllers/photo_ajax_controller.rb:11:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1554374865445163145__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__106597732694629024__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=tra" for 127.0.0.1 at 2013-08-22 12:11:30 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tra"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'tra'%)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...gings ON taggings.tag_id = tags.id WHERE (name like %'tra'%)
                                                               ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'tra'%)
Completed 500 Internal Server Error in 4ms

PG::SyntaxError - ERROR:  syntax error at or near "%"
LINE 1: ...gings ON taggings.tag_id = tags.id WHERE (name like %'tra'%)
                                                               ^
:
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:885:in `select'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `block in select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:76:in `cache_sql'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `select_all'
  activerecord (4.0.0) lib/active_record/querying.rb:36:in `find_by_sql'
  activerecord (4.0.0) lib/active_record/relation.rb:585:in `exec_queries'
  activerecord (4.0.0) lib/active_record/relation.rb:471:in `load'
  activerecord (4.0.0) lib/active_record/relation.rb:220:in `to_a'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:12:in `map'
  app/controllers/photo_ajax_controller.rb:11:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1554374865445163145__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__106597732694629024__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=trav" for 127.0.0.1 at 2013-08-22 12:11:31 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"trav"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...ings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
                                                              ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
Completed 500 Internal Server Error in 4ms

PG::SyntaxError - ERROR:  syntax error at or near "%"
LINE 1: ...ings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
                                                              ^
:
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:885:in `select'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `block in select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:76:in `cache_sql'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `select_all'
  activerecord (4.0.0) lib/active_record/querying.rb:36:in `find_by_sql'
  activerecord (4.0.0) lib/active_record/relation.rb:585:in `exec_queries'
  activerecord (4.0.0) lib/active_record/relation.rb:471:in `load'
  activerecord (4.0.0) lib/active_record/relation.rb:220:in `to_a'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:12:in `map'
  app/controllers/photo_ajax_controller.rb:11:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1554374865445163145__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__106597732694629024__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=trav" for 127.0.0.1 at 2013-08-22 12:11:32 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"trav"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
PG::SyntaxError: ERROR:  syntax error at or near "%"
LINE 1: ...ings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
                                                              ^
: SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
Completed 500 Internal Server Error in 5ms

PG::SyntaxError - ERROR:  syntax error at or near "%"
LINE 1: ...ings ON taggings.tag_id = tags.id WHERE (name like %'trav'%)
                                                              ^
:
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query'
  activerecord (4.0.0) lib/active_record/connection_adapters/postgresql_adapter.rb:885:in `select'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `block in select_all'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:76:in `cache_sql'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/query_cache.rb:61:in `select_all'
  activerecord (4.0.0) lib/active_record/querying.rb:36:in `find_by_sql'
  activerecord (4.0.0) lib/active_record/relation.rb:585:in `exec_queries'
  activerecord (4.0.0) lib/active_record/relation.rb:471:in `load'
  activerecord (4.0.0) lib/active_record/relation.rb:220:in `to_a'
  activerecord (4.0.0) lib/active_record/relation/delegation.rb:12:in `map'
  app/controllers/photo_ajax_controller.rb:11:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__1554374865445163145__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__106597732694629024__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=k" for 127.0.0.1 at 2013-08-22 12:12:09 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"k"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%k%')
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.5ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 12:12:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%d%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 12:12:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%de%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=tr" for 127.0.0.1 at 2013-08-22 12:12:14 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"tr"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%tr%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:23:06 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "photo"=>{"title"=>"Отпуск 2013", "theme_tokens"=>"travel,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (1.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 06:23:06 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 98ms (ActiveRecord: 12.8ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 12:23:06 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (7.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 44ms (Views: 36.4ms | ActiveRecord: 6.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:23:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 1.4ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:20 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (12.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 52ms (Views: 48.2ms | ActiveRecord: 1.1ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:21 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"LH9A9UX26vtTw3jWPO0RnE8OKWwQ2hKaYFcnrnpw4tg=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:21 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.5ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 29.1ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:25 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 30.9ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:29 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xFP/myxbkOncgVn/nQ/bXODPM8T18a9+TT2rJtBbXtY=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Thu, 22 Aug 2013 03:10:31 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 06:23:29 UTC +00:00], ["sign_in_count", 9], ["updated_at", Thu, 22 Aug 2013 06:23:29 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 115ms (ActiveRecord: 2.7ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 12:23:29 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 75ms (Views: 72.9ms | ActiveRecord: 1.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 12:23:31 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.7ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:23:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 12:29:35 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (1.1ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (1.0ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (18.9ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.1ms)
  Rendered users/index.html.erb within layouts/application (54.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (0.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 111ms (Views: 102.0ms | ActiveRecord: 5.6ms)


Started PUT "/ru/users/5" for 127.0.0.1 at 2013-08-22 12:29:39 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pdrH744duW7Op1OLJ+/o4kPvsz0IQ2exSNfVzXK/Vpg=", "user"=>{"role_ids"=>"2"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (3.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mRole Load (31.9ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mRole Load (3.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (1.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "users_roles" WHERE "users_roles"."user_id" = 5 AND "users_roles"."role_id" IN (4)
  [1m[36m (1.2ms)[0m  [1mINSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 2)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users
Completed 302 Found in 63ms (ActiveRecord: 47.4ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 12:29:39 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (7.4ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (4.7ms)
  Rendered users/index.html.erb within layouts/application (21.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (0.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 48ms (Views: 39.8ms | ActiveRecord: 4.7ms)


Started PUT "/ru/users/5" for 127.0.0.1 at 2013-08-22 12:29:43 +0600
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pdrH744duW7Op1OLJ+/o4kPvsz0IQ2exSNfVzXK/Vpg=", "user"=>{"role_ids"=>"4"}, "commit"=>"Change Role", "locale"=>"ru", "id"=>"5"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (28.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (10.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mRole Load (0.8ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  DELETE FROM "users_roles" WHERE "users_roles"."user_id" = 5 AND "users_roles"."role_id" IN (2)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 4)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users
Completed 302 Found in 62ms (ActiveRecord: 44.9ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 12:29:43 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (0.9ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.6ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.2ms)
  Rendered users/index.html.erb within layouts/application (21.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (0.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 36.1ms | ActiveRecord: 4.9ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 12:32:32 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.0ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 23.0ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:32:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 27.2ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:37:02 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 32ms (Views: 30.3ms | ActiveRecord: 1.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:38:24 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered photos/index.html.erb within layouts/user_profile_layout (0.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 31ms (Views: 29.0ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:41:52 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 89ms (Views: 85.7ms | ActiveRecord: 2.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:42:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 36ms (Views: 33.5ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:42:41 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 42ms (Views: 39.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:42:53 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 36ms (Views: 33.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:43:35 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (53.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 91ms (Views: 88.6ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:45:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 34ms (Views: 31.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:46:35 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 35ms (Views: 31.8ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:46:55 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 40ms (Views: 37.5ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:47:20 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (54.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 86ms (Views: 83.6ms | ActiveRecord: 1.5ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 12:48:12 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 24.5ms | ActiveRecord: 0.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:49:36 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:50:14 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 34ms (Views: 30.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:52:05 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 105ms (Views: 102.0ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:52:17 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (6.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 26.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:53:59 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 35ms (Views: 32.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:54:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 38ms (Views: 35.6ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:55:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  Rendered photos/index.html.erb within layouts/user_profile_layout (11.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 43ms (Views: 40.2ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:56:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (16.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 45ms (Views: 42.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:56:51 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 35ms (Views: 32.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:57:09 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 37.5ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:57:40 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (15.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 44ms (Views: 41.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:58:05 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (70.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 95ms (Views: 92.7ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:58:48 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (15.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 42ms (Views: 39.8ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:59:13 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (2.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (15.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 43ms (Views: 38.7ms | ActiveRecord: 2.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:59:40 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (13.5ms)
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 42ms (Views: 39.0ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 12:59:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 44ms (Views: 41.1ms | ActiveRecord: 1.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 13:58:57 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 17.6ms | ActiveRecord: 0.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 13:59:52 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 32ms (Views: 30.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-22 13:59:55 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36m (26.8ms)[0m  [1mSELECT COUNT(*) FROM "novelties"[0m
default_url_options is passed options: {}

  [1m[35mNovelty Load (0.5ms)[0m  SELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (60.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (0.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 139ms (Views: 49.6ms | ActiveRecord: 31.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:17:44 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (115.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 200ms (Views: 146.0ms | ActiveRecord: 10.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:18:07 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 41ms (Views: 37.8ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:18:11 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 84ms (Views: 81.9ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:18:39 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 45ms (Views: 42.8ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:18:55 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 40ms (Views: 37.3ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:19:04 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (113.4ms)
  [1m[35m (5.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (5.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (35.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 580ms (Views: 529.9ms | ActiveRecord: 17.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:20:08 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 39ms (Views: 35.9ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:20:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 39ms (Views: 36.2ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:20:22 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 33ms (Views: 30.7ms | ActiveRecord: 2.1ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:27 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"pdrH744duW7Op1OLJ+/o4kPvsz0IQ2exSNfVzXK/Vpg=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (7.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (2.8ms)[0m  [1mBEGIN[0m
  [1m[35m (1.9ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 26ms (ActiveRecord: 11.8ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:27 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.3ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (9.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 26.4ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:30 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.6ms)
  Rendered devise/sessions/new.html.erb within layouts/application (84.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 105ms (Views: 102.1ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:36 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/Q5YhLckO7Tz9dxtnmdK3fOCCpRjuR4PUcHGnfjbP5E=", "user"=>{"email"=>"vith77@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith77@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (2.1ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 5[0m  [["last_sign_in_at", Tue, 20 Aug 2013 05:47:02 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 08:20:36 UTC +00:00], ["sign_in_count", 4], ["updated_at", Thu, 22 Aug 2013 08:20:36 UTC +00:00]]
  [1m[35m (0.9ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 95ms (ActiveRecord: 4.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:36 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  Rendered layouts/_navigation.ru.html.erb (5.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 20.1ms | ActiveRecord: 1.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:43 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'moder') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (5.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 5]]
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 5]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 37.6ms | ActiveRecord: 2.6ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:48 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"59Oqfa1os7Ll8Gl1GZifWv2XJ75wliaDspJQ/Z/Qqo8=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 85ms (ActiveRecord: 1.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:48 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 22.7ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:49 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (0.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (7.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 25.6ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:54 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AYgsq/w6nshdqC0Taw+FOXKj/CzDt2HBn+yZPOl+xRc=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4[0m  [["last_sign_in_at", Thu, 22 Aug 2013 06:23:29 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 08:20:55 UTC +00:00], ["sign_in_count", 10], ["updated_at", Thu, 22 Aug 2013 08:20:55 UTC +00:00]]
  [1m[35m (0.5ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 150ms (ActiveRecord: 2.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:20:55 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (0.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 1.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 14:23:10 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered home/index.html.erb within layouts/application (0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 34.1ms | ActiveRecord: 1.2ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 14:23:13 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

  [1m[36mRole Load (1.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (1.3ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.6ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (30.4ms)
  [1m[36mRole Load (0.8ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.7ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (5.9ms)
  Rendered users/index.html.erb within layouts/application (98.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 130ms (Views: 120.7ms | ActiveRecord: 6.0ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 14:23:21 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.8ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (51.8ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.1ms)
  Rendered users/index.html.erb within layouts/application (66.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.8ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 97ms (Views: 88.5ms | ActiveRecord: 5.1ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTopics (20130822082556)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (226.2ms)[0m  [1mCREATE TABLE "topics" ("id" serial primary key, "name" character varying(255), "content" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (23.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130822082556"]]
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 14:27:20 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

  [1m[36mRole Load (1.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (80.9ms)
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (5.0ms)
  Rendered users/index.html.erb within layouts/application (114.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 841ms (Views: 696.4ms | ActiveRecord: 14.8ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:27:24 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (4.5ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 42ms (Views: 35.5ms | ActiveRecord: 3.9ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:27:29 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (62.6ms)
  Rendered topics/new.html.erb within layouts/application (64.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 93ms (Views: 89.2ms | ActiveRecord: 2.3ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:29:42 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (60.0ms)
Completed 500 Internal Server Error in 64ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 31 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231481082700/variables" for 127.0.0.1 at 2013-08-22 14:29:42 +0600
  [1m[35mTopic Load (0.2ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:30:19 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (15.6ms)
Completed 500 Internal Server Error in 20ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found a tab character that violate intendation while scanning a plain scalar at line 30 column 3>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231519201660/variables" for 127.0.0.1 at 2013-08-22 14:30:20 +0600
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:31:01 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (14.5ms)
Completed 500 Internal Server Error in 19ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231519283300/variables" for 127.0.0.1 at 2013-08-22 14:31:01 +0600
  [1m[35mTopic Load (0.2ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:31:22 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (14.5ms)
Completed 500 Internal Server Error in 19ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231519367860/variables" for 127.0.0.1 at 2013-08-22 14:31:23 +0600
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:31:24 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (58.3ms)
Completed 500 Internal Server Error in 62ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231481280080/variables" for 127.0.0.1 at 2013-08-22 14:31:24 +0600
  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:31:41 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (56.8ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 140ms (Views: 127.8ms | ActiveRecord: 9.7ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:32:00 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (62.2ms)
Completed 500 Internal Server Error in 66ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 30 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231478149400/variables" for 127.0.0.1 at 2013-08-22 14:32:00 +0600
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:32:16 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (52.0ms)
Completed 500 Internal Server Error in 56ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 30 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231502646100/variables" for 127.0.0.1 at 2013-08-22 14:32:17 +0600
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:32:51 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (52.2ms)
Completed 500 Internal Server Error in 58ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231476315060/variables" for 127.0.0.1 at 2013-08-22 14:32:51 +0600
  [1m[35mTopic Load (0.2ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:33:04 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (54.2ms)
Completed 500 Internal Server Error in 58ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231476689820/variables" for 127.0.0.1 at 2013-08-22 14:33:05 +0600
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:33:36 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (59.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 139ms (Views: 127.7ms | ActiveRecord: 9.4ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:33:57 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (79.7ms)
Completed 500 Internal Server Error in 84ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 23 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231477059860/variables" for 127.0.0.1 at 2013-08-22 14:33:57 +0600
  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:34:15 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.2ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (18.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (4.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 142ms (Views: 90.1ms | ActiveRecord: 10.3ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:35:54 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (14.8ms)
Completed 500 Internal Server Error in 19ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 31 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231502978000/variables" for 127.0.0.1 at 2013-08-22 14:35:55 +0600
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:38:48 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  Rendered topics/index.html.erb within layouts/application (17.6ms)
Completed 500 Internal Server Error in 22ms

I18n::InvalidLocaleData - can not load translations from /Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml: #<Psych::SyntaxError: (/Users/vith/Desktop/projects/rails/photohome/config/locales/ru.yml): found character that cannot start any token while scanning for the next token at line 30 column 1>:
  i18n (0.6.5) lib/i18n/backend/base.rb:181:in `rescue in load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:178:in `load_yml'
  i18n (0.6.5) lib/i18n/backend/base.rb:162:in `load_file'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `block in load_translations'
  i18n (0.6.5) lib/i18n/backend/base.rb:15:in `load_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:57:in `init_translations'
  i18n (0.6.5) lib/i18n/backend/simple.rb:71:in `lookup'
  i18n (0.6.5) lib/i18n/backend/base.rb:26:in `translate'
  i18n (0.6.5) lib/i18n.rb:156:in `block in translate'
  i18n (0.6.5) lib/i18n.rb:152:in `translate'
  actionpack (4.0.0) lib/action_view/helpers/translation_helper.rb:60:in `translate'
  app/views/topics/index.html.erb:1:in `_app_views_topics_index_html_erb__4259600461087965416_70231490989200'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__862759525632075916__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__3252922786183031362__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70231519151420/variables" for 127.0.0.1 at 2013-08-22 14:38:48 +0600
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:39:04 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.2ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (17.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 137ms (Views: 124.7ms | ActiveRecord: 9.9ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:41:46 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.9ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.7ms | ActiveRecord: 2.1ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:42:01 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (65.4ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 154ms (Views: 141.5ms | ActiveRecord: 10.0ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:42:14 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 35.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:43:07 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (59.4ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 140ms (Views: 128.4ms | ActiveRecord: 9.0ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:43:46 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (2.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 35ms (Views: 32.7ms | ActiveRecord: 1.7ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:43:48 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (63.3ms)
  Rendered topics/new.html.erb within layouts/application (64.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 93ms (Views: 90.1ms | ActiveRecord: 1.9ms)


Started POST "/ru/topics" for 127.0.0.1 at 2013-08-22 14:43:55 +0600
Processing by TopicsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "topic"=>{"name"=>"Портрет", "content"=>""}, "commit"=>"Создать Topic", "locale"=>"ru"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "topics" ("content", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["content", ""], ["created_at", Thu, 22 Aug 2013 08:43:55 UTC +00:00], ["name", "Портрет"], ["updated_at", Thu, 22 Aug 2013 08:43:55 UTC +00:00]]
  [1m[36m (3.9ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/topics/1
Completed 302 Found in 13ms (ActiveRecord: 5.7ms)


Started GET "/ru/topics/1" for 127.0.0.1 at 2013-08-22 14:43:55 +0600
Processing by TopicsController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.9ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/show.html.erb within layouts/application (2.3ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 29.5ms | ActiveRecord: 2.0ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:43:58 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.1ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.8ms | ActiveRecord: 1.6ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-22 14:44:21 +0600
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.4ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (38.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 71ms (Views: 55.7ms | ActiveRecord: 5.4ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:44:59 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:45:08 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (7.2ms)
  Rendered topics/new.html.erb within layouts/application (8.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 35.9ms | ActiveRecord: 1.2ms)


Started POST "/ru/topics" for 127.0.0.1 at 2013-08-22 14:45:12 +0600
Processing by TopicsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "topic"=>{"name"=>"Пейзаж", "content"=>""}, "commit"=>"Создать Topic", "locale"=>"ru"}
  [1m[36m (1.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "topics" ("content", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["content", ""], ["created_at", Thu, 22 Aug 2013 08:45:12 UTC +00:00], ["name", "Пейзаж"], ["updated_at", Thu, 22 Aug 2013 08:45:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/topics/2
Completed 302 Found in 19ms (ActiveRecord: 3.5ms)


Started GET "/ru/topics/2" for 127.0.0.1 at 2013-08-22 14:45:12 +0600
Processing by TopicsController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"2"}
  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "2"]]
default_url_options is passed options: {}

  Rendered topics/show.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 40.2ms | ActiveRecord: 1.8ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:45:15 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.6ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 31.3ms | ActiveRecord: 1.6ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:45:19 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (4.8ms)
  Rendered topics/new.html.erb within layouts/application (5.8ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 29.2ms | ActiveRecord: 1.1ms)


Started POST "/ru/topics" for 127.0.0.1 at 2013-08-22 14:45:31 +0600
Processing by TopicsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "topic"=>{"name"=>"Репортаж", "content"=>""}, "commit"=>"Создать Topic", "locale"=>"ru"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "topics" ("content", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["content", ""], ["created_at", Thu, 22 Aug 2013 08:45:31 UTC +00:00], ["name", "Репортаж"], ["updated_at", Thu, 22 Aug 2013 08:45:31 UTC +00:00]]
  [1m[35m (1.0ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/topics/3
Completed 302 Found in 6ms (ActiveRecord: 2.2ms)


Started GET "/ru/topics/3" for 127.0.0.1 at 2013-08-22 14:45:31 +0600
Processing by TopicsController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"3"}
  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "3"]]
default_url_options is passed options: {}

  Rendered topics/show.html.erb within layouts/application (0.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 30.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:45:33 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (3.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 1.6ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:45:59 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.8ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (6.9ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (2.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 42ms (Views: 39.2ms | ActiveRecord: 2.0ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:47:13 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.6ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (5.8ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 38.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/topics/1" for 127.0.0.1 at 2013-08-22 14:47:22 +0600
Processing by TopicsController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/show.html.erb within layouts/application (1.3ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 27.9ms | ActiveRecord: 1.6ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:47:25 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.6ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (5.0ms)
  Rendered topics/edit.html.erb within layouts/application (6.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 34.6ms | ActiveRecord: 1.8ms)


Started PATCH "/ru/topics/1" for 127.0.0.1 at 2013-08-22 14:47:27 +0600
Processing by TopicsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "topic"=>{"name"=>"Портрет", "content"=>""}, "commit"=>"Сохранить Topic", "locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/topics/1
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)


Started GET "/ru/topics/1" for 127.0.0.1 at 2013-08-22 14:47:27 +0600
Processing by TopicsController#show as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/show.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 29.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:47:31 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (4.8ms)
  Rendered topics/edit.html.erb within layouts/application (6.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:47:59 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (8.2ms)
  Rendered topics/edit.html.erb within layouts/application (10.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 45ms (Views: 42.6ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:48:01 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (59.8ms)
  Rendered topics/edit.html.erb within layouts/application (61.2ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 87ms (Views: 84.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:48:16 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (5.4ms)
  Rendered topics/edit.html.erb within layouts/application (6.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 34.4ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:48:35 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (6.5ms)
  Rendered topics/edit.html.erb within layouts/application (7.6ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 42ms (Views: 39.2ms | ActiveRecord: 1.8ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:48:56 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (7.0ms)
  Rendered topics/edit.html.erb within layouts/application (8.2ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (2.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 36.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/topics/1/edit" for 127.0.0.1 at 2013-08-22 14:49:38 +0600
Processing by TopicsController#edit as HTML
  Parameters: {"locale"=>"ru", "id"=>"1"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = $1 LIMIT 1[0m  [["id", "1"]]
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (60.4ms)
  Rendered topics/edit.html.erb within layouts/application (61.7ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 160ms (Views: 136.2ms | ActiveRecord: 10.1ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:51:21 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (4.4ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 28.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:51:32 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (78.1ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 158ms (Views: 146.2ms | ActiveRecord: 9.9ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:51:34 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (5.2ms)
  Rendered topics/new.html.erb within layouts/application (6.3ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 30.9ms | ActiveRecord: 1.1ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:52:24 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (34.5ms)
  Rendered topics/new.html.erb within layouts/application (35.9ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 162ms (Views: 149.6ms | ActiveRecord: 9.1ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:52:34 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (6.4ms)
  Rendered topics/new.html.erb within layouts/application (7.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 38.6ms | ActiveRecord: 1.3ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:52:44 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (7.2ms)
  Rendered topics/new.html.erb within layouts/application (8.2ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 37.3ms | ActiveRecord: 1.1ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:53:06 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (6.2ms)
  Rendered topics/new.html.erb within layouts/application (7.1ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 39.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:53:28 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (101.1ms)
  Rendered topics/new.html.erb within layouts/application (105.8ms)
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (4.2ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 634ms (Views: 595.2ms | ActiveRecord: 15.3ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:53:40 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (65.0ms)
  Rendered topics/new.html.erb within layouts/application (65.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 151ms (Views: 138.0ms | ActiveRecord: 10.0ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:53:55 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (72.7ms)
  Rendered topics/new.html.erb within layouts/application (73.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 160ms (Views: 147.4ms | ActiveRecord: 9.5ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:54:18 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.7ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (5.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (4.5ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 39ms (Views: 36.0ms | ActiveRecord: 2.1ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 14:54:24 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 27ms (Views: 24.5ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:54:26 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.4ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 102ms (Views: 83.7ms | ActiveRecord: 4.3ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 14:58:08 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (16.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 148ms (Views: 133.6ms | ActiveRecord: 10.5ms)


Started GET "/ru/topics/new" for 127.0.0.1 at 2013-08-22 14:58:10 +0600
Processing by TopicsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered topics/_form.html.erb (5.1ms)
  Rendered topics/new.html.erb within layouts/application (6.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 35ms (Views: 32.8ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 14:58:14 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (21.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 103ms (Views: 46.5ms | ActiveRecord: 4.0ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 14:58:16 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (62.4ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (63.6ms)
Completed 500 Internal Server Error in 66ms

ArgumentError - :has_one associations are not supported by f.association:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:190:in `association'
  app/views/photos/_form.html.erb:7:in `block in _app_views_photos__form_html_erb___2477881987137980379_70125867396880'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2477881987137980379_70125867396880'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___1572374164598118415_70125867380240'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2061110945206547993__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2306076293468957681__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 14:58:16 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (9.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (14.0ms)
Completed 500 Internal Server Error in 17ms

ArgumentError - :has_one associations are not supported by f.association:
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:190:in `association'
  app/views/photos/_form.html.erb:7:in `block in _app_views_photos__form_html_erb___2477881987137980379_70125864935340'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2477881987137980379_70125864935340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___1572374164598118415_70125864902040'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2061110945206547993__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2306076293468957681__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70125865115000/variables" for 127.0.0.1 at 2013-08-22 14:58:16 +0600


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 14:59:02 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (152.7ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (153.5ms)
Completed 500 Internal Server Error in 171ms

NoMethodError - undefined method `topic_id' for #<Photo:0x007f8ee69b14d8>:
  activemodel (4.0.0) lib/active_model/attribute_methods.rb:436:in `method_missing'
  activerecord (4.0.0) lib/active_record/attribute_methods.rb:131:in `method_missing'
  actionpack (4.0.0) lib/action_view/helpers/tags/base.rb:28:in `value'
  actionpack (4.0.0) lib/action_view/helpers/tags/collection_select.rb:16:in `block in render'
  actionpack (4.0.0) lib/action_view/helpers/tags/collection_select.rb:16:in `render'
  actionpack (4.0.0) lib/action_view/helpers/form_options_helper.rb:190:in `collection_select'
  actionpack (4.0.0) lib/action_view/helpers/form_options_helper.rb:781:in `collection_select'
  simple_form (3.0.0.rc) lib/simple_form/inputs/collection_select_input.rb:7:in `input'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:29:in `block in render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/many.rb:27:in `render'
  simple_form (3.0.0.rc) lib/simple_form/wrappers/root.rb:15:in `render'
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:118:in `input'
  simple_form (3.0.0.rc) lib/simple_form/form_builder.rb:206:in `association'
  app/views/photos/_form.html.erb:7:in `block in _app_views_photos__form_html_erb___2477881987137980379_70125864935340'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.0) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.0) lib/action_view/helpers/form_helper.rb:435:in `form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:22:in `block in simple_form_for'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:41:in `with_simple_form_field_error_proc'
  simple_form (3.0.0.rc) lib/simple_form/action_view_extensions/form_helper.rb:21:in `simple_form_for'
  app/views/photos/_form.html.erb:1:in `_app_views_photos__form_html_erb___2477881987137980379_70125864935340'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/partial_renderer.rb:278:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionpack (4.0.0) lib/action_view/helpers/rendering_helper.rb:27:in `render'
  app/views/photos/new.html.erb:3:in `_app_views_photos_new_html_erb___1572374164598118415_70125864902040'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__2061110945206547993__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2306076293468957681__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70125846843880/variables" for 127.0.0.1 at 2013-08-22 14:59:02 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddTopicIdToPhoto (20130822085950)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "photos" ADD COLUMN "topic_id" integer[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20130822085950"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 15:00:16 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (261.9ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (266.0ms)
  [1m[35m (4.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.0ms)
Completed 200 OK in 689ms (Views: 631.8ms | ActiveRecord: 24.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:00:30 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.7ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (4.9ms)
  Rendered layouts/_messages.html.erb (0.8ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 39ms (Views: 36.6ms | ActiveRecord: 2.0ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:00:32 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (21.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (22.8ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 48ms (Views: 41.3ms | ActiveRecord: 5.6ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:00:35 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"1", "topic_id"=>"2", "theme_tokens"=>"5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (6.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
Unpermitted parameters: topic_id
  [1m[35m (40.7ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (2.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 274ms (ActiveRecord: 51.1ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:00:35 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 24.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:00:37 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 78ms (Views: 75.1ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:00:41 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 35.5ms | ActiveRecord: 3.1ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:00:46 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"1", "topic_id"=>"3", "theme_tokens"=>"5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
Unpermitted parameters: topic_id
  [1m[35m (7.4ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (3.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (1.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36mUser Load (19.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 54ms (ActiveRecord: 33.2ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:00:46 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 26.8ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:00:48 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:00:50 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 37ms (Views: 33.7ms | ActiveRecord: 2.5ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:01:06 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (17.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 47ms (Views: 42.3ms | ActiveRecord: 2.8ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:01:09 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (14.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 43ms (Views: 38.7ms | ActiveRecord: 2.9ms)


Started GET "/ru/users/4/photos/11/edit" for 127.0.0.1 at 2013-08-22 15:01:39 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "11"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 11], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (120.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (121.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 189ms (Views: 140.5ms | ActiveRecord: 16.7ms)


Started PATCH "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:01:43 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"1", "topic_id"=>"1", "theme_tokens"=>"5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (20.0ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36m (19.0ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = '5')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[36mSQL (2.8ms)[0m  [1mUPDATE "photos" SET "topic_id" = $1, "updated_at" = $2 WHERE "photos"."id" = 11[0m  [["topic_id", 1], ["updated_at", Thu, 22 Aug 2013 09:01:43 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 11], ["taggable_type", "Photo"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/11
Completed 302 Found in 80ms (ActiveRecord: 47.3ms)


Started GET "/ru/users/4/photos/11" for 127.0.0.1 at 2013-08-22 15:01:43 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"11"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "11"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 23.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:01:45 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 28.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:01:48 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 37ms (Views: 33.3ms | ActiveRecord: 2.7ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:01:53 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"1", "theme_tokens"=>"noon,5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35m (2.4ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (3.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mSQL (6.3ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9  [["updated_at", Thu, 22 Aug 2013 09:01:53 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5')[0m
  [1m[35mActsAsTaggableOn::Tag Load (11.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "photos" SET "topic_id" = $1, "updated_at" = $2 WHERE "photos"."id" = 9[0m  [["topic_id", 1], ["updated_at", Thu, 22 Aug 2013 09:01:53 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Load (2.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 62ms (ActiveRecord: 33.6ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:01:53 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:01:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 28.6ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:01:57 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 39ms (Views: 35.1ms | ActiveRecord: 2.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:02:01 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.7ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:02:08 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 39ms (Views: 35.5ms | ActiveRecord: 2.2ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:02:11 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"2", "theme_tokens"=>"noon,5"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9  [["updated_at", Thu, 22 Aug 2013 09:02:11 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "photos" SET "topic_id" = $1, "updated_at" = $2 WHERE "photos"."id" = 9[0m  [["topic_id", 2], ["updated_at", Thu, 22 Aug 2013 09:02:11 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5')
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 21ms (ActiveRecord: 4.9ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:02:11 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (5.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:02:13 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 26.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:02:15 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (67.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (69.1ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 92ms (Views: 88.6ms | ActiveRecord: 2.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:02:17 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 27.2ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:02:39 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 35ms (Views: 31.8ms | ActiveRecord: 2.2ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF" for 127.0.0.1 at 2013-08-22 15:02:44 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"п"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%п%')
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE" for 127.0.0.1 at 2013-08-22 15:02:45 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"про"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%про%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8" for 127.0.0.1 at 2013-08-22 15:02:46 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"прои"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%прои%')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B" for 127.0.0.1 at 2013-08-22 15:02:48 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольны"}
  [1m[36m (0.3ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольны%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9" for 127.0.0.1 at 2013-08-22 15:02:49 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_" for 127.0.0.1 at 2013-08-22 15:02:50 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный_"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный_%')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%82%D0%B5%D0%B3" for 127.0.0.1 at 2013-08-22 15:02:50 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный_тег"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(8,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный_тег%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:02:53 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"", "theme_tokens"=>"travel,demo,произвольный_тег"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (6.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:02:53 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo' OR lower(name) = 'произвольный_тег')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (11.8ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'произвольный_тег' LIMIT 1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "произвольный_тег"]]
  [1m[35mActsAsTaggableOn::Tag Load (7.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 12 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:02:53 UTC +00:00], ["tag_id", 12], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'travel' OR lower(name) = 'demo' OR lower(name) = 'произвольный_тег')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 159ms (ActiveRecord: 38.8ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:02:53 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 28ms (Views: 24.8ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:02:56 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (7.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 29ms (Views: 26.5ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:02:57 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 36.2ms | ActiveRecord: 2.4ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:03:04 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (48.0ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8[0m  [["updated_at", Thu, 22 Aug 2013 09:03:04 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (1.5ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (11)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (18)[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 18]]
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "photos" SET "topic_id" = $1, "updated_at" = $2 WHERE "photos"."id" = 8[0m  [["topic_id", 3], ["updated_at", Thu, 22 Aug 2013 09:03:04 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 90ms (ActiveRecord: 58.1ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:03:04 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:03:06 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 33ms (Views: 31.1ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:03:08 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 36.4ms | ActiveRecord: 2.5ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:03:11 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (15.0ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (19.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (1.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:03:11 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 64ms (ActiveRecord: 39.1ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:03:11 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 25ms (Views: 22.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:03:14 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 15:03:25 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (1.1ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (0.9ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (9.7ms)
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.6ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.0ms)
  Rendered users/index.html.erb within layouts/application (40.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 78ms (Views: 64.2ms | ActiveRecord: 5.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:04:25 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (63.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 89ms (Views: 86.6ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:04:46 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (124.2ms)
  [1m[35m (4.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.6ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (1.1ms)
Completed 200 OK in 582ms (Views: 534.5ms | ActiveRecord: 15.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:04:49 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.8ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 38ms (Views: 34.9ms | ActiveRecord: 2.0ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 15:04:53 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
default_url_options is passed options: {}

  [1m[36mRole Load (1.2ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36m (0.9ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[35mRole Load (0.4ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (68.9ms)
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36m (0.6ms)[0m  [1mSELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_user.html.erb (5.2ms)
  Rendered users/index.html.erb within layouts/application (103.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (3.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.0ms)
default_url_options is passed options: {}

  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_navigation.ru.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 145ms (Views: 130.9ms | ActiveRecord: 6.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:05:16 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (12.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 38.8ms | ActiveRecord: 1.9ms)


Started GET "/ru/topics" for 127.0.0.1 at 2013-08-22 15:05:21 +0600
Processing by TopicsController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
default_url_options is passed options: {}

  Rendered topics/index.html.erb within layouts/application (17.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 40.9ms | ActiveRecord: 4.2ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 15:05:25 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 25ms (Views: 22.4ms | ActiveRecord: 1.7ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:05:28 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 30.0ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 15:05:30 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (71.8ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (73.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 95ms (Views: 89.9ms | ActiveRecord: 3.9ms)


Started POST "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:05:55 +0600
Processing by PhotosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "image"=>#<ActionDispatch::Http::UploadedFile:0x007fac349c90b8 @tempfile=#<Tempfile:/var/folders/_0/y6zdz9jx41j0ddcm5vcf57_c0000gn/T/RackMultipart20130822-5120-vjsh9g>, @original_filename="Imag0055.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"Imag0055.JPG\"\r\nContent-Type: image/jpeg\r\n">, "topic_id"=>"3", "theme_tokens"=>""}, "commit"=>"Создать Photo", "locale"=>"ru", "user_id"=>"4"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "photos" ("created_at", "image", "title", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Thu, 22 Aug 2013 09:05:55 UTC +00:00], ["image", "Imag0055.JPG"], ["title", "Украина"], ["updated_at", Thu, 22 Aug 2013 09:05:55 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "photos" SET "topic_id" = $1, "user_id" = $2, "updated_at" = $3 WHERE "photos"."id" = 14  [["topic_id", 3], ["user_id", 4], ["updated_at", Thu, 22 Aug 2013 09:05:55 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35m (0.5ms)[0m  COMMIT
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 522ms (ActiveRecord: 8.4ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:05:55 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 29ms (Views: 25.9ms | ActiveRecord: 1.9ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:05:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 33ms (Views: 31.1ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:06:01 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (49.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (51.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 74ms (Views: 69.6ms | ActiveRecord: 3.2ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:06:04 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>""}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (2.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (10.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35m (1.6ms)[0m  COMMIT
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 63ms (ActiveRecord: 16.2ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:06:04 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 21.2ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:06:05 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.8ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:06:19 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (59.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 81ms (Views: 78.2ms | ActiveRecord: 2.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:06:21 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 27.4ms | ActiveRecord: 1.4ms)


Started GET "/users/edit?locale=ru" for 127.0.0.1 at 2013-08-22 15:06:22 +0600
Processing by RegistrationsController#edit as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered devise/registrations/edit.html.erb within layouts/application (10.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.1ms | ActiveRecord: 1.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:07:04 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (16.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.8ms)
Completed 200 OK in 43ms (Views: 40.7ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:10:44 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (84.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (86.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (43.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 236ms (Views: 146.4ms | ActiveRecord: 16.8ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:10:46 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (6.2ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (2.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (12.3ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:10:46 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 188ms (ActiveRecord: 24.0ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:10:47 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 26.5ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:10:49 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (59.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 79ms (Views: 77.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:10:51 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 38ms (Views: 33.9ms | ActiveRecord: 2.5ms)


Started GET "/photo_ajax/theme_tokens?q=d" for 127.0.0.1 at 2013-08-22 15:10:59 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"d"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%d%')
Completed 500 Internal Server Error in 6ms

NoMethodError - undefined method `id' for {:id=>5, :name=>"demo"}:Hash:
  app/controllers/photo_ajax_controller.rb:17:in `block (2 levels) in theme_tokens'
  app/controllers/photo_ajax_controller.rb:17:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__2451409551061009587__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__139383266359811915__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=de" for 127.0.0.1 at 2013-08-22 15:11:00 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"de"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%de%')
Completed 500 Internal Server Error in 4ms

NoMethodError - undefined method `id' for {:id=>5, :name=>"demo"}:Hash:
  app/controllers/photo_ajax_controller.rb:17:in `block (2 levels) in theme_tokens'
  app/controllers/photo_ajax_controller.rb:17:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__2451409551061009587__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__139383266359811915__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=demo" for 127.0.0.1 at 2013-08-22 15:11:02 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"demo"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%demo%')
Completed 500 Internal Server Error in 4ms

NoMethodError - undefined method `id' for {:id=>5, :name=>"demo"}:Hash:
  app/controllers/photo_ajax_controller.rb:17:in `block (2 levels) in theme_tokens'
  app/controllers/photo_ajax_controller.rb:17:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__2451409551061009587__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__139383266359811915__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/photo_ajax/theme_tokens?q=demo" for 127.0.0.1 at 2013-08-22 15:11:03 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"demo"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%demo%')
Completed 500 Internal Server Error in 5ms

NoMethodError - undefined method `id' for {:id=>5, :name=>"demo"}:Hash:
  app/controllers/photo_ajax_controller.rb:17:in `block (2 levels) in theme_tokens'
  app/controllers/photo_ajax_controller.rb:17:in `block in theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photo_ajax_controller.rb:5:in `theme_tokens'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__2451409551061009587__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__139383266359811915__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:11:33 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (122.0ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (123.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 184ms (Views: 139.8ms | ActiveRecord: 16.3ms)


Started GET "/photo_ajax/theme_tokens?q=he" for 127.0.0.1 at 2013-08-22 15:11:38 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"he"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14,8)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%he%')
Completed 401 Unauthorized in 96049ms
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:14:49 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (1.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (4.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (265.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (270.2ms)
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 692ms (Views: 617.0ms | ActiveRecord: 27.2ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:14:53 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 5ms

NoMethodError - undefined method `map' for "произвольный_тег,demo":String:
  app/models/photo.rb:18:in `theme_tokens='
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:42:in `_assign_attribute'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:29:in `block in assign_attributes'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:23:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/photos_controller.rb:51:in `block in update'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photos_controller.rb:50:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__1722198406753395585__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__4481449130765236751__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70289960347920/variables" for 127.0.0.1 at 2013-08-22 15:14:53 +0600


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:15:22 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:15:23 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 265ms (ActiveRecord: 12.9ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:15:23 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (5.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 84ms (Views: 75.9ms | ActiveRecord: 5.4ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:15:26 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (82.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (83.8ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.7ms)
Completed 200 OK in 110ms (Views: 103.0ms | ActiveRecord: 5.2ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:15:45 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:17:16 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 90852ms (ActiveRecord: 12.8ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:17:16 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (42.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 156ms (Views: 69.3ms | ActiveRecord: 9.6ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:17:19 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (40.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (41.3ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 64ms (Views: 54.5ms | ActiveRecord: 8.3ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:17:21 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"произвольный_тег,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (40.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35m (1.7ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:17:21 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный_тег' OR lower(name) = 'demo')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/8
Completed 302 Found in 16425ms (ActiveRecord: 46.8ms)


Started GET "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:17:37 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.3ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 31ms (Views: 26.4ms | ActiveRecord: 1.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:17:43 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (10.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 33ms (Views: 31.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:17:45 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 37ms (Views: 33.0ms | ActiveRecord: 2.6ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:17:46 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "8"]]
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (15.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (16.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 43ms (Views: 38.8ms | ActiveRecord: 3.0ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:17:55 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (1.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (4.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (258.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (263.5ms)
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_user_sidebar.html.erb (0.6ms)
Completed 200 OK in 686ms (Views: 613.5ms | ActiveRecord: 24.9ms)
  [1m[36mPhoto Load (3.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", 8]]
  [1m[35mActsAsTaggableOn::Tag Load (1.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8  [["updated_at", Thu, 22 Aug 2013 09:19:35 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный тег' OR lower(name) = 'demo')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.5ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРОИЗВОЛЬНЫЙ ТЕГ' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ПРОИЗВОЛЬНЫЙ ТЕГ"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (12)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (1.0ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (19)
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 19]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 13 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:19:35 UTC +00:00], ["tag_id", 13], ["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", 8]]
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:19:55 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (15.1ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (17.1ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 44ms (Views: 39.4ms | ActiveRecord: 3.0ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:20:13 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"ПРОИЗВОЛЬНЫЙ ТЕГ,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.9ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (2.0ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8[0m  [["updated_at", Thu, 22 Aug 2013 09:20:13 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный тег' OR lower(name) = 'demo')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРОИЗВОЛЬНЫЙ ТЕГ' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (13)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.5ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (20)
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 20]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 422 Unprocessable Entity in 251ms

ActiveRecord::RecordInvalid - Возникли ошибки: Tag не может быть пустым:
  activerecord (4.0.0) lib/active_record/validations.rb:57:in `save!'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:41:in `save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `block in save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `save!'
  activerecord (4.0.0) lib/active_record/associations/has_many_association.rb:37:in `insert_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:463:in `block (2 levels) in create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:367:in `add_to_target'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:461:in `block in create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:152:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:151:in `transaction'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:460:in `create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:125:in `create!'
  activerecord (4.0.0) lib/active_record/associations/collection_proxy.rb:276:in `create!'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:375:in `block (2 levels) in save_tags'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:374:in `block in save_tags'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:328:in `save_tags'
  activesupport (4.0.0) lib/active_support/callbacks.rb:416:in `_run__4368213429431312471__save__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `create_or_update'
  activerecord (4.0.0) lib/active_record/persistence.rb:128:in `save!'
  activerecord (4.0.0) lib/active_record/validations.rb:57:in `save!'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:41:in `save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `block in save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `save!'
  app/models/photo.rb:21:in `theme_tokens='
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:42:in `_assign_attribute'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:29:in `block in assign_attributes'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:23:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/photos_controller.rb:51:in `block in update'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photos_controller.rb:50:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__1991096788813273558__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2329586152965196485__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70248168878860/variables" for 127.0.0.1 at 2013-08-22 15:20:14 +0600
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:20:20 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (4.9ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.9ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (1.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (26.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (30.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (1.0ms)
  Rendered layouts/_user_sidebar.html.erb (0.9ms)
Completed 200 OK in 74ms (Views: 60.2ms | ActiveRecord: 10.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:20:22 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (10.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (31.0ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 63ms (Views: 49.8ms | ActiveRecord: 12.5ms)


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:20:24 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.5ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 36ms (Views: 32.1ms | ActiveRecord: 2.9ms)


Started PATCH "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:20:25 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013", "topic_id"=>"3", "theme_tokens"=>"ПРОИЗВОЛЬНЫЙ ТЕГ,demo"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (24.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 8[0m  [["updated_at", Thu, 22 Aug 2013 09:20:25 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'произвольный тег' OR lower(name) = 'demo')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРОИЗВОЛЬНЫЙ ТЕГ' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (13)[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (20)
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 20]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 8 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 422 Unprocessable Entity in 78ms

ActiveRecord::RecordInvalid - Возникли ошибки: Tag не может быть пустым:
  activerecord (4.0.0) lib/active_record/validations.rb:57:in `save!'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:41:in `save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `block in save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `save!'
  activerecord (4.0.0) lib/active_record/associations/has_many_association.rb:37:in `insert_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:463:in `block (2 levels) in create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:367:in `add_to_target'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:461:in `block in create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:152:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:151:in `transaction'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:460:in `create_record'
  activerecord (4.0.0) lib/active_record/associations/collection_association.rb:125:in `create!'
  activerecord (4.0.0) lib/active_record/associations/collection_proxy.rb:276:in `create!'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:375:in `block (2 levels) in save_tags'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:374:in `block in save_tags'
  acts-as-taggable-on (2.4.1) lib/acts_as_taggable_on/acts_as_taggable_on/core.rb:328:in `save_tags'
  activesupport (4.0.0) lib/active_support/callbacks.rb:416:in `_run__4368213429431312471__save__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  activerecord (4.0.0) lib/active_record/callbacks.rb:299:in `create_or_update'
  activerecord (4.0.0) lib/active_record/persistence.rb:128:in `save!'
  activerecord (4.0.0) lib/active_record/validations.rb:57:in `save!'
  activerecord (4.0.0) lib/active_record/attribute_methods/dirty.rb:41:in `save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `block in save!'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:200:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/transactions.rb:275:in `save!'
  app/models/photo.rb:21:in `theme_tokens='
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:42:in `_assign_attribute'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:29:in `block in assign_attributes'
  activerecord (4.0.0) lib/active_record/attribute_assignment.rb:23:in `assign_attributes'
  activerecord (4.0.0) lib/active_record/persistence.rb:229:in `block in update'
  activerecord (4.0.0) lib/active_record/transactions.rb:326:in `block in with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:209:in `transaction'
  activerecord (4.0.0) lib/active_record/transactions.rb:323:in `with_transaction_returning_status'
  activerecord (4.0.0) lib/active_record/persistence.rb:228:in `update'
  app/controllers/photos_controller.rb:51:in `block in update'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:363:in `retrieve_collector_from_mimes'
  actionpack (4.0.0) lib/action_controller/metal/mime_responds.rb:189:in `respond_to'
  app/controllers/photos_controller.rb:50:in `update'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:423:in `_run__1991096788813273558__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2329586152965196485__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70248219472620/variables" for 127.0.0.1 at 2013-08-22 15:20:25 +0600
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.5ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]


Started POST "/__better_errors/70248219472620/variables" for 127.0.0.1 at 2013-08-22 15:20:37 +0600


Started POST "/__better_errors/70248219472620/variables" for 127.0.0.1 at 2013-08-22 15:20:40 +0600


Started GET "/ru/users/4/photos/8/edit" for 127.0.0.1 at 2013-08-22 15:20:52 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (7.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36mUser Load (4.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.5ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (26.4ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (28.5ms)
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 74ms (Views: 56.8ms | ActiveRecord: 14.8ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:20:54 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 30ms (Views: 28.1ms | ActiveRecord: 1.4ms)


Started DELETE "/ru/users/4/photos/8" for 127.0.0.1 at 2013-08-22 15:20:58 +0600
Processing by PhotosController#destroy as HTML
  Parameters: {"authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "locale"=>"ru", "user_id"=>"4", "id"=>"8"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "8"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tagging Load (2.2ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 20]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 14]]
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1mSELECT "taggings".* FROM "taggings" INNER JOIN "tags" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 8], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "photos" WHERE "photos"."id" = $1  [["id", 8]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos
Completed 302 Found in 21ms (ActiveRecord: 6.1ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:20:58 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (11.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 33ms (Views: 30.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:20:59 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 37ms (Views: 33.1ms | ActiveRecord: 2.5ms)


Started GET "/photo_ajax/theme_tokens?q=g" for 127.0.0.1 at 2013-08-22 15:21:03 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"g"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%g%')
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started GET "/photo_ajax/theme_tokens?q=good" for 127.0.0.1 at 2013-08-22 15:21:04 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"good"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%good%')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=ne" for 127.0.0.1 at 2013-08-22 15:21:07 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"ne"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%ne%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=new" for 127.0.0.1 at 2013-08-22 15:21:07 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"new"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%new%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=news" for 127.0.0.1 at 2013-08-22 15:21:08 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"news"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%news%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:21:10 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"good,news"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:21:10 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'good' OR lower(name) = 'news')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.3ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'GOOD' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "GOOD"]]
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'NEWS' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "NEWS"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 14 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:21:10 UTC +00:00], ["tag_id", 14], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 15 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:21:10 UTC +00:00], ["tag_id", 15], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'good' OR lower(name) = 'news')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'good' OR lower(name) = 'news')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 28713ms (ActiveRecord: 9.3ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:21:39 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (4.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 23.0ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:21:45 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:21:47 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (13.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 37ms (Views: 33.9ms | ActiveRecord: 2.1ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA" for 127.0.0.1 at 2013-08-22 15:21:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"к"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%к%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA%D0%B0" for 127.0.0.1 at 2013-08-22 15:21:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"ка"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%ка%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA%D1%80%D0%B0" for 127.0.0.1 at 2013-08-22 15:21:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"кра"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%кра%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA%D1%80%D0%B0%D0%B9%D0%BD%D0%B0" for 127.0.0.1 at 2013-08-22 15:21:58 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"крайна"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%крайна%')
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:22:06 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"NEWS,GOOD,крайна"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:22:06 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'крайна')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'КРАЙНА' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "КРАЙНА"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 16 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:22:06 UTC +00:00], ["tag_id", 16], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'крайна')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'КРАЙНА' LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (16)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.3ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (23)[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 23]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 6162ms (Views: 33.4ms | ActiveRecord: 9.6ms)


Started GET "/photo_ajax/theme_tokens?q=e" for 127.0.0.1 at 2013-08-22 15:22:21 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"e"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%e%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=ex" for 127.0.0.1 at 2013-08-22 15:22:23 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"ex"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%ex%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=exit" for 127.0.0.1 at 2013-08-22 15:22:23 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"exit"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%exit%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:22:30 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"NEWS,GOOD,exit"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:22:31 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'exit')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'EXIT' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "EXIT"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 17 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:22:31 UTC +00:00], ["tag_id", 17], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'exit')
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 105ms (ActiveRecord: 14.9ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:22:31 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 38ms (Views: 30.5ms | ActiveRecord: 5.6ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:22:33 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:22:34 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (88.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (89.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 112ms (Views: 106.4ms | ActiveRecord: 4.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE" for 127.0.0.1 at 2013-08-22 15:22:40 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"о"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%о%')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0" for 127.0.0.1 at 2013-08-22 15:22:41 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окра"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окра%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0%D0%B8%D0%BD%D0%B0" for 127.0.0.1 at 2013-08-22 15:22:43 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окраина"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окраина%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:22:47 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"EXIT,NEWS,GOOD,окраина"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (3.8ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (2.0ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (3.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (15.1ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:22:47 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (3.2ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'окраина')
  [1m[36mActsAsTaggableOn::Tag Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ОКРАИНА' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "ОКРАИНА"]]
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.9ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 18 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:22:47 UTC +00:00], ["tag_id", 18], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'окраина')
  [1m[36mActsAsTaggableOn::Tag Exists (2.1ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ОКРАИНА' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (18)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (25)
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 25]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.4ms)
Completed 200 OK in 127ms (Views: 34.7ms | ActiveRecord: 39.9ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA" for 127.0.0.1 at 2013-08-22 15:22:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"ок"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%ок%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0" for 127.0.0.1 at 2013-08-22 15:22:56 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окра"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окра%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0%D0%B8" for 127.0.0.1 at 2013-08-22 15:22:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окраи"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окраи%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0%D0%B8%D0%BD" for 127.0.0.1 at 2013-08-22 15:22:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окраин"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окраин%')
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BE%D0%BA%D1%80%D0%B0%D0%B8%D0%BD%D0%B0" for 127.0.0.1 at 2013-08-22 15:22:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"окраина"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%окраина%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:22:59 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"EXIT,NEWS,GOOD,окраина"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:22:59 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'окраина')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ОКРАИНА' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ОКРАИНА"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 19 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:22:59 UTC +00:00], ["tag_id", 19], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'окраина')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ОКРАИНА' LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (1.0ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (19)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.4ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (26)[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 26]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 79ms (Views: 35.0ms | ActiveRecord: 10.3ms)


Started GET "/photo_ajax/theme_tokens?q=m" for 127.0.0.1 at 2013-08-22 15:23:06 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"m"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%m%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=mook" for 127.0.0.1 at 2013-08-22 15:23:07 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"mook"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(11,9,14)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%mook%')[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:23:08 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"EXIT,NEWS,GOOD,mook"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:23:08 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'mook')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'MOOK' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "MOOK"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 20 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:23:08 UTC +00:00], ["tag_id", 20], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'exit' OR lower(name) = 'news' OR lower(name) = 'good' OR lower(name) = 'mook')
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 30ms (ActiveRecord: 6.0ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:23:08 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 22.4ms | ActiveRecord: 1.3ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:23:11 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:23:27 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.2ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (75.8ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (77.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 188ms (Views: 94.1ms | ActiveRecord: 16.1ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:23:32 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>""}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:23:32 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (20, 17, 15, 14)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (27, 24, 22, 21)
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 22]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 24]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 27]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 82ms (ActiveRecord: 6.0ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:23:32 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 23.3ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:23:34 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.4ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (47.3ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (48.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 125ms (Views: 121.2ms | ActiveRecord: 2.2ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA%D1%80%D0%B0" for 127.0.0.1 at 2013-08-22 15:23:38 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"кра"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%кра%')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BA%D1%80%D0%B0%D0%B9" for 127.0.0.1 at 2013-08-22 15:23:39 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"край"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%край%')[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:23:47 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"край"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (2.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (2.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (22.1ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:23:47 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (2.7ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'край')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'КРАЙ' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "КРАЙ"]]
  [1m[36mActsAsTaggableOn::Tag Load (1.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 21 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:23:47 UTC +00:00], ["tag_id", 21], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'край')
  [1m[36mActsAsTaggableOn::Tag Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'КРАЙ' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (2.3ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (21)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (28)
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 28]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.6ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 132ms (Views: 33.5ms | ActiveRecord: 43.9ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D0%B2" for 127.0.0.1 at 2013-08-22 15:25:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"прив"}
  [1m[36m (0.3ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%прив%')
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.7ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D0%B2%D1%82" for 127.0.0.1 at 2013-08-22 15:25:11 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"привт"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%привт%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:25:12 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"привт"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (24.2ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:25:13 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'привт' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "привт"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 22 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:25:13 UTC +00:00], ["tag_id", 22], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/14
Completed 302 Found in 169ms (ActiveRecord: 35.3ms)


Started GET "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:25:13 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 39ms (Views: 30.7ms | ActiveRecord: 6.2ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:25:15 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:25:17 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (32.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (33.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 56ms (Views: 50.6ms | ActiveRecord: 4.3ms)


Started GET "/ru/users/4/photos/14/edit" for 127.0.0.1 at 2013-08-22 15:25:21 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (11.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (12.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 85ms (Views: 81.8ms | ActiveRecord: 2.2ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81" for 127.0.0.1 at 2013-08-22 15:25:51 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"с"}
  [1m[36m (0.3ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%с%')
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 3.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0" for 127.0.0.1 at 2013-08-22 15:25:51 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"са"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%са%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0%D1%85%D0%B0%D1%80" for 127.0.0.1 at 2013-08-22 15:25:52 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"сахар"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%сахар%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:25:54 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"привт,сахар"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (1.6ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:25:54 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'сахар')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'САХАР' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "САХАР"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 23 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:25:54 UTC +00:00], ["tag_id", 23], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'сахар')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'САХАР' LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (23)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.4ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (30)[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 30]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (81.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (82.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 293ms (Views: 149.4ms | ActiveRecord: 25.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81" for 127.0.0.1 at 2013-08-22 15:30:03 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"с"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%с%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0" for 127.0.0.1 at 2013-08-22 15:30:03 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"са"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%са%')[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0%D1%85" for 127.0.0.1 at 2013-08-22 15:30:04 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"сах"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%сах%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0%D1%85%D0%B0" for 127.0.0.1 at 2013-08-22 15:30:04 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"саха"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.4ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%саха%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=%D1%81%D0%B0%D1%85%D0%B0%D1%80" for 127.0.0.1 at 2013-08-22 15:30:05 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"сахар"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%сахар%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:30:07 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"привт,сахар"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[35mPhoto Load (41.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "14"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:30:07 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'сахар')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'САХАР' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "САХАР"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 24 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:30:07 UTC +00:00], ["tag_id", 24], ["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'сахар')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'САХАР' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (24)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.5ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (31)
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 31]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (66.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (68.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 211ms (Views: 86.3ms | ActiveRecord: 50.8ms)


Started GET "/photo_ajax/theme_tokens?q=g" for 127.0.0.1 at 2013-08-22 15:31:49 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"g"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%g%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=ghj" for 127.0.0.1 at 2013-08-22 15:31:50 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"ghj"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%ghj%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8" for 127.0.0.1 at 2013-08-22 15:31:54 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"прои"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%прои%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C" for 127.0.0.1 at 2013-08-22 15:31:55 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произволь"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произволь%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B" for 127.0.0.1 at 2013-08-22 15:31:56 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольны"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольны%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9" for 127.0.0.1 at 2013-08-22 15:31:56 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный"}
  [1m[36m (0.5ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный%')
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9+" for 127.0.0.1 at 2013-08-22 15:31:57 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный "}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный %')
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF" for 127.0.0.1 at 2013-08-22 15:32:01 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"п"}
  [1m[36m (0.6ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%п%')
Completed 200 OK in 58ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9+%D1%82%D0%B5%D0%B3" for 127.0.0.1 at 2013-08-22 15:32:10 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"произвольный тег"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%произвольный тег%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/14" for 127.0.0.1 at 2013-08-22 15:32:15 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Украина", "topic_id"=>"3", "theme_tokens"=>"привт,произвольный тег"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"14"}
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "14"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14  [["updated_at", Thu, 22 Aug 2013 09:32:15 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'произвольный тег')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.6ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРОИЗВОЛЬНЫЙ ТЕГ' LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (1.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (5.0ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 14[0m  [["updated_at", Thu, 22 Aug 2013 09:32:15 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'привт' OR lower(name) = 'произвольный тег')
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРОИЗВОЛЬНЫЙ ТЕГ' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 14], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 14 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.6ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 14], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (18.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (20.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 112ms (Views: 38.5ms | ActiveRecord: 18.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:33:10 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (121.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
  Rendered layouts/_user_sidebar.html.erb (0.5ms)
Completed 200 OK in 169ms (Views: 145.3ms | ActiveRecord: 10.5ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:33:12 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.4ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (89.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (91.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.7ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 114ms (Views: 105.1ms | ActiveRecord: 7.2ms)


Started GET "/photo_ajax/theme_tokens?q=c" for 127.0.0.1 at 2013-08-22 15:33:16 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"c"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%c%')[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=cf" for 127.0.0.1 at 2013-08-22 15:33:17 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"cf"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%cf%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:33:34 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (78.2ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (79.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (52.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 247ms (Views: 149.9ms | ActiveRecord: 16.7ms)


Started GET "/photo_ajax/theme_tokens?q=m" for 127.0.0.1 at 2013-08-22 15:33:38 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"m"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%m%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/photo_ajax/theme_tokens?q=md" for 127.0.0.1 at 2013-08-22 15:33:39 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"md"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%md%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=mdf" for 127.0.0.1 at 2013-08-22 15:33:39 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"mdf"}
  [1m[35m (0.4ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%mdf%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BB" for 127.0.0.1 at 2013-08-22 15:33:45 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"л"}
  [1m[35m (0.6ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%л%')[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BB%D0%BE%D0%BE%D0%BA" for 127.0.0.1 at 2013-08-22 15:33:46 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"лоок"}
  [1m[35m (0.5ms)[0m  SELECT photos.id FROM "photos"
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1mSELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%лоок%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:33:49 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"2", "theme_tokens"=>"noon,5,ЛООК"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (4.6ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (7.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 09:33:49 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.6ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5' OR lower(name) = 'лоок')
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ЛООК' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "ЛООК"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 25 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:33:49 UTC +00:00], ["tag_id", 25], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'noon' OR lower(name) = '5' OR lower(name) = 'лоок')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ЛООК' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (25)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (32)
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 32]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (13.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (15.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 223ms (Views: 37.8ms | ActiveRecord: 22.2ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF" for 127.0.0.1 at 2013-08-22 15:34:29 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"п"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%п%')
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.7ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8" for 127.0.0.1 at 2013-08-22 15:34:31 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"при"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%при%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D1%83" for 127.0.0.1 at 2013-08-22 15:34:32 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"приу"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%приу%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D0%B2" for 127.0.0.1 at 2013-08-22 15:34:34 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"прив"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%прив%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D0%B2%D0%B5" for 127.0.0.1 at 2013-08-22 15:34:35 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"приве"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%приве%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BF%D1%80%D0%B8%D0%B2%D0%B5%D1%82" for 127.0.0.1 at 2013-08-22 15:34:36 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"привет"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%привет%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:34:37 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"2", "theme_tokens"=>"ПРИВЕТ"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (1.2ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9  [["updated_at", Thu, 22 Aug 2013 09:34:37 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привет')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.5ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРИВЕТ' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ПРИВЕТ"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (10, 6)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (17, 12)
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 17]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 26 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:34:37 UTC +00:00], ["tag_id", 26], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'привет')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.4ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРИВЕТ' LIMIT 1
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (26)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.3ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (33)[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 33]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  [1m[35mTopic Load (0.3ms)[0m  SELECT "topics".* FROM "topics"
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (73.7ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (74.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 275ms (Views: 98.6ms | ActiveRecord: 27.9ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:35:26 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"2", "theme_tokens"=>"ПРИВЕТ"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1  [["id", "9"]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9[0m  [["updated_at", Thu, 22 Aug 2013 09:35:26 UTC +00:00]]
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'привет')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРИВЕТ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"  [["name", "ПРИВЕТ"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (10, 6)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (17, 12)[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 12]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 17]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 27 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:35:26 UTC +00:00], ["tag_id", 27], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" WHERE (lower(name) = 'привет')
  [1m[36mActsAsTaggableOn::Tag Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'ПРИВЕТ' LIMIT 1[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (27)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.3ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (34)
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 34]]
  [1m[35mActsAsTaggableOn::Tagging Exists (0.5ms)[0m  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" IS NULL AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (136.5ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (137.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 297ms (Views: 156.9ms | ActiveRecord: 24.8ms)


Started GET "/photo_ajax/theme_tokens?q=v" for 127.0.0.1 at 2013-08-22 15:35:31 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"v"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%v%')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BC%D0%B0%D0%BB%D0%B5%D0%BD%D1%8C%D0%BA%D0%B8+" for 127.0.0.1 at 2013-08-22 15:35:36 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"маленьки "}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%маленьки %')
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/photo_ajax/theme_tokens?q=%D0%BC%D0%B0%D0%BB%D0%B5%D0%BD%D1%8C%D0%BA%D0%B8+%D1%82%D0%B5%D0%B3" for 127.0.0.1 at 2013-08-22 15:35:37 +0600
Processing by PhotoAjaxController#theme_tokens as JSON
  Parameters: {"q"=>"маленьки тег"}
  [1m[36m (0.4ms)[0m  [1mSELECT photos.id FROM "photos"[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT tags.*, taggings.tags_count AS count FROM "tags" JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM "taggings" INNER JOIN photos ON photos.id = taggings.taggable_id WHERE (taggings.taggable_type = 'Photo' AND taggings.context = 'themes') AND (taggings.taggable_id IN(14,11,9)) GROUP BY taggings.tag_id HAVING COUNT(taggings.tag_id) > 0) AS taggings ON taggings.tag_id = tags.id WHERE (name like '%маленьки тег%')
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started PATCH "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:35:38 +0600
Processing by PhotosController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "photo"=>{"title"=>"Отпуск 2013-2", "topic_id"=>"2", "theme_tokens"=>"маленьки тег"}, "commit"=>"Сохранить Photo", "locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "photos" SET "updated_at" = $1 WHERE "photos"."id" = 9  [["updated_at", Thu, 22 Aug 2013 09:35:38 UTC +00:00]]
  [1m[36mActsAsTaggableOn::Tag Load (29.1ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'маленьки тег')[0m
  [1m[35mActsAsTaggableOn::Tag Exists (0.5ms)[0m  SELECT 1 AS one FROM "tags" WHERE "tags"."name" = 'маленьки тег' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "tags" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "маленьки тег"]]
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND "taggings"."tagger_type" IS NULL AND "taggings"."tagger_id" IS NULL AND "taggings"."context" = 'themes' AND "taggings"."tag_id" IN (10, 6)[0m  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."id" IN (17, 12)
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "taggings" WHERE "taggings"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "taggings" WHERE "taggings"."id" = $1  [["id", 17]]
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 28 AND "taggings"."taggable_type" = 'Photo' AND "taggings"."taggable_id" = 9 AND "taggings"."context" = 'themes' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["context", "themes"], ["created_at", Thu, 22 Aug 2013 09:35:38 UTC +00:00], ["tag_id", 28], ["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1mSELECT "tags".* FROM "tags" WHERE (lower(name) = 'маленьки тег')[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = 'themes' AND taggings.tagger_id IS NULL)  [["taggable_id", 9], ["taggable_type", "Photo"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

Redirected to http://localhost:3000/ru/users/4/photos/9
Completed 302 Found in 84ms (ActiveRecord: 39.4ms)


Started GET "/ru/users/4/photos/9" for 127.0.0.1 at 2013-08-22 15:35:38 +0600
Processing by PhotosController#show as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/show.html.erb within layouts/user_profile_layout (3.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 26ms (Views: 23.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:35:40 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (8.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 29ms (Views: 27.0ms | ActiveRecord: 1.4ms)


Started GET "/ru/users/4/photos/9/edit" for 127.0.0.1 at 2013-08-22 15:35:46 +0600
Processing by PhotosController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4", "id"=>"9"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT 1[0m  [["id", "9"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = $1 AND "taggings"."taggable_type" = $2 AND (taggings.context = ('themes'))  [["taggable_id", 9], ["taggable_type", "Photo"]]
  Rendered photos/_form.html.erb (12.9ms)
  Rendered photos/edit.html.erb within layouts/user_profile_layout (14.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 40ms (Views: 35.6ms | ActiveRecord: 2.2ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:36:08 +0600
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (5.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 32.2ms | ActiveRecord: 1.1ms)
  [1m[36mPhoto Load (2.1ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3


Started GET "/" for 127.0.0.1 at 2013-08-22 15:41:49 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (0.4ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 105ms (Views: 26.6ms | ActiveRecord: 2.9ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:44:31 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5[0m
  Rendered home/index.html.erb within layouts/application (0.8ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (5.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 175ms (Views: 165.2ms | ActiveRecord: 7.9ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:45:26 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5[0m
  Rendered home/index.html.erb within layouts/application (0.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 31.9ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:48:26 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5[0m
  Rendered home/index.html.erb within layouts/application (3.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 70ms (Views: 67.0ms | ActiveRecord: 1.7ms)


Started GET "/user_profile/ru/4" for 127.0.0.1 at 2013-08-22 15:48:58 +0600
Processing by UserProfileController#edit as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  Rendered user_profile/edit.html.erb within layouts/user_profile_layout (0.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 21.7ms | ActiveRecord: 1.0ms)


Started GET "/ru/users/4/photos" for 127.0.0.1 at 2013-08-22 15:48:59 +0600
Processing by PhotosController#index as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
default_url_options is passed options: {}

  Rendered photos/index.html.erb within layouts/user_profile_layout (9.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.3ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 1.6ms)


Started GET "/ru/users/4/photos/new" for 127.0.0.1 at 2013-08-22 15:49:01 +0600
Processing by PhotosController#new as HTML
  Parameters: {"locale"=>"ru", "user_id"=>"4"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
default_url_options is passed options: {}

  [1m[36mTopic Load (0.3ms)[0m  [1mSELECT "topics".* FROM "topics"[0m
  Rendered photos/_form.html.erb (84.0ms)
  Rendered photos/new.html.erb within layouts/user_profile_layout (85.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_user_sidebar.html.erb (0.2ms)
Completed 200 OK in 107ms (Views: 101.2ms | ActiveRecord: 4.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:50:03 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (3.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 27.5ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:50:07 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (3.8ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.1ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:50:41 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (4.9ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 33.0ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:53:11 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.7ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (4.3ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 37.2ms | ActiveRecord: 1.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:54:34 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5
  Rendered home/index.html.erb within layouts/application (5.1ms)
Completed 500 Internal Server Error in 10ms

ArgumentError - wrong number of arguments (1 for 0):
  app/views/home/index.html.erb:20:in `block in _app_views_home_index_html_erb___3018063974518656151_70248199816640'
  app/views/home/index.html.erb:18:in `_app_views_home_index_html_erb___3018063974518656151_70248199816640'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__107873519513192299__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2329586152965196485__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/70248188482980/variables" for 127.0.0.1 at 2013-08-22 15:54:34 +0600


Started GET "/" for 127.0.0.1 at 2013-08-22 15:55:10 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 5[0m
  Rendered home/index.html.erb within layouts/application (4.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 37.5ms | ActiveRecord: 1.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:55:27 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (3.7ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (5.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 166ms (Views: 126.8ms | ActiveRecord: 11.0ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:56:04 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (5.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 35.9ms | ActiveRecord: 2.1ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:56:27 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (4.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.9ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 36.1ms | ActiveRecord: 1.6ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:57:18 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (3.5ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.1ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 34.2ms | ActiveRecord: 1.8ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-22 15:57:33 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"fR38n6BuRBG5v2MN8+3/7wj1Lx/geafrnNMXo24UpPw=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 160ms (ActiveRecord: 4.3ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 15:57:33 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (5.4ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 488ms (Views: 451.2ms | ActiveRecord: 3.7ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 15:57:45 +0600
Processing by HomeController#index as HTML
  [1m[35mPhoto Load (0.6ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3
  Rendered home/index.html.erb within layouts/application (3.2ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 25ms (Views: 22.8ms | ActiveRecord: 0.6ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 15:58:00 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (2.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (107.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 131ms (Views: 128.3ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 15:58:04 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Vr5kbV466spBDu1rqlRtnlVurBE5aVNznrJ6zH5oWYk=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (4.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4[0m  [["last_sign_in_at", Thu, 22 Aug 2013 08:20:55 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 09:58:05 UTC +00:00], ["sign_in_count", 11], ["updated_at", Thu, 22 Aug 2013 09:58:05 UTC +00:00]]
  [1m[35m (0.9ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 98ms (ActiveRecord: 6.9ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 15:58:05 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (2.8ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.1ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (8.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (39.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 106ms (Views: 97.2ms | ActiveRecord: 7.4ms)


Started DELETE "/users/sign_out?locale=ru" for 127.0.0.1 at 2013-08-22 15:58:36 +0600
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZTEMylZlLgpgW6G2+7HS6CLeC9o6qXXOCoMgovE8eJs=", "locale"=>"ru"}
default_url_options is passed options: {}

default_url_options is passed options: {}

  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 12ms (ActiveRecord: 1.4ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 15:58:36 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mPhoto Load (0.5ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3
  Rendered home/index.html.erb within layouts/application (2.8ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 21.6ms | ActiveRecord: 0.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 16:11:57 +0600
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mPhoto Load (1.4ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3
  Rendered home/index.html.erb within layouts/application (4.8ms)
default_url_options is passed options: {}

default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 416ms (Views: 362.2ms | ActiveRecord: 5.1ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 16:12:18 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (124.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 183ms (Views: 142.2ms | ActiveRecord: 2.5ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 16:12:24 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VXTA47l0P36pvBDmhGRA3O/WZtEx7ADukyQDWyftSk0=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (4.5ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4[0m  [["last_sign_in_at", Thu, 22 Aug 2013 09:58:05 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 10:12:24 UTC +00:00], ["sign_in_count", 12], ["updated_at", Thu, 22 Aug 2013 10:12:24 UTC +00:00]]
  [1m[35m (0.9ms)[0m  COMMIT
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 106ms (ActiveRecord: 8.0ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 16:12:24 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (2.7ms)
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (6.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.3ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 106ms (Views: 97.9ms | ActiveRecord: 6.8ms)


Started GET "/ru/novelties" for 127.0.0.1 at 2013-08-22 22:46:04 +0600
  [1m[36mActiveRecord::SchemaMigration Load (14.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by NoveltiesController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35m (7.3ms)[0m  SELECT COUNT(*) FROM "novelties"
default_url_options is passed options: {}

  [1m[36mNovelty Load (0.6ms)[0m  [1mSELECT "novelties".* FROM "novelties" LIMIT 2 OFFSET 0[0m
  [1m[35mUser Load (59.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 4]]
  Rendered novelties/index.html.erb within layouts/application (430.4ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (3.8ms)
  Rendered layouts/_messages.html.erb (1.0ms)
Completed 200 OK in 1694ms (Views: 1486.5ms | ActiveRecord: 82.4ms)


Started GET "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 22:46:11 +0600
Processing by Devise::SessionsController#new as HTML
  Parameters: {"locale"=>"ru"}
default_url_options is passed options: {}

  Rendered devise/shared/_links.html.erb (1.9ms)
  Rendered devise/sessions/new.html.erb within layouts/application (208.5ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 250ms (Views: 246.2ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in?locale=ru" for 127.0.0.1 at 2013-08-22 22:46:17 +0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0idC89PRLGeSPbxiVf3biOkve4+LdNl1v8Zreu/Oe/A=", "user"=>{"email"=>"vith@yandex.ru", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in", "locale"=>"ru"}
  [1m[35mUser Load (57.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'vith@yandex.ru' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (30.0ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = 4  [["last_sign_in_at", Thu, 22 Aug 2013 10:12:24 UTC +00:00], ["current_sign_in_at", Thu, 22 Aug 2013 16:46:17 UTC +00:00], ["sign_in_count", 13], ["updated_at", Thu, 22 Aug 2013 16:46:17 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
default_url_options is passed options: {}

default_url_options is passed options: {}

Redirected to http://localhost:3000/?locale=ru
Completed 302 Found in 231ms (ActiveRecord: 88.5ms)


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 22:46:17 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[35mPhoto Load (31.6ms)[0m  SELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3
  Rendered home/index.html.erb within layouts/application (12.9ms)
Completed 500 Internal Server Error in 127ms

NameError - undefined local variable or method `photo' for #<#<Class:0x007fcca5b52100>:0x007fcca5bdbb80>:
  app/views/home/index.html.erb:20:in `_app_views_home_index_html_erb__886993624384165486_70258465380500'
  actionpack (4.0.0) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.0) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.0) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.0) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.0) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.0) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/vith/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (4.0.0) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.0) lib/active_support/callbacks.rb:413:in `_run__476987414152600782__process_action__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.0) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.0) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  activerecord (4.0.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.0) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.0) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.0) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.0) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.0) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.0) lib/action_dispatch/routing/route_set.rb:655:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.0) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.0) lib/active_record/migration.rb:369:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__2671744928615482719__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (0.9.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.5.1) lib/puma/server.rb:472:in `handle_request'
  puma (2.5.1) lib/puma/server.rb:343:in `process_client'
  puma (2.5.1) lib/puma/server.rb:242:in `block in run'
  puma (2.5.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'



Started POST "/__better_errors/70258480991360/variables" for 127.0.0.1 at 2013-08-22 22:46:18 +0600


Started GET "/?locale=ru" for 127.0.0.1 at 2013-08-22 22:46:46 +0600
Processing by HomeController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (3.8ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (47.4ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (3.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (3.6ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 177ms (Views: 124.4ms | ActiveRecord: 50.5ms)


Started GET "/ru/users" for 127.0.0.1 at 2013-08-22 22:47:03 +0600
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"ru"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"[0m
default_url_options is passed options: {}

  [1m[35mRole Load (1.1ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 5]]
  [1m[35m (1.8ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 5]]
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (31.2ms)
  [1m[35mRole Load (1.0ms)[0m  SELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 ORDER BY "roles"."id" ASC LIMIT 1[0m  [["user_id", 4]]
  [1m[35m (0.7ms)[0m  SELECT "roles".id FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1  [["user_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_user.html.erb (5.8ms)
  Rendered users/index.html.erb within layouts/application (77.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_moder_menu.html (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (2.0ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.4ms)
Completed 200 OK in 124ms (Views: 110.6ms | ActiveRecord: 7.8ms)


Started GET "/" for 127.0.0.1 at 2013-08-22 22:47:05 +0600
Processing by HomeController#index as HTML
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT "photos".* FROM "photos" ORDER BY "photos"."id" DESC LIMIT 3[0m
  Rendered home/index.html.erb within layouts/application (3.7ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
default_url_options is passed options: {}

  Rendered layouts/_moder_menu.html (48.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))  [["user_id", 4]]
  Rendered layouts/_admin_menu.html.erb (1.2ms)
default_url_options is passed options: {}

  Rendered layouts/_navigation.ru.html.erb (0.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 78ms (Views: 74.5ms | ActiveRecord: 2.1ms)
